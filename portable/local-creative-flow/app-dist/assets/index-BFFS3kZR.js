var ty=Object.defineProperty;var ny=(e,t,n)=>t in e?ty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var gf=(e,t,n)=>ny(e,typeof t!="symbol"?t+"":t,n);function ry(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function Lh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ah={exports:{}},Yl={},Oh={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ni=Symbol.for("react.element"),oy=Symbol.for("react.portal"),sy=Symbol.for("react.fragment"),iy=Symbol.for("react.strict_mode"),ly=Symbol.for("react.profiler"),ay=Symbol.for("react.provider"),cy=Symbol.for("react.context"),uy=Symbol.for("react.forward_ref"),dy=Symbol.for("react.suspense"),fy=Symbol.for("react.memo"),py=Symbol.for("react.lazy"),xf=Symbol.iterator;function hy(e){return e===null||typeof e!="object"?null:(e=xf&&e[xf]||e["@@iterator"],typeof e=="function"?e:null)}var Fh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hh=Object.assign,Bh={};function Ko(e,t,n){this.props=e,this.context=t,this.refs=Bh,this.updater=n||Fh}Ko.prototype.isReactComponent={};Ko.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ko.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uh(){}Uh.prototype=Ko.prototype;function wu(e,t,n){this.props=e,this.context=t,this.refs=Bh,this.updater=n||Fh}var bu=wu.prototype=new Uh;bu.constructor=wu;Hh(bu,Ko.prototype);bu.isPureReactComponent=!0;var yf=Array.isArray,Vh=Object.prototype.hasOwnProperty,_u={current:null},Wh={key:!0,ref:!0,__self:!0,__source:!0};function Yh(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)Vh.call(t,r)&&!Wh.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:ni,type:e,key:s,ref:i,props:o,_owner:_u.current}}function my(e,t){return{$$typeof:ni,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Nu(e){return typeof e=="object"&&e!==null&&e.$$typeof===ni}function gy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var vf=/\/+/g;function ba(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gy(""+e.key):t.toString(36)}function Ji(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ni:case oy:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+ba(i,0):r,yf(o)?(n="",e!=null&&(n=e.replace(vf,"$&/")+"/"),Ji(o,t,n,"",function(u){return u})):o!=null&&(Nu(o)&&(o=my(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(vf,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",yf(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+ba(s,l);i+=Ji(s,t,n,c,o)}else if(c=hy(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+ba(s,l++),i+=Ji(s,t,n,c,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Si(e,t,n){if(e==null)return e;var r=[],o=0;return Ji(e,r,"","",function(s){return t.call(n,s,o++)}),r}function xy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bt={current:null},Zi={transition:null},yy={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:Zi,ReactCurrentOwner:_u};function Kh(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Si,forEach:function(e,t,n){Si(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Si(e,function(){t++}),t},toArray:function(e){return Si(e,function(t){return t})||[]},only:function(e){if(!Nu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=Ko;me.Fragment=sy;me.Profiler=ly;me.PureComponent=wu;me.StrictMode=iy;me.Suspense=dy;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yy;me.act=Kh;me.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Hh({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=_u.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Vh.call(t,c)&&!Wh.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ni,type:e.type,key:o,ref:s,props:r,_owner:i}};me.createContext=function(e){return e={$$typeof:cy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ay,_context:e},e.Consumer=e};me.createElement=Yh;me.createFactory=function(e){var t=Yh.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:uy,render:e}};me.isValidElement=Nu;me.lazy=function(e){return{$$typeof:py,_payload:{_status:-1,_result:e},_init:xy}};me.memo=function(e,t){return{$$typeof:fy,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=Zi.transition;Zi.transition={};try{e()}finally{Zi.transition=t}};me.unstable_act=Kh;me.useCallback=function(e,t){return bt.current.useCallback(e,t)};me.useContext=function(e){return bt.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return bt.current.useDeferredValue(e)};me.useEffect=function(e,t){return bt.current.useEffect(e,t)};me.useId=function(){return bt.current.useId()};me.useImperativeHandle=function(e,t,n){return bt.current.useImperativeHandle(e,t,n)};me.useInsertionEffect=function(e,t){return bt.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return bt.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return bt.current.useMemo(e,t)};me.useReducer=function(e,t,n){return bt.current.useReducer(e,t,n)};me.useRef=function(e){return bt.current.useRef(e)};me.useState=function(e){return bt.current.useState(e)};me.useSyncExternalStore=function(e,t,n){return bt.current.useSyncExternalStore(e,t,n)};me.useTransition=function(){return bt.current.useTransition()};me.version="18.3.1";Oh.exports=me;var y=Oh.exports;const O=Lh(y),vy=ry({__proto__:null,default:O},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy=y,by=Symbol.for("react.element"),_y=Symbol.for("react.fragment"),Ny=Object.prototype.hasOwnProperty,Sy=wy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ky={key:!0,ref:!0,__self:!0,__source:!0};function Gh(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Ny.call(t,r)&&!ky.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:by,type:e,key:s,ref:i,props:o,_owner:Sy.current}}Yl.Fragment=_y;Yl.jsx=Gh;Yl.jsxs=Gh;Ah.exports=Yl;var a=Ah.exports,lc={},Xh={exports:{}},Ft={},Qh={exports:{}},Jh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,j){var D=M.length;M.push(j);e:for(;0<D;){var F=D-1>>>1,B=M[F];if(0<o(B,j))M[F]=j,M[D]=B,D=F;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var j=M[0],D=M.pop();if(D!==j){M[0]=D;e:for(var F=0,B=M.length,Q=B>>>1;F<Q;){var X=2*(F+1)-1,re=M[X],Y=X+1,se=M[Y];if(0>o(re,D))Y<B&&0>o(se,re)?(M[F]=se,M[Y]=D,F=Y):(M[F]=re,M[X]=D,F=X);else if(Y<B&&0>o(se,D))M[F]=se,M[Y]=D,F=Y;else break e}}return j}function o(M,j){var D=M.sortIndex-j.sortIndex;return D!==0?D:M.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,p=3,m=!1,g=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(M){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=M)r(u),j.sortIndex=j.expirationTime,t(c,j);else break;j=n(u)}}function v(M){if(w=!1,_(M),!g)if(n(c)!==null)g=!0,P(k);else{var j=n(u);j!==null&&H(v,j.startTime-M)}}function k(M,j){g=!1,w&&(w=!1,h($),$=-1),m=!0;var D=p;try{for(_(j),f=n(c);f!==null&&(!(f.expirationTime>j)||M&&!L());){var F=f.callback;if(typeof F=="function"){f.callback=null,p=f.priorityLevel;var B=F(f.expirationTime<=j);j=e.unstable_now(),typeof B=="function"?f.callback=B:f===n(c)&&r(c),_(j)}else r(c);f=n(c)}if(f!==null)var Q=!0;else{var X=n(u);X!==null&&H(v,X.startTime-j),Q=!1}return Q}finally{f=null,p=D,m=!1}}var E=!1,T=null,$=-1,R=5,C=-1;function L(){return!(e.unstable_now()-C<R)}function W(){if(T!==null){var M=e.unstable_now();C=M;var j=!0;try{j=T(!0,M)}finally{j?U():(E=!1,T=null)}}else E=!1}var U;if(typeof x=="function")U=function(){x(W)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,z=S.port2;S.port1.onmessage=W,U=function(){z.postMessage(null)}}else U=function(){b(W,0)};function P(M){T=M,E||(E=!0,U())}function H(M,j){$=b(function(){M(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,P(k))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(M){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var D=p;p=j;try{return M()}finally{p=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,j){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var D=p;p=M;try{return j()}finally{p=D}},e.unstable_scheduleCallback=function(M,j,D){var F=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?F+D:F):D=F,M){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=D+B,M={id:d++,callback:j,priorityLevel:M,startTime:D,expirationTime:B,sortIndex:-1},D>F?(M.sortIndex=D,t(u,M),n(c)===null&&M===n(u)&&(w?(h($),$=-1):w=!0,H(v,D-F))):(M.sortIndex=B,t(c,M),g||m||(g=!0,P(k))),M},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(M){var j=p;return function(){var D=p;p=j;try{return M.apply(this,arguments)}finally{p=D}}}})(Jh);Qh.exports=Jh;var jy=Qh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey=y,At=jy;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zh=new Set,Ps={};function Qr(e,t){Ro(e,t),Ro(e+"Capture",t)}function Ro(e,t){for(Ps[e]=t,e=0;e<t.length;e++)Zh.add(t[e])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ac=Object.prototype.hasOwnProperty,Cy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf={},bf={};function Py(e){return ac.call(bf,e)?!0:ac.call(wf,e)?!1:Cy.test(e)?bf[e]=!0:(wf[e]=!0,!1)}function Ty(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function My(e,t,n,r){if(t===null||typeof t>"u"||Ty(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _t(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lt[e]=new _t(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lt[t]=new _t(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lt[e]=new _t(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lt[e]=new _t(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lt[e]=new _t(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lt[e]=new _t(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lt[e]=new _t(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lt[e]=new _t(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lt[e]=new _t(e,5,!1,e.toLowerCase(),null,!1,!1)});var Su=/[\-:]([a-z])/g;function ku(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Su,ku);lt[t]=new _t(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Su,ku);lt[t]=new _t(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Su,ku);lt[t]=new _t(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lt[e]=new _t(e,1,!1,e.toLowerCase(),null,!1,!1)});lt.xlinkHref=new _t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lt[e]=new _t(e,1,!1,e.toLowerCase(),null,!0,!0)});function ju(e,t,n,r){var o=lt.hasOwnProperty(t)?lt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(My(t,n,o,r)&&(n=null),r||o===null?Py(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Bn=Ey.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ki=Symbol.for("react.element"),fo=Symbol.for("react.portal"),po=Symbol.for("react.fragment"),Eu=Symbol.for("react.strict_mode"),cc=Symbol.for("react.profiler"),qh=Symbol.for("react.provider"),em=Symbol.for("react.context"),Cu=Symbol.for("react.forward_ref"),uc=Symbol.for("react.suspense"),dc=Symbol.for("react.suspense_list"),Pu=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),tm=Symbol.for("react.offscreen"),_f=Symbol.iterator;function qo(e){return e===null||typeof e!="object"?null:(e=_f&&e[_f]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,_a;function hs(e){if(_a===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_a=t&&t[1]||""}return`
`+_a+e}var Na=!1;function Sa(e,t){if(!e||Na)return"";Na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,l=s.length-1;1<=i&&0<=l&&o[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==s[l]){var c=`
`+o[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Na=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hs(e):""}function Iy(e){switch(e.tag){case 5:return hs(e.type);case 16:return hs("Lazy");case 13:return hs("Suspense");case 19:return hs("SuspenseList");case 0:case 2:case 15:return e=Sa(e.type,!1),e;case 11:return e=Sa(e.type.render,!1),e;case 1:return e=Sa(e.type,!0),e;default:return""}}function fc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case po:return"Fragment";case fo:return"Portal";case cc:return"Profiler";case Eu:return"StrictMode";case uc:return"Suspense";case dc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case em:return(e.displayName||"Context")+".Consumer";case qh:return(e._context.displayName||"Context")+".Provider";case Cu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pu:return t=e.displayName||null,t!==null?t:fc(e.type)||"Memo";case Xn:t=e._payload,e=e._init;try{return fc(e(t))}catch{}}return null}function $y(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fc(t);case 8:return t===Eu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Dy(e){var t=nm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ji(e){e._valueTracker||(e._valueTracker=Dy(e))}function rm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=nm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function pl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pc(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Nf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=mr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function om(e,t){t=t.checked,t!=null&&ju(e,"checked",t,!1)}function hc(e,t){om(e,t);var n=mr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mc(e,t.type,n):t.hasOwnProperty("defaultValue")&&mc(e,t.type,mr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Sf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function mc(e,t,n){(t!=="number"||pl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ms=Array.isArray;function ko(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+mr(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function gc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(ms(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:mr(n)}}function sm(e,t){var n=mr(t.value),r=mr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function jf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function im(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?im(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ei,lm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ei=Ei||document.createElement("div"),Ei.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ei.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ts(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ws={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ry=["Webkit","ms","Moz","O"];Object.keys(ws).forEach(function(e){Ry.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ws[t]=ws[e]})});function am(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ws.hasOwnProperty(e)&&ws[e]?(""+t).trim():t+"px"}function cm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=am(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var zy=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yc(e,t){if(t){if(zy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function vc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=null;function Tu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bc=null,jo=null,Eo=null;function Ef(e){if(e=si(e)){if(typeof bc!="function")throw Error(K(280));var t=e.stateNode;t&&(t=Jl(t),bc(e.stateNode,e.type,t))}}function um(e){jo?Eo?Eo.push(e):Eo=[e]:jo=e}function dm(){if(jo){var e=jo,t=Eo;if(Eo=jo=null,Ef(e),t)for(e=0;e<t.length;e++)Ef(t[e])}}function fm(e,t){return e(t)}function pm(){}var ka=!1;function hm(e,t,n){if(ka)return e(t,n);ka=!0;try{return fm(e,t,n)}finally{ka=!1,(jo!==null||Eo!==null)&&(pm(),dm())}}function Ms(e,t){var n=e.stateNode;if(n===null)return null;var r=Jl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var _c=!1;if(zn)try{var es={};Object.defineProperty(es,"passive",{get:function(){_c=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{_c=!1}function Ly(e,t,n,r,o,s,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var bs=!1,hl=null,ml=!1,Nc=null,Ay={onError:function(e){bs=!0,hl=e}};function Oy(e,t,n,r,o,s,i,l,c){bs=!1,hl=null,Ly.apply(Ay,arguments)}function Fy(e,t,n,r,o,s,i,l,c){if(Oy.apply(this,arguments),bs){if(bs){var u=hl;bs=!1,hl=null}else throw Error(K(198));ml||(ml=!0,Nc=u)}}function Jr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function mm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cf(e){if(Jr(e)!==e)throw Error(K(188))}function Hy(e){var t=e.alternate;if(!t){if(t=Jr(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Cf(o),e;if(s===r)return Cf(o),t;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=s;break}if(l===r){i=!0,r=o,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=o;break}if(l===r){i=!0,r=s,n=o;break}l=l.sibling}if(!i)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function gm(e){return e=Hy(e),e!==null?xm(e):null}function xm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xm(e);if(t!==null)return t;e=e.sibling}return null}var ym=At.unstable_scheduleCallback,Pf=At.unstable_cancelCallback,By=At.unstable_shouldYield,Uy=At.unstable_requestPaint,Ue=At.unstable_now,Vy=At.unstable_getCurrentPriorityLevel,Mu=At.unstable_ImmediatePriority,vm=At.unstable_UserBlockingPriority,gl=At.unstable_NormalPriority,Wy=At.unstable_LowPriority,wm=At.unstable_IdlePriority,Kl=null,bn=null;function Yy(e){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Kl,e,void 0,(e.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:Xy,Ky=Math.log,Gy=Math.LN2;function Xy(e){return e>>>=0,e===0?32:31-(Ky(e)/Gy|0)|0}var Ci=64,Pi=4194304;function gs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~o;l!==0?r=gs(l):(s&=i,s!==0&&(r=gs(s)))}else i=n&~o,i!==0?r=gs(i):s!==0&&(r=gs(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-un(t),o=1<<n,r|=e[n],t&=~o;return r}function Qy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-un(s),l=1<<i,c=o[i];c===-1?(!(l&n)||l&r)&&(o[i]=Qy(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function Sc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bm(){var e=Ci;return Ci<<=1,!(Ci&4194240)&&(Ci=64),e}function ja(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ri(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-un(t),e[t]=n}function Zy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-un(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function Iu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-un(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Se=0;function _m(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nm,$u,Sm,km,jm,kc=!1,Ti=[],sr=null,ir=null,lr=null,Is=new Map,$s=new Map,qn=[],qy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tf(e,t){switch(e){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":Is.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$s.delete(t.pointerId)}}function ts(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=si(t),t!==null&&$u(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function ev(e,t,n,r,o){switch(t){case"focusin":return sr=ts(sr,e,t,n,r,o),!0;case"dragenter":return ir=ts(ir,e,t,n,r,o),!0;case"mouseover":return lr=ts(lr,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return Is.set(s,ts(Is.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,$s.set(s,ts($s.get(s)||null,e,t,n,r,o)),!0}return!1}function Em(e){var t=Tr(e.target);if(t!==null){var n=Jr(t);if(n!==null){if(t=n.tag,t===13){if(t=mm(n),t!==null){e.blockedOn=t,jm(e.priority,function(){Sm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=jc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);wc=r,n.target.dispatchEvent(r),wc=null}else return t=si(n),t!==null&&$u(t),e.blockedOn=n,!1;t.shift()}return!0}function Mf(e,t,n){qi(e)&&n.delete(t)}function tv(){kc=!1,sr!==null&&qi(sr)&&(sr=null),ir!==null&&qi(ir)&&(ir=null),lr!==null&&qi(lr)&&(lr=null),Is.forEach(Mf),$s.forEach(Mf)}function ns(e,t){e.blockedOn===t&&(e.blockedOn=null,kc||(kc=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,tv)))}function Ds(e){function t(o){return ns(o,e)}if(0<Ti.length){ns(Ti[0],e);for(var n=1;n<Ti.length;n++){var r=Ti[n];r.blockedOn===e&&(r.blockedOn=null)}}for(sr!==null&&ns(sr,e),ir!==null&&ns(ir,e),lr!==null&&ns(lr,e),Is.forEach(t),$s.forEach(t),n=0;n<qn.length;n++)r=qn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<qn.length&&(n=qn[0],n.blockedOn===null);)Em(n),n.blockedOn===null&&qn.shift()}var Co=Bn.ReactCurrentBatchConfig,yl=!0;function nv(e,t,n,r){var o=Se,s=Co.transition;Co.transition=null;try{Se=1,Du(e,t,n,r)}finally{Se=o,Co.transition=s}}function rv(e,t,n,r){var o=Se,s=Co.transition;Co.transition=null;try{Se=4,Du(e,t,n,r)}finally{Se=o,Co.transition=s}}function Du(e,t,n,r){if(yl){var o=jc(e,t,n,r);if(o===null)za(e,t,r,vl,n),Tf(e,r);else if(ev(o,e,t,n,r))r.stopPropagation();else if(Tf(e,r),t&4&&-1<qy.indexOf(e)){for(;o!==null;){var s=si(o);if(s!==null&&Nm(s),s=jc(e,t,n,r),s===null&&za(e,t,r,vl,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else za(e,t,r,null,n)}}var vl=null;function jc(e,t,n,r){if(vl=null,e=Tu(r),e=Tr(e),e!==null)if(t=Jr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=mm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vl=e,null}function Cm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vy()){case Mu:return 1;case vm:return 4;case gl:case Wy:return 16;case wm:return 536870912;default:return 16}default:return 16}}var nr=null,Ru=null,el=null;function Pm(){if(el)return el;var e,t=Ru,n=t.length,r,o="value"in nr?nr.value:nr.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return el=o.slice(e,1<r?1-r:void 0)}function tl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mi(){return!0}function If(){return!1}function Ht(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mi:If,this.isPropagationStopped=If,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),t}var Go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zu=Ht(Go),oi=Oe({},Go,{view:0,detail:0}),ov=Ht(oi),Ea,Ca,rs,Gl=Oe({},oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rs&&(rs&&e.type==="mousemove"?(Ea=e.screenX-rs.screenX,Ca=e.screenY-rs.screenY):Ca=Ea=0,rs=e),Ea)},movementY:function(e){return"movementY"in e?e.movementY:Ca}}),$f=Ht(Gl),sv=Oe({},Gl,{dataTransfer:0}),iv=Ht(sv),lv=Oe({},oi,{relatedTarget:0}),Pa=Ht(lv),av=Oe({},Go,{animationName:0,elapsedTime:0,pseudoElement:0}),cv=Ht(av),uv=Oe({},Go,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dv=Ht(uv),fv=Oe({},Go,{data:0}),Df=Ht(fv),pv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mv[e])?!!t[e]:!1}function Lu(){return gv}var xv=Oe({},oi,{key:function(e){if(e.key){var t=pv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lu,charCode:function(e){return e.type==="keypress"?tl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yv=Ht(xv),vv=Oe({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rf=Ht(vv),wv=Oe({},oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lu}),bv=Ht(wv),_v=Oe({},Go,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nv=Ht(_v),Sv=Oe({},Gl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kv=Ht(Sv),jv=[9,13,27,32],Au=zn&&"CompositionEvent"in window,_s=null;zn&&"documentMode"in document&&(_s=document.documentMode);var Ev=zn&&"TextEvent"in window&&!_s,Tm=zn&&(!Au||_s&&8<_s&&11>=_s),zf=" ",Lf=!1;function Mm(e,t){switch(e){case"keyup":return jv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Im(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ho=!1;function Cv(e,t){switch(e){case"compositionend":return Im(t);case"keypress":return t.which!==32?null:(Lf=!0,zf);case"textInput":return e=t.data,e===zf&&Lf?null:e;default:return null}}function Pv(e,t){if(ho)return e==="compositionend"||!Au&&Mm(e,t)?(e=Pm(),el=Ru=nr=null,ho=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tm&&t.locale!=="ko"?null:t.data;default:return null}}var Tv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Af(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Tv[e.type]:t==="textarea"}function $m(e,t,n,r){um(r),t=wl(t,"onChange"),0<t.length&&(n=new zu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ns=null,Rs=null;function Mv(e){Vm(e,0)}function Xl(e){var t=xo(e);if(rm(t))return e}function Iv(e,t){if(e==="change")return t}var Dm=!1;if(zn){var Ta;if(zn){var Ma="oninput"in document;if(!Ma){var Of=document.createElement("div");Of.setAttribute("oninput","return;"),Ma=typeof Of.oninput=="function"}Ta=Ma}else Ta=!1;Dm=Ta&&(!document.documentMode||9<document.documentMode)}function Ff(){Ns&&(Ns.detachEvent("onpropertychange",Rm),Rs=Ns=null)}function Rm(e){if(e.propertyName==="value"&&Xl(Rs)){var t=[];$m(t,Rs,e,Tu(e)),hm(Mv,t)}}function $v(e,t,n){e==="focusin"?(Ff(),Ns=t,Rs=n,Ns.attachEvent("onpropertychange",Rm)):e==="focusout"&&Ff()}function Dv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xl(Rs)}function Rv(e,t){if(e==="click")return Xl(t)}function zv(e,t){if(e==="input"||e==="change")return Xl(t)}function Lv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pn=typeof Object.is=="function"?Object.is:Lv;function zs(e,t){if(pn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ac.call(t,o)||!pn(e[o],t[o]))return!1}return!0}function Hf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bf(e,t){var n=Hf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hf(n)}}function zm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Lm(){for(var e=window,t=pl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=pl(e.document)}return t}function Ou(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Av(e){var t=Lm(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zm(n.ownerDocument.documentElement,n)){if(r!==null&&Ou(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Bf(n,s);var i=Bf(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ov=zn&&"documentMode"in document&&11>=document.documentMode,mo=null,Ec=null,Ss=null,Cc=!1;function Uf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cc||mo==null||mo!==pl(r)||(r=mo,"selectionStart"in r&&Ou(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ss&&zs(Ss,r)||(Ss=r,r=wl(Ec,"onSelect"),0<r.length&&(t=new zu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mo)))}function Ii(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var go={animationend:Ii("Animation","AnimationEnd"),animationiteration:Ii("Animation","AnimationIteration"),animationstart:Ii("Animation","AnimationStart"),transitionend:Ii("Transition","TransitionEnd")},Ia={},Am={};zn&&(Am=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function Ql(e){if(Ia[e])return Ia[e];if(!go[e])return e;var t=go[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Am)return Ia[e]=t[n];return e}var Om=Ql("animationend"),Fm=Ql("animationiteration"),Hm=Ql("animationstart"),Bm=Ql("transitionend"),Um=new Map,Vf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(e,t){Um.set(e,t),Qr(t,[e])}for(var $a=0;$a<Vf.length;$a++){var Da=Vf[$a],Fv=Da.toLowerCase(),Hv=Da[0].toUpperCase()+Da.slice(1);yr(Fv,"on"+Hv)}yr(Om,"onAnimationEnd");yr(Fm,"onAnimationIteration");yr(Hm,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr(Bm,"onTransitionEnd");Ro("onMouseEnter",["mouseout","mouseover"]);Ro("onMouseLeave",["mouseout","mouseover"]);Ro("onPointerEnter",["pointerout","pointerover"]);Ro("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bv=new Set("cancel close invalid load scroll toggle".split(" ").concat(xs));function Wf(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Fy(r,t,void 0,e),e.currentTarget=null}function Vm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&o.isPropagationStopped())break e;Wf(o,l,u),s=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&o.isPropagationStopped())break e;Wf(o,l,u),s=c}}}if(ml)throw e=Nc,ml=!1,Nc=null,e}function Me(e,t){var n=t[$c];n===void 0&&(n=t[$c]=new Set);var r=e+"__bubble";n.has(r)||(Wm(t,e,2,!1),n.add(r))}function Ra(e,t,n){var r=0;t&&(r|=4),Wm(n,e,r,t)}var $i="_reactListening"+Math.random().toString(36).slice(2);function Ls(e){if(!e[$i]){e[$i]=!0,Zh.forEach(function(n){n!=="selectionchange"&&(Bv.has(n)||Ra(n,!1,e),Ra(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$i]||(t[$i]=!0,Ra("selectionchange",!1,t))}}function Wm(e,t,n,r){switch(Cm(t)){case 1:var o=nv;break;case 4:o=rv;break;default:o=Du}n=o.bind(null,t,n,e),o=void 0,!_c||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function za(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;l!==null;){if(i=Tr(l),i===null)return;if(c=i.tag,c===5||c===6){r=s=i;continue e}l=l.parentNode}}r=r.return}hm(function(){var u=s,d=Tu(n),f=[];e:{var p=Um.get(e);if(p!==void 0){var m=zu,g=e;switch(e){case"keypress":if(tl(n)===0)break e;case"keydown":case"keyup":m=yv;break;case"focusin":g="focus",m=Pa;break;case"focusout":g="blur",m=Pa;break;case"beforeblur":case"afterblur":m=Pa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=$f;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=iv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=bv;break;case Om:case Fm:case Hm:m=cv;break;case Bm:m=Nv;break;case"scroll":m=ov;break;case"wheel":m=kv;break;case"copy":case"cut":case"paste":m=dv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Rf}var w=(t&4)!==0,b=!w&&e==="scroll",h=w?p!==null?p+"Capture":null:p;w=[];for(var x=u,_;x!==null;){_=x;var v=_.stateNode;if(_.tag===5&&v!==null&&(_=v,h!==null&&(v=Ms(x,h),v!=null&&w.push(As(x,v,_)))),b)break;x=x.return}0<w.length&&(p=new m(p,g,null,n,d),f.push({event:p,listeners:w}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&n!==wc&&(g=n.relatedTarget||n.fromElement)&&(Tr(g)||g[Ln]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?Tr(g):null,g!==null&&(b=Jr(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(w=$f,v="onMouseLeave",h="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(w=Rf,v="onPointerLeave",h="onPointerEnter",x="pointer"),b=m==null?p:xo(m),_=g==null?p:xo(g),p=new w(v,x+"leave",m,n,d),p.target=b,p.relatedTarget=_,v=null,Tr(d)===u&&(w=new w(h,x+"enter",g,n,d),w.target=_,w.relatedTarget=b,v=w),b=v,m&&g)t:{for(w=m,h=g,x=0,_=w;_;_=ro(_))x++;for(_=0,v=h;v;v=ro(v))_++;for(;0<x-_;)w=ro(w),x--;for(;0<_-x;)h=ro(h),_--;for(;x--;){if(w===h||h!==null&&w===h.alternate)break t;w=ro(w),h=ro(h)}w=null}else w=null;m!==null&&Yf(f,p,m,w,!1),g!==null&&b!==null&&Yf(f,b,g,w,!0)}}e:{if(p=u?xo(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var k=Iv;else if(Af(p))if(Dm)k=zv;else{k=Dv;var E=$v}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=Rv);if(k&&(k=k(e,u))){$m(f,k,n,d);break e}E&&E(e,p,u),e==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&mc(p,"number",p.value)}switch(E=u?xo(u):window,e){case"focusin":(Af(E)||E.contentEditable==="true")&&(mo=E,Ec=u,Ss=null);break;case"focusout":Ss=Ec=mo=null;break;case"mousedown":Cc=!0;break;case"contextmenu":case"mouseup":case"dragend":Cc=!1,Uf(f,n,d);break;case"selectionchange":if(Ov)break;case"keydown":case"keyup":Uf(f,n,d)}var T;if(Au)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else ho?Mm(e,n)&&($="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(Tm&&n.locale!=="ko"&&(ho||$!=="onCompositionStart"?$==="onCompositionEnd"&&ho&&(T=Pm()):(nr=d,Ru="value"in nr?nr.value:nr.textContent,ho=!0)),E=wl(u,$),0<E.length&&($=new Df($,e,null,n,d),f.push({event:$,listeners:E}),T?$.data=T:(T=Im(n),T!==null&&($.data=T)))),(T=Ev?Cv(e,n):Pv(e,n))&&(u=wl(u,"onBeforeInput"),0<u.length&&(d=new Df("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=T))}Vm(f,t)})}function As(e,t,n){return{instance:e,listener:t,currentTarget:n}}function wl(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Ms(e,n),s!=null&&r.unshift(As(e,s,o)),s=Ms(e,t),s!=null&&r.push(As(e,s,o))),e=e.return}return r}function ro(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yf(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,o?(c=Ms(n,s),c!=null&&i.unshift(As(n,c,l))):o||(c=Ms(n,s),c!=null&&i.push(As(n,c,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Uv=/\r\n?/g,Vv=/\u0000|\uFFFD/g;function Kf(e){return(typeof e=="string"?e:""+e).replace(Uv,`
`).replace(Vv,"")}function Di(e,t,n){if(t=Kf(t),Kf(e)!==t&&n)throw Error(K(425))}function bl(){}var Pc=null,Tc=null;function Mc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ic=typeof setTimeout=="function"?setTimeout:void 0,Wv=typeof clearTimeout=="function"?clearTimeout:void 0,Gf=typeof Promise=="function"?Promise:void 0,Yv=typeof queueMicrotask=="function"?queueMicrotask:typeof Gf<"u"?function(e){return Gf.resolve(null).then(e).catch(Kv)}:Ic;function Kv(e){setTimeout(function(){throw e})}function La(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Ds(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ds(t)}function ar(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),vn="__reactFiber$"+Xo,Os="__reactProps$"+Xo,Ln="__reactContainer$"+Xo,$c="__reactEvents$"+Xo,Gv="__reactListeners$"+Xo,Xv="__reactHandles$"+Xo;function Tr(e){var t=e[vn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ln]||n[vn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Xf(e);e!==null;){if(n=e[vn])return n;e=Xf(e)}return t}e=n,n=e.parentNode}return null}function si(e){return e=e[vn]||e[Ln],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function Jl(e){return e[Os]||null}var Dc=[],yo=-1;function vr(e){return{current:e}}function Ie(e){0>yo||(e.current=Dc[yo],Dc[yo]=null,yo--)}function Ee(e,t){yo++,Dc[yo]=e.current,e.current=t}var gr={},gt=vr(gr),Tt=vr(!1),Br=gr;function zo(e,t){var n=e.type.contextTypes;if(!n)return gr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Mt(e){return e=e.childContextTypes,e!=null}function _l(){Ie(Tt),Ie(gt)}function Qf(e,t,n){if(gt.current!==gr)throw Error(K(168));Ee(gt,t),Ee(Tt,n)}function Ym(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(K(108,$y(e)||"Unknown",o));return Oe({},n,r)}function Nl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gr,Br=gt.current,Ee(gt,e),Ee(Tt,Tt.current),!0}function Jf(e,t,n){var r=e.stateNode;if(!r)throw Error(K(169));n?(e=Ym(e,t,Br),r.__reactInternalMemoizedMergedChildContext=e,Ie(Tt),Ie(gt),Ee(gt,e)):Ie(Tt),Ee(Tt,n)}var Cn=null,Zl=!1,Aa=!1;function Km(e){Cn===null?Cn=[e]:Cn.push(e)}function Qv(e){Zl=!0,Km(e)}function wr(){if(!Aa&&Cn!==null){Aa=!0;var e=0,t=Se;try{var n=Cn;for(Se=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cn=null,Zl=!1}catch(o){throw Cn!==null&&(Cn=Cn.slice(e+1)),ym(Mu,wr),o}finally{Se=t,Aa=!1}}return null}var vo=[],wo=0,Sl=null,kl=0,Vt=[],Wt=0,Ur=null,Pn=1,Tn="";function Er(e,t){vo[wo++]=kl,vo[wo++]=Sl,Sl=e,kl=t}function Gm(e,t,n){Vt[Wt++]=Pn,Vt[Wt++]=Tn,Vt[Wt++]=Ur,Ur=e;var r=Pn;e=Tn;var o=32-un(r)-1;r&=~(1<<o),n+=1;var s=32-un(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Pn=1<<32-un(t)+o|n<<o|r,Tn=s+e}else Pn=1<<s|n<<o|r,Tn=e}function Fu(e){e.return!==null&&(Er(e,1),Gm(e,1,0))}function Hu(e){for(;e===Sl;)Sl=vo[--wo],vo[wo]=null,kl=vo[--wo],vo[wo]=null;for(;e===Ur;)Ur=Vt[--Wt],Vt[Wt]=null,Tn=Vt[--Wt],Vt[Wt]=null,Pn=Vt[--Wt],Vt[Wt]=null}var Lt=null,zt=null,ze=!1,an=null;function Xm(e,t){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Zf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Lt=e,zt=ar(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Lt=e,zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ur!==null?{id:Pn,overflow:Tn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Lt=e,zt=null,!0):!1;default:return!1}}function Rc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zc(e){if(ze){var t=zt;if(t){var n=t;if(!Zf(e,t)){if(Rc(e))throw Error(K(418));t=ar(n.nextSibling);var r=Lt;t&&Zf(e,t)?Xm(r,n):(e.flags=e.flags&-4097|2,ze=!1,Lt=e)}}else{if(Rc(e))throw Error(K(418));e.flags=e.flags&-4097|2,ze=!1,Lt=e}}}function qf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Lt=e}function Ri(e){if(e!==Lt)return!1;if(!ze)return qf(e),ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mc(e.type,e.memoizedProps)),t&&(t=zt)){if(Rc(e))throw Qm(),Error(K(418));for(;t;)Xm(e,t),t=ar(t.nextSibling)}if(qf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zt=ar(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zt=null}}else zt=Lt?ar(e.stateNode.nextSibling):null;return!0}function Qm(){for(var e=zt;e;)e=ar(e.nextSibling)}function Lo(){zt=Lt=null,ze=!1}function Bu(e){an===null?an=[e]:an.push(e)}var Jv=Bn.ReactCurrentBatchConfig;function os(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var l=o.refs;i===null?delete l[s]:l[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function zi(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ep(e){var t=e._init;return t(e._payload)}function Jm(e){function t(h,x){if(e){var _=h.deletions;_===null?(h.deletions=[x],h.flags|=16):_.push(x)}}function n(h,x){if(!e)return null;for(;x!==null;)t(h,x),x=x.sibling;return null}function r(h,x){for(h=new Map;x!==null;)x.key!==null?h.set(x.key,x):h.set(x.index,x),x=x.sibling;return h}function o(h,x){return h=fr(h,x),h.index=0,h.sibling=null,h}function s(h,x,_){return h.index=_,e?(_=h.alternate,_!==null?(_=_.index,_<x?(h.flags|=2,x):_):(h.flags|=2,x)):(h.flags|=1048576,x)}function i(h){return e&&h.alternate===null&&(h.flags|=2),h}function l(h,x,_,v){return x===null||x.tag!==6?(x=Wa(_,h.mode,v),x.return=h,x):(x=o(x,_),x.return=h,x)}function c(h,x,_,v){var k=_.type;return k===po?d(h,x,_.props.children,v,_.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Xn&&ep(k)===x.type)?(v=o(x,_.props),v.ref=os(h,x,_),v.return=h,v):(v=al(_.type,_.key,_.props,null,h.mode,v),v.ref=os(h,x,_),v.return=h,v)}function u(h,x,_,v){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=Ya(_,h.mode,v),x.return=h,x):(x=o(x,_.children||[]),x.return=h,x)}function d(h,x,_,v,k){return x===null||x.tag!==7?(x=Ar(_,h.mode,v,k),x.return=h,x):(x=o(x,_),x.return=h,x)}function f(h,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Wa(""+x,h.mode,_),x.return=h,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ki:return _=al(x.type,x.key,x.props,null,h.mode,_),_.ref=os(h,null,x),_.return=h,_;case fo:return x=Ya(x,h.mode,_),x.return=h,x;case Xn:var v=x._init;return f(h,v(x._payload),_)}if(ms(x)||qo(x))return x=Ar(x,h.mode,_,null),x.return=h,x;zi(h,x)}return null}function p(h,x,_,v){var k=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return k!==null?null:l(h,x,""+_,v);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ki:return _.key===k?c(h,x,_,v):null;case fo:return _.key===k?u(h,x,_,v):null;case Xn:return k=_._init,p(h,x,k(_._payload),v)}if(ms(_)||qo(_))return k!==null?null:d(h,x,_,v,null);zi(h,_)}return null}function m(h,x,_,v,k){if(typeof v=="string"&&v!==""||typeof v=="number")return h=h.get(_)||null,l(x,h,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ki:return h=h.get(v.key===null?_:v.key)||null,c(x,h,v,k);case fo:return h=h.get(v.key===null?_:v.key)||null,u(x,h,v,k);case Xn:var E=v._init;return m(h,x,_,E(v._payload),k)}if(ms(v)||qo(v))return h=h.get(_)||null,d(x,h,v,k,null);zi(x,v)}return null}function g(h,x,_,v){for(var k=null,E=null,T=x,$=x=0,R=null;T!==null&&$<_.length;$++){T.index>$?(R=T,T=null):R=T.sibling;var C=p(h,T,_[$],v);if(C===null){T===null&&(T=R);break}e&&T&&C.alternate===null&&t(h,T),x=s(C,x,$),E===null?k=C:E.sibling=C,E=C,T=R}if($===_.length)return n(h,T),ze&&Er(h,$),k;if(T===null){for(;$<_.length;$++)T=f(h,_[$],v),T!==null&&(x=s(T,x,$),E===null?k=T:E.sibling=T,E=T);return ze&&Er(h,$),k}for(T=r(h,T);$<_.length;$++)R=m(T,h,$,_[$],v),R!==null&&(e&&R.alternate!==null&&T.delete(R.key===null?$:R.key),x=s(R,x,$),E===null?k=R:E.sibling=R,E=R);return e&&T.forEach(function(L){return t(h,L)}),ze&&Er(h,$),k}function w(h,x,_,v){var k=qo(_);if(typeof k!="function")throw Error(K(150));if(_=k.call(_),_==null)throw Error(K(151));for(var E=k=null,T=x,$=x=0,R=null,C=_.next();T!==null&&!C.done;$++,C=_.next()){T.index>$?(R=T,T=null):R=T.sibling;var L=p(h,T,C.value,v);if(L===null){T===null&&(T=R);break}e&&T&&L.alternate===null&&t(h,T),x=s(L,x,$),E===null?k=L:E.sibling=L,E=L,T=R}if(C.done)return n(h,T),ze&&Er(h,$),k;if(T===null){for(;!C.done;$++,C=_.next())C=f(h,C.value,v),C!==null&&(x=s(C,x,$),E===null?k=C:E.sibling=C,E=C);return ze&&Er(h,$),k}for(T=r(h,T);!C.done;$++,C=_.next())C=m(T,h,$,C.value,v),C!==null&&(e&&C.alternate!==null&&T.delete(C.key===null?$:C.key),x=s(C,x,$),E===null?k=C:E.sibling=C,E=C);return e&&T.forEach(function(W){return t(h,W)}),ze&&Er(h,$),k}function b(h,x,_,v){if(typeof _=="object"&&_!==null&&_.type===po&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ki:e:{for(var k=_.key,E=x;E!==null;){if(E.key===k){if(k=_.type,k===po){if(E.tag===7){n(h,E.sibling),x=o(E,_.props.children),x.return=h,h=x;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Xn&&ep(k)===E.type){n(h,E.sibling),x=o(E,_.props),x.ref=os(h,E,_),x.return=h,h=x;break e}n(h,E);break}else t(h,E);E=E.sibling}_.type===po?(x=Ar(_.props.children,h.mode,v,_.key),x.return=h,h=x):(v=al(_.type,_.key,_.props,null,h.mode,v),v.ref=os(h,x,_),v.return=h,h=v)}return i(h);case fo:e:{for(E=_.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(h,x.sibling),x=o(x,_.children||[]),x.return=h,h=x;break e}else{n(h,x);break}else t(h,x);x=x.sibling}x=Ya(_,h.mode,v),x.return=h,h=x}return i(h);case Xn:return E=_._init,b(h,x,E(_._payload),v)}if(ms(_))return g(h,x,_,v);if(qo(_))return w(h,x,_,v);zi(h,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(h,x.sibling),x=o(x,_),x.return=h,h=x):(n(h,x),x=Wa(_,h.mode,v),x.return=h,h=x),i(h)):n(h,x)}return b}var Ao=Jm(!0),Zm=Jm(!1),jl=vr(null),El=null,bo=null,Uu=null;function Vu(){Uu=bo=El=null}function Wu(e){var t=jl.current;Ie(jl),e._currentValue=t}function Lc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Po(e,t){El=e,Uu=bo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ct=!0),e.firstContext=null)}function Qt(e){var t=e._currentValue;if(Uu!==e)if(e={context:e,memoizedValue:t,next:null},bo===null){if(El===null)throw Error(K(308));bo=e,El.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var Mr=null;function Yu(e){Mr===null?Mr=[e]:Mr.push(e)}function qm(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Yu(t)):(n.next=o.next,o.next=n),t.interleaved=n,An(e,r)}function An(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Qn=!1;function Ku(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function e0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function In(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,An(e,n)}return o=r.interleaved,o===null?(t.next=t,Yu(r)):(t.next=o.next,o.next=t),r.interleaved=t,An(e,n)}function nl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Iu(e,n)}}function tp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Cl(e,t,n,r){var o=e.updateQueue;Qn=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?s=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=o.baseState;i=0,d=u=c=null,l=s;do{var p=l.lane,m=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,w=l;switch(p=t,m=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){f=g.call(m,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,p=typeof g=="function"?g.call(m,f,p):g,p==null)break e;f=Oe({},f,p);break e;case 2:Qn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=o.effects,p===null?o.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,i|=p;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;p=l,l=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(d===null&&(c=f),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=d,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);Wr|=i,e.lanes=i,e.memoizedState=f}}function np(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(K(191,o));o.call(r)}}}var ii={},_n=vr(ii),Fs=vr(ii),Hs=vr(ii);function Ir(e){if(e===ii)throw Error(K(174));return e}function Gu(e,t){switch(Ee(Hs,t),Ee(Fs,e),Ee(_n,ii),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xc(t,e)}Ie(_n),Ee(_n,t)}function Oo(){Ie(_n),Ie(Fs),Ie(Hs)}function t0(e){Ir(Hs.current);var t=Ir(_n.current),n=xc(t,e.type);t!==n&&(Ee(Fs,e),Ee(_n,n))}function Xu(e){Fs.current===e&&(Ie(_n),Ie(Fs))}var Le=vr(0);function Pl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oa=[];function Qu(){for(var e=0;e<Oa.length;e++)Oa[e]._workInProgressVersionPrimary=null;Oa.length=0}var rl=Bn.ReactCurrentDispatcher,Fa=Bn.ReactCurrentBatchConfig,Vr=0,Ae=null,Xe=null,tt=null,Tl=!1,ks=!1,Bs=0,Zv=0;function dt(){throw Error(K(321))}function Ju(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pn(e[n],t[n]))return!1;return!0}function Zu(e,t,n,r,o,s){if(Vr=s,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rl.current=e===null||e.memoizedState===null?nw:rw,e=n(r,o),ks){s=0;do{if(ks=!1,Bs=0,25<=s)throw Error(K(301));s+=1,tt=Xe=null,t.updateQueue=null,rl.current=ow,e=n(r,o)}while(ks)}if(rl.current=Ml,t=Xe!==null&&Xe.next!==null,Vr=0,tt=Xe=Ae=null,Tl=!1,t)throw Error(K(300));return e}function qu(){var e=Bs!==0;return Bs=0,e}function yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ae.memoizedState=tt=e:tt=tt.next=e,tt}function Jt(){if(Xe===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=tt===null?Ae.memoizedState:tt.next;if(t!==null)tt=t,Xe=e;else{if(e===null)throw Error(K(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},tt===null?Ae.memoizedState=tt=e:tt=tt.next=e}return tt}function Us(e,t){return typeof t=="function"?t(e):t}function Ha(e){var t=Jt(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=Xe,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var l=i=null,c=null,u=s;do{var d=u.lane;if((Vr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,i=r):c=c.next=f,Ae.lanes|=d,Wr|=d}u=u.next}while(u!==null&&u!==s);c===null?i=r:c.next=l,pn(r,t.memoizedState)||(Ct=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Ae.lanes|=s,Wr|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ba(e){var t=Jt(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);pn(s,t.memoizedState)||(Ct=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function n0(){}function r0(e,t){var n=Ae,r=Jt(),o=t(),s=!pn(r.memoizedState,o);if(s&&(r.memoizedState=o,Ct=!0),r=r.queue,ed(i0.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,Vs(9,s0.bind(null,n,r,o,t),void 0,null),nt===null)throw Error(K(349));Vr&30||o0(n,t,o)}return o}function o0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function s0(e,t,n,r){t.value=n,t.getSnapshot=r,l0(t)&&a0(e)}function i0(e,t,n){return n(function(){l0(t)&&a0(e)})}function l0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pn(e,n)}catch{return!0}}function a0(e){var t=An(e,1);t!==null&&dn(t,e,1,-1)}function rp(e){var t=yn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:e},t.queue=e,e=e.dispatch=tw.bind(null,Ae,e),[t.memoizedState,e]}function Vs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function c0(){return Jt().memoizedState}function ol(e,t,n,r){var o=yn();Ae.flags|=e,o.memoizedState=Vs(1|t,n,void 0,r===void 0?null:r)}function ql(e,t,n,r){var o=Jt();r=r===void 0?null:r;var s=void 0;if(Xe!==null){var i=Xe.memoizedState;if(s=i.destroy,r!==null&&Ju(r,i.deps)){o.memoizedState=Vs(t,n,s,r);return}}Ae.flags|=e,o.memoizedState=Vs(1|t,n,s,r)}function op(e,t){return ol(8390656,8,e,t)}function ed(e,t){return ql(2048,8,e,t)}function u0(e,t){return ql(4,2,e,t)}function d0(e,t){return ql(4,4,e,t)}function f0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function p0(e,t,n){return n=n!=null?n.concat([e]):null,ql(4,4,f0.bind(null,t,e),n)}function td(){}function h0(e,t){var n=Jt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ju(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function m0(e,t){var n=Jt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ju(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function g0(e,t,n){return Vr&21?(pn(n,t)||(n=bm(),Ae.lanes|=n,Wr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ct=!0),e.memoizedState=n)}function qv(e,t){var n=Se;Se=n!==0&&4>n?n:4,e(!0);var r=Fa.transition;Fa.transition={};try{e(!1),t()}finally{Se=n,Fa.transition=r}}function x0(){return Jt().memoizedState}function ew(e,t,n){var r=dr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},y0(e))v0(t,n);else if(n=qm(e,t,n,r),n!==null){var o=wt();dn(n,e,r,o),w0(n,t,r)}}function tw(e,t,n){var r=dr(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(y0(e))v0(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,l=s(i,n);if(o.hasEagerState=!0,o.eagerState=l,pn(l,i)){var c=t.interleaved;c===null?(o.next=o,Yu(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=qm(e,t,o,r),n!==null&&(o=wt(),dn(n,e,r,o),w0(n,t,r))}}function y0(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function v0(e,t){ks=Tl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function w0(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Iu(e,n)}}var Ml={readContext:Qt,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},nw={readContext:Qt,useCallback:function(e,t){return yn().memoizedState=[e,t===void 0?null:t],e},useContext:Qt,useEffect:op,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ol(4194308,4,f0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ol(4194308,4,e,t)},useInsertionEffect:function(e,t){return ol(4,2,e,t)},useMemo:function(e,t){var n=yn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ew.bind(null,Ae,e),[r.memoizedState,e]},useRef:function(e){var t=yn();return e={current:e},t.memoizedState=e},useState:rp,useDebugValue:td,useDeferredValue:function(e){return yn().memoizedState=e},useTransition:function(){var e=rp(!1),t=e[0];return e=qv.bind(null,e[1]),yn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ae,o=yn();if(ze){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),nt===null)throw Error(K(349));Vr&30||o0(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,op(i0.bind(null,r,s,e),[e]),r.flags|=2048,Vs(9,s0.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=yn(),t=nt.identifierPrefix;if(ze){var n=Tn,r=Pn;n=(r&~(1<<32-un(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Zv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rw={readContext:Qt,useCallback:h0,useContext:Qt,useEffect:ed,useImperativeHandle:p0,useInsertionEffect:u0,useLayoutEffect:d0,useMemo:m0,useReducer:Ha,useRef:c0,useState:function(){return Ha(Us)},useDebugValue:td,useDeferredValue:function(e){var t=Jt();return g0(t,Xe.memoizedState,e)},useTransition:function(){var e=Ha(Us)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:n0,useSyncExternalStore:r0,useId:x0,unstable_isNewReconciler:!1},ow={readContext:Qt,useCallback:h0,useContext:Qt,useEffect:ed,useImperativeHandle:p0,useInsertionEffect:u0,useLayoutEffect:d0,useMemo:m0,useReducer:Ba,useRef:c0,useState:function(){return Ba(Us)},useDebugValue:td,useDeferredValue:function(e){var t=Jt();return Xe===null?t.memoizedState=e:g0(t,Xe.memoizedState,e)},useTransition:function(){var e=Ba(Us)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:n0,useSyncExternalStore:r0,useId:x0,unstable_isNewReconciler:!1};function on(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ac(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ea={isMounted:function(e){return(e=e._reactInternals)?Jr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wt(),o=dr(e),s=In(r,o);s.payload=t,n!=null&&(s.callback=n),t=cr(e,s,o),t!==null&&(dn(t,e,o,r),nl(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wt(),o=dr(e),s=In(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=cr(e,s,o),t!==null&&(dn(t,e,o,r),nl(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wt(),r=dr(e),o=In(n,r);o.tag=2,t!=null&&(o.callback=t),t=cr(e,o,r),t!==null&&(dn(t,e,r,n),nl(t,e,r))}};function sp(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!zs(n,r)||!zs(o,s):!0}function b0(e,t,n){var r=!1,o=gr,s=t.contextType;return typeof s=="object"&&s!==null?s=Qt(s):(o=Mt(t)?Br:gt.current,r=t.contextTypes,s=(r=r!=null)?zo(e,o):gr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ea,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function ip(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ea.enqueueReplaceState(t,t.state,null)}function Oc(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ku(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Qt(s):(s=Mt(t)?Br:gt.current,o.context=zo(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Ac(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ea.enqueueReplaceState(o,o.state,null),Cl(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Fo(e,t){try{var n="",r=t;do n+=Iy(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function Ua(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Fc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var sw=typeof WeakMap=="function"?WeakMap:Map;function _0(e,t,n){n=In(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$l||($l=!0,Qc=r),Fc(e,t)},n}function N0(e,t,n){n=In(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Fc(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Fc(e,t),typeof r!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function lp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new sw;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=vw.bind(null,e,t,n),t.then(e,e))}function ap(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cp(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=In(-1,1),t.tag=2,cr(n,t,1))),n.lanes|=1),e)}var iw=Bn.ReactCurrentOwner,Ct=!1;function vt(e,t,n,r){t.child=e===null?Zm(t,null,n,r):Ao(t,e.child,n,r)}function up(e,t,n,r,o){n=n.render;var s=t.ref;return Po(t,o),r=Zu(e,t,n,r,s,o),n=qu(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,On(e,t,o)):(ze&&n&&Fu(t),t.flags|=1,vt(e,t,r,o),t.child)}function dp(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!cd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,S0(e,t,s,r,o)):(e=al(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:zs,n(i,r)&&e.ref===t.ref)return On(e,t,o)}return t.flags|=1,e=fr(s,r),e.ref=t.ref,e.return=t,t.child=e}function S0(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(zs(s,r)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(Ct=!0);else return t.lanes=e.lanes,On(e,t,o)}return Hc(e,t,n,r,o)}function k0(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(No,Dt),Dt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(No,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ee(No,Dt),Dt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ee(No,Dt),Dt|=r;return vt(e,t,o,n),t.child}function j0(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hc(e,t,n,r,o){var s=Mt(n)?Br:gt.current;return s=zo(t,s),Po(t,o),n=Zu(e,t,n,r,s,o),r=qu(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,On(e,t,o)):(ze&&r&&Fu(t),t.flags|=1,vt(e,t,n,o),t.child)}function fp(e,t,n,r,o){if(Mt(n)){var s=!0;Nl(t)}else s=!1;if(Po(t,o),t.stateNode===null)sl(e,t),b0(t,n,r),Oc(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qt(u):(u=Mt(n)?Br:gt.current,u=zo(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==u)&&ip(t,i,r,u),Qn=!1;var p=t.memoizedState;i.state=p,Cl(t,r,i,o),c=t.memoizedState,l!==r||p!==c||Tt.current||Qn?(typeof d=="function"&&(Ac(t,n,d,r),c=t.memoizedState),(l=Qn||sp(t,n,l,r,p,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,e0(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:on(t.type,l),i.props=u,f=t.pendingProps,p=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qt(c):(c=Mt(n)?Br:gt.current,c=zo(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||p!==c)&&ip(t,i,r,c),Qn=!1,p=t.memoizedState,i.state=p,Cl(t,r,i,o);var g=t.memoizedState;l!==f||p!==g||Tt.current||Qn?(typeof m=="function"&&(Ac(t,n,m,r),g=t.memoizedState),(u=Qn||sp(t,n,u,r,p,g,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,g,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),i.props=r,i.state=g,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Bc(e,t,n,r,s,o)}function Bc(e,t,n,r,o,s){j0(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&Jf(t,n,!1),On(e,t,s);r=t.stateNode,iw.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Ao(t,e.child,null,s),t.child=Ao(t,null,l,s)):vt(e,t,l,s),t.memoizedState=r.state,o&&Jf(t,n,!0),t.child}function E0(e){var t=e.stateNode;t.pendingContext?Qf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qf(e,t.context,!1),Gu(e,t.containerInfo)}function pp(e,t,n,r,o){return Lo(),Bu(o),t.flags|=256,vt(e,t,n,r),t.child}var Uc={dehydrated:null,treeContext:null,retryLane:0};function Vc(e){return{baseLanes:e,cachePool:null,transitions:null}}function C0(e,t,n){var r=t.pendingProps,o=Le.current,s=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ee(Le,o&1),e===null)return zc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=ra(i,r,0,null),e=Ar(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Vc(n),t.memoizedState=Uc,e):nd(t,i));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return lw(e,t,i,r,l,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,l=o.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=fr(o,c),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=fr(l,s):(s=Ar(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?Vc(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=Uc,r}return s=e.child,e=s.sibling,r=fr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function nd(e,t){return t=ra({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Li(e,t,n,r){return r!==null&&Bu(r),Ao(t,e.child,null,n),e=nd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lw(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=Ua(Error(K(422))),Li(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=ra({mode:"visible",children:r.children},o,0,null),s=Ar(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ao(t,e.child,null,i),t.child.memoizedState=Vc(i),t.memoizedState=Uc,s);if(!(t.mode&1))return Li(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(K(419)),r=Ua(s,r,void 0),Li(e,t,i,r)}if(l=(i&e.childLanes)!==0,Ct||l){if(r=nt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,An(e,o),dn(r,e,o,-1))}return ad(),r=Ua(Error(K(421))),Li(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=ww.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,zt=ar(o.nextSibling),Lt=t,ze=!0,an=null,e!==null&&(Vt[Wt++]=Pn,Vt[Wt++]=Tn,Vt[Wt++]=Ur,Pn=e.id,Tn=e.overflow,Ur=t),t=nd(t,r.children),t.flags|=4096,t)}function hp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Lc(e.return,t,n)}function Va(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function P0(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(vt(e,t,r.children,n),r=Le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hp(e,n,t);else if(e.tag===19)hp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ee(Le,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Pl(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Va(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Pl(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Va(t,!0,n,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function On(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=fr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function aw(e,t,n){switch(t.tag){case 3:E0(t),Lo();break;case 5:t0(t);break;case 1:Mt(t.type)&&Nl(t);break;case 4:Gu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ee(jl,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Le,Le.current&1),t.flags|=128,null):n&t.child.childLanes?C0(e,t,n):(Ee(Le,Le.current&1),e=On(e,t,n),e!==null?e.sibling:null);Ee(Le,Le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return P0(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ee(Le,Le.current),r)break;return null;case 22:case 23:return t.lanes=0,k0(e,t,n)}return On(e,t,n)}var T0,Wc,M0,I0;T0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wc=function(){};M0=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Ir(_n.current);var s=null;switch(n){case"input":o=pc(e,o),r=pc(e,r),s=[];break;case"select":o=Oe({},o,{value:void 0}),r=Oe({},r,{value:void 0}),s=[];break;case"textarea":o=gc(e,o),r=gc(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=bl)}yc(n,r);var i;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ps.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ps.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Me("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};I0=function(e,t,n,r){n!==r&&(t.flags|=4)};function ss(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function cw(e,t,n){var r=t.pendingProps;switch(Hu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(t),null;case 1:return Mt(t.type)&&_l(),ft(t),null;case 3:return r=t.stateNode,Oo(),Ie(Tt),Ie(gt),Qu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ri(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,an!==null&&(qc(an),an=null))),Wc(e,t),ft(t),null;case 5:Xu(t);var o=Ir(Hs.current);if(n=t.type,e!==null&&t.stateNode!=null)M0(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(K(166));return ft(t),null}if(e=Ir(_n.current),Ri(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[vn]=t,r[Os]=s,e=(t.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(o=0;o<xs.length;o++)Me(xs[o],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Nf(r,s),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Me("invalid",r);break;case"textarea":kf(r,s),Me("invalid",r)}yc(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Di(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Di(r.textContent,l,e),o=["children",""+l]):Ps.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Me("scroll",r)}switch(n){case"input":ji(r),Sf(r,s,!0);break;case"textarea":ji(r),jf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=bl)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=im(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[vn]=t,e[Os]=r,T0(e,t,!1,!1),t.stateNode=e;e:{switch(i=vc(n,r),n){case"dialog":Me("cancel",e),Me("close",e),o=r;break;case"iframe":case"object":case"embed":Me("load",e),o=r;break;case"video":case"audio":for(o=0;o<xs.length;o++)Me(xs[o],e);o=r;break;case"source":Me("error",e),o=r;break;case"img":case"image":case"link":Me("error",e),Me("load",e),o=r;break;case"details":Me("toggle",e),o=r;break;case"input":Nf(e,r),o=pc(e,r),Me("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Oe({},r,{value:void 0}),Me("invalid",e);break;case"textarea":kf(e,r),o=gc(e,r),Me("invalid",e);break;default:o=r}yc(n,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?cm(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lm(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ts(e,c):typeof c=="number"&&Ts(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ps.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Me("scroll",e):c!=null&&ju(e,s,c,i))}switch(n){case"input":ji(e),Sf(e,r,!1);break;case"textarea":ji(e),jf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+mr(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ko(e,!!r.multiple,s,!1):r.defaultValue!=null&&ko(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=bl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ft(t),null;case 6:if(e&&t.stateNode!=null)I0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(K(166));if(n=Ir(Hs.current),Ir(_n.current),Ri(t)){if(r=t.stateNode,n=t.memoizedProps,r[vn]=t,(s=r.nodeValue!==n)&&(e=Lt,e!==null))switch(e.tag){case 3:Di(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Di(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=t,t.stateNode=r}return ft(t),null;case 13:if(Ie(Le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&zt!==null&&t.mode&1&&!(t.flags&128))Qm(),Lo(),t.flags|=98560,s=!1;else if(s=Ri(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(K(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[vn]=t}else Lo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ft(t),s=!1}else an!==null&&(qc(an),an=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Qe===0&&(Qe=3):ad())),t.updateQueue!==null&&(t.flags|=4),ft(t),null);case 4:return Oo(),Wc(e,t),e===null&&Ls(t.stateNode.containerInfo),ft(t),null;case 10:return Wu(t.type._context),ft(t),null;case 17:return Mt(t.type)&&_l(),ft(t),null;case 19:if(Ie(Le),s=t.memoizedState,s===null)return ft(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)ss(s,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Pl(e),i!==null){for(t.flags|=128,ss(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ee(Le,Le.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ue()>Ho&&(t.flags|=128,r=!0,ss(s,!1),t.lanes=4194304)}else{if(!r)if(e=Pl(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ss(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!ze)return ft(t),null}else 2*Ue()-s.renderingStartTime>Ho&&n!==1073741824&&(t.flags|=128,r=!0,ss(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ue(),t.sibling=null,n=Le.current,Ee(Le,r?n&1|2:n&1),t):(ft(t),null);case 22:case 23:return ld(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Dt&1073741824&&(ft(t),t.subtreeFlags&6&&(t.flags|=8192)):ft(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function uw(e,t){switch(Hu(t),t.tag){case 1:return Mt(t.type)&&_l(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oo(),Ie(Tt),Ie(gt),Qu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xu(t),null;case 13:if(Ie(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));Lo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Le),null;case 4:return Oo(),null;case 10:return Wu(t.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var Ai=!1,pt=!1,dw=typeof WeakSet=="function"?WeakSet:Set,ne=null;function _o(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function Yc(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var mp=!1;function fw(e,t){if(Pc=yl,e=Lm(),Ou(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var m;f!==n||o!==0&&f.nodeType!==3||(l=i+o),f!==s||r!==0&&f.nodeType!==3||(c=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===n&&++u===o&&(l=i),p===s&&++d===r&&(c=i),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tc={focusedElem:e,selectionRange:n},yl=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,b=g.memoizedState,h=t.stateNode,x=h.getSnapshotBeforeUpdate(t.elementType===t.type?w:on(t.type,w),b);h.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(v){Fe(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return g=mp,mp=!1,g}function js(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&Yc(t,n,s)}o=o.next}while(o!==r)}}function ta(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Kc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function $0(e){var t=e.alternate;t!==null&&(e.alternate=null,$0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vn],delete t[Os],delete t[$c],delete t[Gv],delete t[Xv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function D0(e){return e.tag===5||e.tag===3||e.tag===4}function gp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||D0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=bl));else if(r!==4&&(e=e.child,e!==null))for(Gc(e,t,n),e=e.sibling;e!==null;)Gc(e,t,n),e=e.sibling}function Xc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Xc(e,t,n),e=e.sibling;e!==null;)Xc(e,t,n),e=e.sibling}var st=null,sn=!1;function Yn(e,t,n){for(n=n.child;n!==null;)R0(e,t,n),n=n.sibling}function R0(e,t,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Kl,n)}catch{}switch(n.tag){case 5:pt||_o(n,t);case 6:var r=st,o=sn;st=null,Yn(e,t,n),st=r,sn=o,st!==null&&(sn?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(sn?(e=st,n=n.stateNode,e.nodeType===8?La(e.parentNode,n):e.nodeType===1&&La(e,n),Ds(e)):La(st,n.stateNode));break;case 4:r=st,o=sn,st=n.stateNode.containerInfo,sn=!0,Yn(e,t,n),st=r,sn=o;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&Yc(n,t,i),o=o.next}while(o!==r)}Yn(e,t,n);break;case 1:if(!pt&&(_o(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,t,l)}Yn(e,t,n);break;case 21:Yn(e,t,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,Yn(e,t,n),pt=r):Yn(e,t,n);break;default:Yn(e,t,n)}}function xp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new dw),t.forEach(function(r){var o=bw.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function rn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:st=l.stateNode,sn=!1;break e;case 3:st=l.stateNode.containerInfo,sn=!0;break e;case 4:st=l.stateNode.containerInfo,sn=!0;break e}l=l.return}if(st===null)throw Error(K(160));R0(s,i,o),st=null,sn=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){Fe(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)z0(t,e),t=t.sibling}function z0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rn(t,e),xn(e),r&4){try{js(3,e,e.return),ta(3,e)}catch(w){Fe(e,e.return,w)}try{js(5,e,e.return)}catch(w){Fe(e,e.return,w)}}break;case 1:rn(t,e),xn(e),r&512&&n!==null&&_o(n,n.return);break;case 5:if(rn(t,e),xn(e),r&512&&n!==null&&_o(n,n.return),e.flags&32){var o=e.stateNode;try{Ts(o,"")}catch(w){Fe(e,e.return,w)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&om(o,s),vc(l,i);var u=vc(l,s);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?cm(o,f):d==="dangerouslySetInnerHTML"?lm(o,f):d==="children"?Ts(o,f):ju(o,d,f,u)}switch(l){case"input":hc(o,s);break;case"textarea":sm(o,s);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ko(o,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?ko(o,!!s.multiple,s.defaultValue,!0):ko(o,!!s.multiple,s.multiple?[]:"",!1))}o[Os]=s}catch(w){Fe(e,e.return,w)}}break;case 6:if(rn(t,e),xn(e),r&4){if(e.stateNode===null)throw Error(K(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(w){Fe(e,e.return,w)}}break;case 3:if(rn(t,e),xn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ds(t.containerInfo)}catch(w){Fe(e,e.return,w)}break;case 4:rn(t,e),xn(e);break;case 13:rn(t,e),xn(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(sd=Ue())),r&4&&xp(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(pt=(u=pt)||d,rn(t,e),pt=u):rn(t,e),xn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ne=e,d=e.child;d!==null;){for(f=ne=d;ne!==null;){switch(p=ne,m=p.child,p.tag){case 0:case 11:case 14:case 15:js(4,p,p.return);break;case 1:_o(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(w){Fe(r,n,w)}}break;case 5:_o(p,p.return);break;case 22:if(p.memoizedState!==null){vp(f);continue}}m!==null?(m.return=p,ne=m):vp(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{o=f.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=am("display",i))}catch(w){Fe(e,e.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){Fe(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:rn(t,e),xn(e),r&4&&xp(e);break;case 21:break;default:rn(t,e),xn(e)}}function xn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(D0(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ts(o,""),r.flags&=-33);var s=gp(e);Xc(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=gp(e);Gc(e,l,i);break;default:throw Error(K(161))}}catch(c){Fe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pw(e,t,n){ne=e,L0(e)}function L0(e,t,n){for(var r=(e.mode&1)!==0;ne!==null;){var o=ne,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||Ai;if(!i){var l=o.alternate,c=l!==null&&l.memoizedState!==null||pt;l=Ai;var u=pt;if(Ai=i,(pt=c)&&!u)for(ne=o;ne!==null;)i=ne,c=i.child,i.tag===22&&i.memoizedState!==null?wp(o):c!==null?(c.return=i,ne=c):wp(o);for(;s!==null;)ne=s,L0(s),s=s.sibling;ne=o,Ai=l,pt=u}yp(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,ne=s):yp(e)}}function yp(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pt||ta(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!pt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:on(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&np(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}np(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ds(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}pt||t.flags&512&&Kc(t)}catch(p){Fe(t,t.return,p)}}if(t===e){ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,ne=n;break}ne=t.return}}function vp(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ne=n;break}ne=t.return}}function wp(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ta(4,t)}catch(c){Fe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){Fe(t,o,c)}}var s=t.return;try{Kc(t)}catch(c){Fe(t,s,c)}break;case 5:var i=t.return;try{Kc(t)}catch(c){Fe(t,i,c)}}}catch(c){Fe(t,t.return,c)}if(t===e){ne=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ne=l;break}ne=t.return}}var hw=Math.ceil,Il=Bn.ReactCurrentDispatcher,rd=Bn.ReactCurrentOwner,Xt=Bn.ReactCurrentBatchConfig,ve=0,nt=null,We=null,it=0,Dt=0,No=vr(0),Qe=0,Ws=null,Wr=0,na=0,od=0,Es=null,Et=null,sd=0,Ho=1/0,En=null,$l=!1,Qc=null,ur=null,Oi=!1,rr=null,Dl=0,Cs=0,Jc=null,il=-1,ll=0;function wt(){return ve&6?Ue():il!==-1?il:il=Ue()}function dr(e){return e.mode&1?ve&2&&it!==0?it&-it:Jv.transition!==null?(ll===0&&(ll=bm()),ll):(e=Se,e!==0||(e=window.event,e=e===void 0?16:Cm(e.type)),e):1}function dn(e,t,n,r){if(50<Cs)throw Cs=0,Jc=null,Error(K(185));ri(e,n,r),(!(ve&2)||e!==nt)&&(e===nt&&(!(ve&2)&&(na|=n),Qe===4&&er(e,it)),It(e,r),n===1&&ve===0&&!(t.mode&1)&&(Ho=Ue()+500,Zl&&wr()))}function It(e,t){var n=e.callbackNode;Jy(e,t);var r=xl(e,e===nt?it:0);if(r===0)n!==null&&Pf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Pf(n),t===1)e.tag===0?Qv(bp.bind(null,e)):Km(bp.bind(null,e)),Yv(function(){!(ve&6)&&wr()}),n=null;else{switch(_m(r)){case 1:n=Mu;break;case 4:n=vm;break;case 16:n=gl;break;case 536870912:n=wm;break;default:n=gl}n=W0(n,A0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function A0(e,t){if(il=-1,ll=0,ve&6)throw Error(K(327));var n=e.callbackNode;if(To()&&e.callbackNode!==n)return null;var r=xl(e,e===nt?it:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Rl(e,r);else{t=r;var o=ve;ve|=2;var s=F0();(nt!==e||it!==t)&&(En=null,Ho=Ue()+500,Lr(e,t));do try{xw();break}catch(l){O0(e,l)}while(!0);Vu(),Il.current=s,ve=o,We!==null?t=0:(nt=null,it=0,t=Qe)}if(t!==0){if(t===2&&(o=Sc(e),o!==0&&(r=o,t=Zc(e,o))),t===1)throw n=Ws,Lr(e,0),er(e,r),It(e,Ue()),n;if(t===6)er(e,r);else{if(o=e.current.alternate,!(r&30)&&!mw(o)&&(t=Rl(e,r),t===2&&(s=Sc(e),s!==0&&(r=s,t=Zc(e,s))),t===1))throw n=Ws,Lr(e,0),er(e,r),It(e,Ue()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(K(345));case 2:Cr(e,Et,En);break;case 3:if(er(e,r),(r&130023424)===r&&(t=sd+500-Ue(),10<t)){if(xl(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){wt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ic(Cr.bind(null,e,Et,En),t);break}Cr(e,Et,En);break;case 4:if(er(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-un(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hw(r/1960))-r,10<r){e.timeoutHandle=Ic(Cr.bind(null,e,Et,En),r);break}Cr(e,Et,En);break;case 5:Cr(e,Et,En);break;default:throw Error(K(329))}}}return It(e,Ue()),e.callbackNode===n?A0.bind(null,e):null}function Zc(e,t){var n=Es;return e.current.memoizedState.isDehydrated&&(Lr(e,t).flags|=256),e=Rl(e,t),e!==2&&(t=Et,Et=n,t!==null&&qc(t)),e}function qc(e){Et===null?Et=e:Et.push.apply(Et,e)}function mw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!pn(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function er(e,t){for(t&=~od,t&=~na,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-un(t),r=1<<n;e[n]=-1,t&=~r}}function bp(e){if(ve&6)throw Error(K(327));To();var t=xl(e,0);if(!(t&1))return It(e,Ue()),null;var n=Rl(e,t);if(e.tag!==0&&n===2){var r=Sc(e);r!==0&&(t=r,n=Zc(e,r))}if(n===1)throw n=Ws,Lr(e,0),er(e,t),It(e,Ue()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cr(e,Et,En),It(e,Ue()),null}function id(e,t){var n=ve;ve|=1;try{return e(t)}finally{ve=n,ve===0&&(Ho=Ue()+500,Zl&&wr())}}function Yr(e){rr!==null&&rr.tag===0&&!(ve&6)&&To();var t=ve;ve|=1;var n=Xt.transition,r=Se;try{if(Xt.transition=null,Se=1,e)return e()}finally{Se=r,Xt.transition=n,ve=t,!(ve&6)&&wr()}}function ld(){Dt=No.current,Ie(No)}function Lr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Wv(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Hu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_l();break;case 3:Oo(),Ie(Tt),Ie(gt),Qu();break;case 5:Xu(r);break;case 4:Oo();break;case 13:Ie(Le);break;case 19:Ie(Le);break;case 10:Wu(r.type._context);break;case 22:case 23:ld()}n=n.return}if(nt=e,We=e=fr(e.current,null),it=Dt=t,Qe=0,Ws=null,od=na=Wr=0,Et=Es=null,Mr!==null){for(t=0;t<Mr.length;t++)if(n=Mr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Mr=null}return e}function O0(e,t){do{var n=We;try{if(Vu(),rl.current=Ml,Tl){for(var r=Ae.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Tl=!1}if(Vr=0,tt=Xe=Ae=null,ks=!1,Bs=0,rd.current=null,n===null||n.return===null){Qe=1,Ws=t,We=null;break}e:{var s=e,i=n.return,l=n,c=t;if(t=it,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=ap(i);if(m!==null){m.flags&=-257,cp(m,i,l,s,t),m.mode&1&&lp(s,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var w=new Set;w.add(c),t.updateQueue=w}else g.add(c);break e}else{if(!(t&1)){lp(s,u,t),ad();break e}c=Error(K(426))}}else if(ze&&l.mode&1){var b=ap(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),cp(b,i,l,s,t),Bu(Fo(c,l));break e}}s=c=Fo(c,l),Qe!==4&&(Qe=2),Es===null?Es=[s]:Es.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var h=_0(s,c,t);tp(s,h);break e;case 1:l=c;var x=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ur===null||!ur.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var v=N0(s,l,t);tp(s,v);break e}}s=s.return}while(s!==null)}B0(n)}catch(k){t=k,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function F0(){var e=Il.current;return Il.current=Ml,e===null?Ml:e}function ad(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),nt===null||!(Wr&268435455)&&!(na&268435455)||er(nt,it)}function Rl(e,t){var n=ve;ve|=2;var r=F0();(nt!==e||it!==t)&&(En=null,Lr(e,t));do try{gw();break}catch(o){O0(e,o)}while(!0);if(Vu(),ve=n,Il.current=r,We!==null)throw Error(K(261));return nt=null,it=0,Qe}function gw(){for(;We!==null;)H0(We)}function xw(){for(;We!==null&&!By();)H0(We)}function H0(e){var t=V0(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?B0(e):We=t,rd.current=null}function B0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=uw(n,t),n!==null){n.flags&=32767,We=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,We=null;return}}else if(n=cw(n,t,Dt),n!==null){We=n;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Qe===0&&(Qe=5)}function Cr(e,t,n){var r=Se,o=Xt.transition;try{Xt.transition=null,Se=1,yw(e,t,n,r)}finally{Xt.transition=o,Se=r}return null}function yw(e,t,n,r){do To();while(rr!==null);if(ve&6)throw Error(K(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Zy(e,s),e===nt&&(We=nt=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oi||(Oi=!0,W0(gl,function(){return To(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xt.transition,Xt.transition=null;var i=Se;Se=1;var l=ve;ve|=4,rd.current=null,fw(e,n),z0(n,e),Av(Tc),yl=!!Pc,Tc=Pc=null,e.current=n,pw(n),Uy(),ve=l,Se=i,Xt.transition=s}else e.current=n;if(Oi&&(Oi=!1,rr=e,Dl=o),s=e.pendingLanes,s===0&&(ur=null),Yy(n.stateNode),It(e,Ue()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if($l)throw $l=!1,e=Qc,Qc=null,e;return Dl&1&&e.tag!==0&&To(),s=e.pendingLanes,s&1?e===Jc?Cs++:(Cs=0,Jc=e):Cs=0,wr(),null}function To(){if(rr!==null){var e=_m(Dl),t=Xt.transition,n=Se;try{if(Xt.transition=null,Se=16>e?16:e,rr===null)var r=!1;else{if(e=rr,rr=null,Dl=0,ve&6)throw Error(K(331));var o=ve;for(ve|=4,ne=e.current;ne!==null;){var s=ne,i=s.child;if(ne.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ne=u;ne!==null;){var d=ne;switch(d.tag){case 0:case 11:case 15:js(8,d,s)}var f=d.child;if(f!==null)f.return=d,ne=f;else for(;ne!==null;){d=ne;var p=d.sibling,m=d.return;if($0(d),d===u){ne=null;break}if(p!==null){p.return=m,ne=p;break}ne=m}}}var g=s.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}ne=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,ne=i;else e:for(;ne!==null;){if(s=ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:js(9,s,s.return)}var h=s.sibling;if(h!==null){h.return=s.return,ne=h;break e}ne=s.return}}var x=e.current;for(ne=x;ne!==null;){i=ne;var _=i.child;if(i.subtreeFlags&2064&&_!==null)_.return=i,ne=_;else e:for(i=x;ne!==null;){if(l=ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ta(9,l)}}catch(k){Fe(l,l.return,k)}if(l===i){ne=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,ne=v;break e}ne=l.return}}if(ve=o,wr(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Kl,e)}catch{}r=!0}return r}finally{Se=n,Xt.transition=t}}return!1}function _p(e,t,n){t=Fo(n,t),t=_0(e,t,1),e=cr(e,t,1),t=wt(),e!==null&&(ri(e,1,t),It(e,t))}function Fe(e,t,n){if(e.tag===3)_p(e,e,n);else for(;t!==null;){if(t.tag===3){_p(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ur===null||!ur.has(r))){e=Fo(n,e),e=N0(t,e,1),t=cr(t,e,1),e=wt(),t!==null&&(ri(t,1,e),It(t,e));break}}t=t.return}}function vw(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=wt(),e.pingedLanes|=e.suspendedLanes&n,nt===e&&(it&n)===n&&(Qe===4||Qe===3&&(it&130023424)===it&&500>Ue()-sd?Lr(e,0):od|=n),It(e,t)}function U0(e,t){t===0&&(e.mode&1?(t=Pi,Pi<<=1,!(Pi&130023424)&&(Pi=4194304)):t=1);var n=wt();e=An(e,t),e!==null&&(ri(e,t,n),It(e,n))}function ww(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),U0(e,n)}function bw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(t),U0(e,n)}var V0;V0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tt.current)Ct=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ct=!1,aw(e,t,n);Ct=!!(e.flags&131072)}else Ct=!1,ze&&t.flags&1048576&&Gm(t,kl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;sl(e,t),e=t.pendingProps;var o=zo(t,gt.current);Po(t,n),o=Zu(null,t,r,e,o,n);var s=qu();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mt(r)?(s=!0,Nl(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ku(t),o.updater=ea,t.stateNode=o,o._reactInternals=t,Oc(t,r,e,n),t=Bc(null,t,r,!0,s,n)):(t.tag=0,ze&&s&&Fu(t),vt(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(sl(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Nw(r),e=on(r,e),o){case 0:t=Hc(null,t,r,e,n);break e;case 1:t=fp(null,t,r,e,n);break e;case 11:t=up(null,t,r,e,n);break e;case 14:t=dp(null,t,r,on(r.type,e),n);break e}throw Error(K(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:on(r,o),Hc(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:on(r,o),fp(e,t,r,o,n);case 3:e:{if(E0(t),e===null)throw Error(K(387));r=t.pendingProps,s=t.memoizedState,o=s.element,e0(e,t),Cl(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Fo(Error(K(423)),t),t=pp(e,t,r,n,o);break e}else if(r!==o){o=Fo(Error(K(424)),t),t=pp(e,t,r,n,o);break e}else for(zt=ar(t.stateNode.containerInfo.firstChild),Lt=t,ze=!0,an=null,n=Zm(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lo(),r===o){t=On(e,t,n);break e}vt(e,t,r,n)}t=t.child}return t;case 5:return t0(t),e===null&&zc(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,Mc(r,o)?i=null:s!==null&&Mc(r,s)&&(t.flags|=32),j0(e,t),vt(e,t,i,n),t.child;case 6:return e===null&&zc(t),null;case 13:return C0(e,t,n);case 4:return Gu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ao(t,null,r,n):vt(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:on(r,o),up(e,t,r,o,n);case 7:return vt(e,t,t.pendingProps,n),t.child;case 8:return vt(e,t,t.pendingProps.children,n),t.child;case 12:return vt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,Ee(jl,r._currentValue),r._currentValue=i,s!==null)if(pn(s.value,i)){if(s.children===o.children&&!Tt.current){t=On(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=In(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Lc(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(K(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Lc(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}vt(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Po(t,n),o=Qt(o),r=r(o),t.flags|=1,vt(e,t,r,n),t.child;case 14:return r=t.type,o=on(r,t.pendingProps),o=on(r.type,o),dp(e,t,r,o,n);case 15:return S0(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:on(r,o),sl(e,t),t.tag=1,Mt(r)?(e=!0,Nl(t)):e=!1,Po(t,n),b0(t,r,o),Oc(t,r,o,n),Bc(null,t,r,!0,e,n);case 19:return P0(e,t,n);case 22:return k0(e,t,n)}throw Error(K(156,t.tag))};function W0(e,t){return ym(e,t)}function _w(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,t,n,r){return new _w(e,t,n,r)}function cd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nw(e){if(typeof e=="function")return cd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cu)return 11;if(e===Pu)return 14}return 2}function fr(e,t){var n=e.alternate;return n===null?(n=Kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function al(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")cd(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case po:return Ar(n.children,o,s,t);case Eu:i=8,o|=8;break;case cc:return e=Kt(12,n,t,o|2),e.elementType=cc,e.lanes=s,e;case uc:return e=Kt(13,n,t,o),e.elementType=uc,e.lanes=s,e;case dc:return e=Kt(19,n,t,o),e.elementType=dc,e.lanes=s,e;case tm:return ra(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qh:i=10;break e;case em:i=9;break e;case Cu:i=11;break e;case Pu:i=14;break e;case Xn:i=16,r=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Kt(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function Ar(e,t,n,r){return e=Kt(7,e,r,t),e.lanes=n,e}function ra(e,t,n,r){return e=Kt(22,e,r,t),e.elementType=tm,e.lanes=n,e.stateNode={isHidden:!1},e}function Wa(e,t,n){return e=Kt(6,e,null,t),e.lanes=n,e}function Ya(e,t,n){return t=Kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Sw(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ja(0),this.expirationTimes=ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ja(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ud(e,t,n,r,o,s,i,l,c){return e=new Sw(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Kt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ku(s),e}function kw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Y0(e){if(!e)return gr;e=e._reactInternals;e:{if(Jr(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(Mt(n))return Ym(e,n,t)}return t}function K0(e,t,n,r,o,s,i,l,c){return e=ud(n,r,!0,e,o,s,i,l,c),e.context=Y0(null),n=e.current,r=wt(),o=dr(n),s=In(r,o),s.callback=t??null,cr(n,s,o),e.current.lanes=o,ri(e,o,r),It(e,r),e}function oa(e,t,n,r){var o=t.current,s=wt(),i=dr(o);return n=Y0(n),t.context===null?t.context=n:t.pendingContext=n,t=In(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=cr(o,t,i),e!==null&&(dn(e,o,i,s),nl(e,o,i)),i}function zl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Np(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function dd(e,t){Np(e,t),(e=e.alternate)&&Np(e,t)}function jw(){return null}var G0=typeof reportError=="function"?reportError:function(e){console.error(e)};function fd(e){this._internalRoot=e}sa.prototype.render=fd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));oa(e,t,null,null)};sa.prototype.unmount=fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yr(function(){oa(null,e,null,null)}),t[Ln]=null}};function sa(e){this._internalRoot=e}sa.prototype.unstable_scheduleHydration=function(e){if(e){var t=km();e={blockedOn:null,target:e,priority:t};for(var n=0;n<qn.length&&t!==0&&t<qn[n].priority;n++);qn.splice(n,0,e),n===0&&Em(e)}};function pd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ia(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Sp(){}function Ew(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var u=zl(i);s.call(u)}}var i=K0(t,r,e,0,null,!1,!1,"",Sp);return e._reactRootContainer=i,e[Ln]=i.current,Ls(e.nodeType===8?e.parentNode:e),Yr(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var u=zl(c);l.call(u)}}var c=ud(e,0,!1,null,null,!1,!1,"",Sp);return e._reactRootContainer=c,e[Ln]=c.current,Ls(e.nodeType===8?e.parentNode:e),Yr(function(){oa(t,c,n,r)}),c}function la(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var l=o;o=function(){var c=zl(i);l.call(c)}}oa(t,i,e,o)}else i=Ew(n,t,e,o,r);return zl(i)}Nm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gs(t.pendingLanes);n!==0&&(Iu(t,n|1),It(t,Ue()),!(ve&6)&&(Ho=Ue()+500,wr()))}break;case 13:Yr(function(){var r=An(e,1);if(r!==null){var o=wt();dn(r,e,1,o)}}),dd(e,1)}};$u=function(e){if(e.tag===13){var t=An(e,134217728);if(t!==null){var n=wt();dn(t,e,134217728,n)}dd(e,134217728)}};Sm=function(e){if(e.tag===13){var t=dr(e),n=An(e,t);if(n!==null){var r=wt();dn(n,e,t,r)}dd(e,t)}};km=function(){return Se};jm=function(e,t){var n=Se;try{return Se=e,t()}finally{Se=n}};bc=function(e,t,n){switch(t){case"input":if(hc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Jl(r);if(!o)throw Error(K(90));rm(r),hc(r,o)}}}break;case"textarea":sm(e,n);break;case"select":t=n.value,t!=null&&ko(e,!!n.multiple,t,!1)}};fm=id;pm=Yr;var Cw={usingClientEntryPoint:!1,Events:[si,xo,Jl,um,dm,id]},is={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pw={bundleType:is.bundleType,version:is.version,rendererPackageName:is.rendererPackageName,rendererConfig:is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gm(e),e===null?null:e.stateNode},findFiberByHostInstance:is.findFiberByHostInstance||jw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fi.isDisabled&&Fi.supportsFiber)try{Kl=Fi.inject(Pw),bn=Fi}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cw;Ft.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pd(t))throw Error(K(200));return kw(e,t,null,n)};Ft.createRoot=function(e,t){if(!pd(e))throw Error(K(299));var n=!1,r="",o=G0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=ud(e,1,!1,null,null,n,!1,r,o),e[Ln]=t.current,Ls(e.nodeType===8?e.parentNode:e),new fd(t)};Ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=gm(t),e=e===null?null:e.stateNode,e};Ft.flushSync=function(e){return Yr(e)};Ft.hydrate=function(e,t,n){if(!ia(t))throw Error(K(200));return la(null,e,t,!0,n)};Ft.hydrateRoot=function(e,t,n){if(!pd(e))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=G0;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=K0(t,null,e,1,n??null,o,!1,s,i),e[Ln]=t.current,Ls(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new sa(t)};Ft.render=function(e,t,n){if(!ia(t))throw Error(K(200));return la(null,e,t,!1,n)};Ft.unmountComponentAtNode=function(e){if(!ia(e))throw Error(K(40));return e._reactRootContainer?(Yr(function(){la(null,null,e,!1,function(){e._reactRootContainer=null,e[Ln]=null})}),!0):!1};Ft.unstable_batchedUpdates=id;Ft.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ia(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return la(e,t,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function X0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X0)}catch(e){console.error(e)}}X0(),Xh.exports=Ft;var Q0=Xh.exports,kp=Q0;lc.createRoot=kp.createRoot,lc.hydrateRoot=kp.hydrateRoot;function at(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=at(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var J0={exports:{}},Z0={},q0={exports:{}},eg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bo=y;function Tw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mw=typeof Object.is=="function"?Object.is:Tw,Iw=Bo.useState,$w=Bo.useEffect,Dw=Bo.useLayoutEffect,Rw=Bo.useDebugValue;function zw(e,t){var n=t(),r=Iw({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return Dw(function(){o.value=n,o.getSnapshot=t,Ka(o)&&s({inst:o})},[e,n,t]),$w(function(){return Ka(o)&&s({inst:o}),e(function(){Ka(o)&&s({inst:o})})},[e]),Rw(n),n}function Ka(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mw(e,n)}catch{return!0}}function Lw(e,t){return t()}var Aw=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Lw:zw;eg.useSyncExternalStore=Bo.useSyncExternalStore!==void 0?Bo.useSyncExternalStore:Aw;q0.exports=eg;var Ow=q0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=y,Fw=Ow;function Hw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bw=typeof Object.is=="function"?Object.is:Hw,Uw=Fw.useSyncExternalStore,Vw=aa.useRef,Ww=aa.useEffect,Yw=aa.useMemo,Kw=aa.useDebugValue;Z0.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=Vw(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=Yw(function(){function c(m){if(!u){if(u=!0,d=m,m=r(m),o!==void 0&&i.hasValue){var g=i.value;if(o(g,m))return f=g}return f=m}if(g=f,Bw(d,m))return g;var w=r(m);return o!==void 0&&o(g,w)?(d=m,g):(d=m,f=w)}var u=!1,d,f,p=n===void 0?null:n;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,n,r,o]);var l=Uw(e,s[0],s[1]);return Ww(function(){i.hasValue=!0,i.value=l},[l]),Kw(l),l};J0.exports=Z0;var Gw=J0.exports;const tg=Lh(Gw),Xw={},jp=e=>{let t;const n=new Set,r=(d,f)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const m=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(g=>g(t,m))}},o=()=>t,c={setState:r,getState:o,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(Xw?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,c);return c},ng=e=>e?jp(e):jp,{useDebugValue:Qw}=O,{useSyncExternalStoreWithSelector:Jw}=tg,Zw=e=>e;function rg(e,t=Zw,n){const r=Jw(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Qw(r),r}const Ep=(e,t)=>{const n=ng(e),r=(o,s=t)=>rg(n,o,s);return Object.assign(r,n),r},qw=(e,t)=>e?Ep(e,t):Ep;function rt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var e1={value:()=>{}};function ca(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new cl(n)}function cl(e){this._=e}function t1(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}cl.prototype=ca.prototype={constructor:cl,on:function(e,t){var n=this._,r=t1(e+"",n),o,s=-1,i=r.length;if(arguments.length<2){for(;++s<i;)if((o=(e=r[s]).type)&&(o=n1(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(o=(e=r[s]).type)n[o]=Cp(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Cp(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new cl(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,s;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,o=s.length;r<o;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)}};function n1(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Cp(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=e1,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var eu="http://www.w3.org/1999/xhtml";const Pp={svg:"http://www.w3.org/2000/svg",xhtml:eu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ua(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Pp.hasOwnProperty(t)?{space:Pp[t],local:e}:e}function r1(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===eu&&t.documentElement.namespaceURI===eu?t.createElement(e):t.createElementNS(n,e)}}function o1(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function og(e){var t=ua(e);return(t.local?o1:r1)(t)}function s1(){}function hd(e){return e==null?s1:function(){return this.querySelector(e)}}function i1(e){typeof e!="function"&&(e=hd(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=new Array(i),c,u,d=0;d<i;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new Ot(r,this._parents)}function l1(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function a1(){return[]}function sg(e){return e==null?a1:function(){return this.querySelectorAll(e)}}function c1(e){return function(){return l1(e.apply(this,arguments))}}function u1(e){typeof e=="function"?e=c1(e):e=sg(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var i=t[s],l=i.length,c,u=0;u<l;++u)(c=i[u])&&(r.push(e.call(c,c.__data__,u,i)),o.push(c));return new Ot(r,o)}function ig(e){return function(){return this.matches(e)}}function lg(e){return function(t){return t.matches(e)}}var d1=Array.prototype.find;function f1(e){return function(){return d1.call(this.children,e)}}function p1(){return this.firstElementChild}function h1(e){return this.select(e==null?p1:f1(typeof e=="function"?e:lg(e)))}var m1=Array.prototype.filter;function g1(){return Array.from(this.children)}function x1(e){return function(){return m1.call(this.children,e)}}function y1(e){return this.selectAll(e==null?g1:x1(typeof e=="function"?e:lg(e)))}function v1(e){typeof e!="function"&&(e=ig(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new Ot(r,this._parents)}function ag(e){return new Array(e.length)}function w1(){return new Ot(this._enter||this._groups.map(ag),this._parents)}function Ll(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ll.prototype={constructor:Ll,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function b1(e){return function(){return e}}function _1(e,t,n,r,o,s){for(var i=0,l,c=t.length,u=s.length;i<u;++i)(l=t[i])?(l.__data__=s[i],r[i]=l):n[i]=new Ll(e,s[i]);for(;i<c;++i)(l=t[i])&&(o[i]=l)}function N1(e,t,n,r,o,s,i){var l,c,u=new Map,d=t.length,f=s.length,p=new Array(d),m;for(l=0;l<d;++l)(c=t[l])&&(p[l]=m=i.call(c,c.__data__,l,t)+"",u.has(m)?o[l]=c:u.set(m,c));for(l=0;l<f;++l)m=i.call(e,s[l],l,s)+"",(c=u.get(m))?(r[l]=c,c.__data__=s[l],u.delete(m)):n[l]=new Ll(e,s[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(p[l])===c&&(o[l]=c)}function S1(e){return e.__data__}function k1(e,t){if(!arguments.length)return Array.from(this,S1);var n=t?N1:_1,r=this._parents,o=this._groups;typeof e!="function"&&(e=b1(e));for(var s=o.length,i=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=r[u],f=o[u],p=f.length,m=j1(e.call(d,d&&d.__data__,u,r)),g=m.length,w=l[u]=new Array(g),b=i[u]=new Array(g),h=c[u]=new Array(p);n(d,f,w,b,h,m,t);for(var x=0,_=0,v,k;x<g;++x)if(v=w[x]){for(x>=_&&(_=x+1);!(k=b[_])&&++_<g;);v._next=k||null}}return i=new Ot(i,r),i._enter=l,i._exit=c,i}function j1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function E1(){return new Ot(this._exit||this._groups.map(ag),this._parents)}function C1(e,t,n){var r=this.enter(),o=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),r&&o?r.merge(o).order():o}function P1(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,s=r.length,i=Math.min(o,s),l=new Array(o),c=0;c<i;++c)for(var u=n[c],d=r[c],f=u.length,p=l[c]=new Array(f),m,g=0;g<f;++g)(m=u[g]||d[g])&&(p[g]=m);for(;c<o;++c)l[c]=n[c];return new Ot(l,this._parents)}function T1(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,s=r[o],i;--o>=0;)(i=r[o])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function M1(e){e||(e=I1);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var i=n[s],l=i.length,c=o[s]=new Array(l),u,d=0;d<l;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new Ot(o,this._parents).order()}function I1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $1(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function D1(){return Array.from(this)}function R1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length;o<s;++o){var i=r[o];if(i)return i}return null}function z1(){let e=0;for(const t of this)++e;return e}function L1(){return!this.node()}function A1(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],s=0,i=o.length,l;s<i;++s)(l=o[s])&&e.call(l,l.__data__,s,o);return this}function O1(e){return function(){this.removeAttribute(e)}}function F1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function H1(e,t){return function(){this.setAttribute(e,t)}}function B1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function U1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function V1(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function W1(e,t){var n=ua(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?F1:O1:typeof t=="function"?n.local?V1:U1:n.local?B1:H1)(n,t))}function cg(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Y1(e){return function(){this.style.removeProperty(e)}}function K1(e,t,n){return function(){this.style.setProperty(e,t,n)}}function G1(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function X1(e,t,n){return arguments.length>1?this.each((t==null?Y1:typeof t=="function"?G1:K1)(e,t,n??"")):Uo(this.node(),e)}function Uo(e,t){return e.style.getPropertyValue(t)||cg(e).getComputedStyle(e,null).getPropertyValue(t)}function Q1(e){return function(){delete this[e]}}function J1(e,t){return function(){this[e]=t}}function Z1(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function q1(e,t){return arguments.length>1?this.each((t==null?Q1:typeof t=="function"?Z1:J1)(e,t)):this.node()[e]}function ug(e){return e.trim().split(/^|\s+/)}function md(e){return e.classList||new dg(e)}function dg(e){this._node=e,this._names=ug(e.getAttribute("class")||"")}dg.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function fg(e,t){for(var n=md(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function pg(e,t){for(var n=md(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function eb(e){return function(){fg(this,e)}}function tb(e){return function(){pg(this,e)}}function nb(e,t){return function(){(t.apply(this,arguments)?fg:pg)(this,e)}}function rb(e,t){var n=ug(e+"");if(arguments.length<2){for(var r=md(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?nb:t?eb:tb)(n,t))}function ob(){this.textContent=""}function sb(e){return function(){this.textContent=e}}function ib(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lb(e){return arguments.length?this.each(e==null?ob:(typeof e=="function"?ib:sb)(e)):this.node().textContent}function ab(){this.innerHTML=""}function cb(e){return function(){this.innerHTML=e}}function ub(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function db(e){return arguments.length?this.each(e==null?ab:(typeof e=="function"?ub:cb)(e)):this.node().innerHTML}function fb(){this.nextSibling&&this.parentNode.appendChild(this)}function pb(){return this.each(fb)}function hb(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mb(){return this.each(hb)}function gb(e){var t=typeof e=="function"?e:og(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function xb(){return null}function yb(e,t){var n=typeof e=="function"?e:og(e),r=t==null?xb:typeof t=="function"?t:hd(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function vb(){var e=this.parentNode;e&&e.removeChild(this)}function wb(){return this.each(vb)}function bb(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _b(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Nb(e){return this.select(e?_b:bb)}function Sb(e){return arguments.length?this.property("__data__",e):this.node().__data__}function kb(e){return function(t){e.call(this,t,this.__data__)}}function jb(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Eb(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Cb(e,t,n){return function(){var r=this.__on,o,s=kb(t);if(r){for(var i=0,l=r.length;i<l;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(o):this.__on=[o]}}function Pb(e,t,n){var r=jb(e+""),o,s=r.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(o=0,d=l[c];o<s;++o)if((i=r[o]).type===d.type&&i.name===d.name)return d.value}return}for(l=t?Cb:Eb,o=0;o<s;++o)this.each(l(r[o],t,n));return this}function hg(e,t,n){var r=cg(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Tb(e,t){return function(){return hg(this,e,t)}}function Mb(e,t){return function(){return hg(this,e,t.apply(this,arguments))}}function Ib(e,t){return this.each((typeof t=="function"?Mb:Tb)(e,t))}function*$b(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length,i;o<s;++o)(i=r[o])&&(yield i)}var mg=[null];function Ot(e,t){this._groups=e,this._parents=t}function li(){return new Ot([[document.documentElement]],mg)}function Db(){return this}Ot.prototype=li.prototype={constructor:Ot,select:i1,selectAll:u1,selectChild:h1,selectChildren:y1,filter:v1,data:k1,enter:w1,exit:E1,join:C1,merge:P1,selection:Db,order:T1,sort:M1,call:$1,nodes:D1,node:R1,size:z1,empty:L1,each:A1,attr:W1,style:X1,property:q1,classed:rb,text:lb,html:db,raise:pb,lower:mb,append:gb,insert:yb,remove:wb,clone:Nb,datum:Sb,on:Pb,dispatch:Ib,[Symbol.iterator]:$b};function Yt(e){return typeof e=="string"?new Ot([[document.querySelector(e)]],[document.documentElement]):new Ot([[e]],mg)}function Rb(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ln(e,t){if(e=Rb(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const zb={passive:!1},Ys={capture:!0,passive:!1};function Ga(e){e.stopImmediatePropagation()}function Mo(e){e.preventDefault(),e.stopImmediatePropagation()}function gg(e){var t=e.document.documentElement,n=Yt(e).on("dragstart.drag",Mo,Ys);"onselectstart"in t?n.on("selectstart.drag",Mo,Ys):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function xg(e,t){var n=e.document.documentElement,r=Yt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Mo,Ys),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Hi=e=>()=>e;function tu(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:i,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}tu.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Lb(e){return!e.ctrlKey&&!e.button}function Ab(){return this.parentNode}function Ob(e,t){return t??{x:e.x,y:e.y}}function Fb(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hb(){var e=Lb,t=Ab,n=Ob,r=Fb,o={},s=ca("start","drag","end"),i=0,l,c,u,d,f=0;function p(v){v.on("mousedown.drag",m).filter(r).on("touchstart.drag",b).on("touchmove.drag",h,zb).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(v,k){if(!(d||!e.call(this,v,k))){var E=_(this,t.call(this,v,k),v,k,"mouse");E&&(Yt(v.view).on("mousemove.drag",g,Ys).on("mouseup.drag",w,Ys),gg(v.view),Ga(v),u=!1,l=v.clientX,c=v.clientY,E("start",v))}}function g(v){if(Mo(v),!u){var k=v.clientX-l,E=v.clientY-c;u=k*k+E*E>f}o.mouse("drag",v)}function w(v){Yt(v.view).on("mousemove.drag mouseup.drag",null),xg(v.view,u),Mo(v),o.mouse("end",v)}function b(v,k){if(e.call(this,v,k)){var E=v.changedTouches,T=t.call(this,v,k),$=E.length,R,C;for(R=0;R<$;++R)(C=_(this,T,v,k,E[R].identifier,E[R]))&&(Ga(v),C("start",v,E[R]))}}function h(v){var k=v.changedTouches,E=k.length,T,$;for(T=0;T<E;++T)($=o[k[T].identifier])&&(Mo(v),$("drag",v,k[T]))}function x(v){var k=v.changedTouches,E=k.length,T,$;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),T=0;T<E;++T)($=o[k[T].identifier])&&(Ga(v),$("end",v,k[T]))}function _(v,k,E,T,$,R){var C=s.copy(),L=ln(R||E,k),W,U,S;if((S=n.call(v,new tu("beforestart",{sourceEvent:E,target:p,identifier:$,active:i,x:L[0],y:L[1],dx:0,dy:0,dispatch:C}),T))!=null)return W=S.x-L[0]||0,U=S.y-L[1]||0,function z(P,H,M){var j=L,D;switch(P){case"start":o[$]=z,D=i++;break;case"end":delete o[$],--i;case"drag":L=ln(M||H,k),D=i;break}C.call(P,v,new tu(P,{sourceEvent:H,subject:S,target:p,identifier:$,active:D,x:L[0]+W,y:L[1]+U,dx:L[0]-j[0],dy:L[1]-j[1],dispatch:C}),T)}}return p.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Hi(!!v),p):e},p.container=function(v){return arguments.length?(t=typeof v=="function"?v:Hi(v),p):t},p.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Hi(v),p):n},p.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Hi(!!v),p):r},p.on=function(){var v=s.on.apply(s,arguments);return v===s?p:v},p.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,p):Math.sqrt(f)},p}function gd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function yg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ai(){}var Ks=.7,Al=1/Ks,Io="\\s*([+-]?\\d+)\\s*",Gs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bb=/^#([0-9a-f]{3,8})$/,Ub=new RegExp(`^rgb\\(${Io},${Io},${Io}\\)$`),Vb=new RegExp(`^rgb\\(${Nn},${Nn},${Nn}\\)$`),Wb=new RegExp(`^rgba\\(${Io},${Io},${Io},${Gs}\\)$`),Yb=new RegExp(`^rgba\\(${Nn},${Nn},${Nn},${Gs}\\)$`),Kb=new RegExp(`^hsl\\(${Gs},${Nn},${Nn}\\)$`),Gb=new RegExp(`^hsla\\(${Gs},${Nn},${Nn},${Gs}\\)$`),Tp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gd(ai,Xs,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Mp,formatHex:Mp,formatHex8:Xb,formatHsl:Qb,formatRgb:Ip,toString:Ip});function Mp(){return this.rgb().formatHex()}function Xb(){return this.rgb().formatHex8()}function Qb(){return vg(this).formatHsl()}function Ip(){return this.rgb().formatRgb()}function Xs(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Bb.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$p(t):n===3?new Pt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ub.exec(e))?new Pt(t[1],t[2],t[3],1):(t=Vb.exec(e))?new Pt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Wb.exec(e))?Bi(t[1],t[2],t[3],t[4]):(t=Yb.exec(e))?Bi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Kb.exec(e))?zp(t[1],t[2]/100,t[3]/100,1):(t=Gb.exec(e))?zp(t[1],t[2]/100,t[3]/100,t[4]):Tp.hasOwnProperty(e)?$p(Tp[e]):e==="transparent"?new Pt(NaN,NaN,NaN,0):null}function $p(e){return new Pt(e>>16&255,e>>8&255,e&255,1)}function Bi(e,t,n,r){return r<=0&&(e=t=n=NaN),new Pt(e,t,n,r)}function Jb(e){return e instanceof ai||(e=Xs(e)),e?(e=e.rgb(),new Pt(e.r,e.g,e.b,e.opacity)):new Pt}function nu(e,t,n,r){return arguments.length===1?Jb(e):new Pt(e,t,n,r??1)}function Pt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}gd(Pt,nu,yg(ai,{brighter(e){return e=e==null?Al:Math.pow(Al,e),new Pt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ks:Math.pow(Ks,e),new Pt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pt(Or(this.r),Or(this.g),Or(this.b),Ol(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dp,formatHex:Dp,formatHex8:Zb,formatRgb:Rp,toString:Rp}));function Dp(){return`#${$r(this.r)}${$r(this.g)}${$r(this.b)}`}function Zb(){return`#${$r(this.r)}${$r(this.g)}${$r(this.b)}${$r((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rp(){const e=Ol(this.opacity);return`${e===1?"rgb(":"rgba("}${Or(this.r)}, ${Or(this.g)}, ${Or(this.b)}${e===1?")":`, ${e})`}`}function Ol(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Or(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $r(e){return e=Or(e),(e<16?"0":"")+e.toString(16)}function zp(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new cn(e,t,n,r)}function vg(e){if(e instanceof cn)return new cn(e.h,e.s,e.l,e.opacity);if(e instanceof ai||(e=Xs(e)),!e)return new cn;if(e instanceof cn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),s=Math.max(t,n,r),i=NaN,l=s-o,c=(s+o)/2;return l?(t===s?i=(n-r)/l+(n<r)*6:n===s?i=(r-t)/l+2:i=(t-n)/l+4,l/=c<.5?s+o:2-s-o,i*=60):l=c>0&&c<1?0:i,new cn(i,l,c,e.opacity)}function qb(e,t,n,r){return arguments.length===1?vg(e):new cn(e,t,n,r??1)}function cn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}gd(cn,qb,yg(ai,{brighter(e){return e=e==null?Al:Math.pow(Al,e),new cn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ks:Math.pow(Ks,e),new cn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Pt(Xa(e>=240?e-240:e+120,o,r),Xa(e,o,r),Xa(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new cn(Lp(this.h),Ui(this.s),Ui(this.l),Ol(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ol(this.opacity);return`${e===1?"hsl(":"hsla("}${Lp(this.h)}, ${Ui(this.s)*100}%, ${Ui(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Lp(e){return e=(e||0)%360,e<0?e+360:e}function Ui(e){return Math.max(0,Math.min(1,e||0))}function Xa(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const wg=e=>()=>e;function e_(e,t){return function(n){return e+n*t}}function t_(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function n_(e){return(e=+e)==1?bg:function(t,n){return n-t?t_(t,n,e):wg(isNaN(t)?n:t)}}function bg(e,t){var n=t-e;return n?e_(e,n):wg(isNaN(e)?t:e)}const Ap=function e(t){var n=n_(t);function r(o,s){var i=n((o=nu(o)).r,(s=nu(s)).r),l=n(o.g,s.g),c=n(o.b,s.b),u=bg(o.opacity,s.opacity);return function(d){return o.r=i(d),o.g=l(d),o.b=c(d),o.opacity=u(d),o+""}}return r.gamma=e,r}(1);function Jn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ru=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qa=new RegExp(ru.source,"g");function r_(e){return function(){return e}}function o_(e){return function(t){return e(t)+""}}function s_(e,t){var n=ru.lastIndex=Qa.lastIndex=0,r,o,s,i=-1,l=[],c=[];for(e=e+"",t=t+"";(r=ru.exec(e))&&(o=Qa.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),l[i]?l[i]+=s:l[++i]=s),(r=r[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,c.push({i,x:Jn(r,o)})),n=Qa.lastIndex;return n<t.length&&(s=t.slice(n),l[i]?l[i]+=s:l[++i]=s),l.length<2?c[0]?o_(c[0].x):r_(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}var Op=180/Math.PI,ou={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _g(e,t,n,r,o,s){var i,l,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*Op,skewX:Math.atan(c)*Op,scaleX:i,scaleY:l}}var Vi;function i_(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ou:_g(t.a,t.b,t.c,t.d,t.e,t.f)}function l_(e){return e==null||(Vi||(Vi=document.createElementNS("http://www.w3.org/2000/svg","g")),Vi.setAttribute("transform",e),!(e=Vi.transform.baseVal.consolidate()))?ou:(e=e.matrix,_g(e.a,e.b,e.c,e.d,e.e,e.f))}function Ng(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function s(u,d,f,p,m,g){if(u!==f||d!==p){var w=m.push("translate(",null,t,null,n);g.push({i:w-4,x:Jn(u,f)},{i:w-2,x:Jn(d,p)})}else(f||p)&&m.push("translate("+f+t+p+n)}function i(u,d,f,p){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),p.push({i:f.push(o(f)+"rotate(",null,r)-2,x:Jn(u,d)})):d&&f.push(o(f)+"rotate("+d+r)}function l(u,d,f,p){u!==d?p.push({i:f.push(o(f)+"skewX(",null,r)-2,x:Jn(u,d)}):d&&f.push(o(f)+"skewX("+d+r)}function c(u,d,f,p,m,g){if(u!==f||d!==p){var w=m.push(o(m)+"scale(",null,",",null,")");g.push({i:w-4,x:Jn(u,f)},{i:w-2,x:Jn(d,p)})}else(f!==1||p!==1)&&m.push(o(m)+"scale("+f+","+p+")")}return function(u,d){var f=[],p=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,p),i(u.rotate,d.rotate,f,p),l(u.skewX,d.skewX,f,p),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,p),u=d=null,function(m){for(var g=-1,w=p.length,b;++g<w;)f[(b=p[g]).i]=b.x(m);return f.join("")}}}var a_=Ng(i_,"px, ","px)","deg)"),c_=Ng(l_,", ",")",")"),u_=1e-12;function Fp(e){return((e=Math.exp(e))+1/e)/2}function d_(e){return((e=Math.exp(e))-1/e)/2}function f_(e){return((e=Math.exp(2*e))-1)/(e+1)}const p_=function e(t,n,r){function o(s,i){var l=s[0],c=s[1],u=s[2],d=i[0],f=i[1],p=i[2],m=d-l,g=f-c,w=m*m+g*g,b,h;if(w<u_)h=Math.log(p/u)/t,b=function(T){return[l+T*m,c+T*g,u*Math.exp(t*T*h)]};else{var x=Math.sqrt(w),_=(p*p-u*u+r*w)/(2*u*n*x),v=(p*p-u*u-r*w)/(2*p*n*x),k=Math.log(Math.sqrt(_*_+1)-_),E=Math.log(Math.sqrt(v*v+1)-v);h=(E-k)/t,b=function(T){var $=T*h,R=Fp(k),C=u/(n*x)*(R*f_(t*$+k)-d_(k));return[l+C*m,c+C*g,u*R/Fp(t*$+k)]}}return b.duration=h*1e3*t/Math.SQRT2,b}return o.rho=function(s){var i=Math.max(.001,+s),l=i*i,c=l*l;return e(i,l,c)},o}(Math.SQRT2,2,4);var Vo=0,ys=0,ls=0,Sg=1e3,Fl,vs,Hl=0,Kr=0,da=0,Qs=typeof performance=="object"&&performance.now?performance:Date,kg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xd(){return Kr||(kg(h_),Kr=Qs.now()+da)}function h_(){Kr=0}function Bl(){this._call=this._time=this._next=null}Bl.prototype=jg.prototype={constructor:Bl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?xd():+n)+(t==null?0:+t),!this._next&&vs!==this&&(vs?vs._next=this:Fl=this,vs=this),this._call=e,this._time=n,su()},stop:function(){this._call&&(this._call=null,this._time=1/0,su())}};function jg(e,t,n){var r=new Bl;return r.restart(e,t,n),r}function m_(){xd(),++Vo;for(var e=Fl,t;e;)(t=Kr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Vo}function Hp(){Kr=(Hl=Qs.now())+da,Vo=ys=0;try{m_()}finally{Vo=0,x_(),Kr=0}}function g_(){var e=Qs.now(),t=e-Hl;t>Sg&&(da-=t,Hl=e)}function x_(){for(var e,t=Fl,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Fl=n);vs=e,su(r)}function su(e){if(!Vo){ys&&(ys=clearTimeout(ys));var t=e-Kr;t>24?(e<1/0&&(ys=setTimeout(Hp,e-Qs.now()-da)),ls&&(ls=clearInterval(ls))):(ls||(Hl=Qs.now(),ls=setInterval(g_,Sg)),Vo=1,kg(Hp))}}function Bp(e,t,n){var r=new Bl;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var y_=ca("start","end","cancel","interrupt"),v_=[],Eg=0,Up=1,iu=2,ul=3,Vp=4,lu=5,dl=6;function fa(e,t,n,r,o,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;w_(e,n,{name:t,index:r,group:o,on:y_,tween:v_,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Eg})}function yd(e,t){var n=hn(e,t);if(n.state>Eg)throw new Error("too late; already scheduled");return n}function Sn(e,t){var n=hn(e,t);if(n.state>ul)throw new Error("too late; already running");return n}function hn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function w_(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=jg(s,0,n.time);function s(u){n.state=Up,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,f,p,m;if(n.state!==Up)return c();for(d in r)if(m=r[d],m.name===n.name){if(m.state===ul)return Bp(i);m.state===Vp?(m.state=dl,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[d]):+d<t&&(m.state=dl,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[d])}if(Bp(function(){n.state===ul&&(n.state=Vp,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=iu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===iu){for(n.state=ul,o=new Array(p=n.tween.length),d=0,f=-1;d<p;++d)(m=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=m);o.length=f+1}}function l(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=lu,1),f=-1,p=o.length;++f<p;)o[f].call(e,d);n.state===lu&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=dl,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function fl(e,t){var n=e.__transition,r,o,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){s=!1;continue}o=r.state>iu&&r.state<lu,r.state=dl,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}s&&delete e.__transition}}function b_(e){return this.each(function(){fl(this,e)})}function __(e,t){var n,r;return function(){var o=Sn(this,e),s=o.tween;if(s!==n){r=n=s;for(var i=0,l=r.length;i<l;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function N_(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var s=Sn(this,e),i=s.tween;if(i!==r){o=(r=i).slice();for(var l={name:t,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===t){o[c]=l;break}c===u&&o.push(l)}s.tween=o}}function S_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=hn(this.node(),n).tween,o=0,s=r.length,i;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?__:N_)(n,e,t))}function vd(e,t,n){var r=e._id;return e.each(function(){var o=Sn(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return hn(o,r).value[t]}}function Cg(e,t){var n;return(typeof t=="number"?Jn:t instanceof Xs?Ap:(n=Xs(t))?(t=n,Ap):s_)(e,t)}function k_(e){return function(){this.removeAttribute(e)}}function j_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function E_(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttribute(e);return i===o?null:i===r?s:s=t(r=i,n)}}function C_(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?s:s=t(r=i,n)}}function P_(e,t,n){var r,o,s;return function(){var i,l=n(this),c;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=l+"",i===c?null:i===r&&c===o?s:(o=c,s=t(r=i,l)))}}function T_(e,t,n){var r,o,s;return function(){var i,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=l+"",i===c?null:i===r&&c===o?s:(o=c,s=t(r=i,l)))}}function M_(e,t){var n=ua(e),r=n==="transform"?c_:Cg;return this.attrTween(e,typeof t=="function"?(n.local?T_:P_)(n,r,vd(this,"attr."+e,t)):t==null?(n.local?j_:k_)(n):(n.local?C_:E_)(n,r,t))}function I_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function $_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function D_(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&$_(e,s)),n}return o._value=t,o}function R_(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&I_(e,s)),n}return o._value=t,o}function z_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ua(e);return this.tween(n,(r.local?D_:R_)(r,t))}function L_(e,t){return function(){yd(this,e).delay=+t.apply(this,arguments)}}function A_(e,t){return t=+t,function(){yd(this,e).delay=t}}function O_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?L_:A_)(t,e)):hn(this.node(),t).delay}function F_(e,t){return function(){Sn(this,e).duration=+t.apply(this,arguments)}}function H_(e,t){return t=+t,function(){Sn(this,e).duration=t}}function B_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?F_:H_)(t,e)):hn(this.node(),t).duration}function U_(e,t){if(typeof t!="function")throw new Error;return function(){Sn(this,e).ease=t}}function V_(e){var t=this._id;return arguments.length?this.each(U_(t,e)):hn(this.node(),t).ease}function W_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Sn(this,e).ease=n}}function Y_(e){if(typeof e!="function")throw new Error;return this.each(W_(this._id,e))}function K_(e){typeof e!="function"&&(e=ig(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,l=r[o]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new Fn(r,this._parents,this._name,this._id)}function G_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,s=Math.min(r,o),i=new Array(r),l=0;l<s;++l)for(var c=t[l],u=n[l],d=c.length,f=i[l]=new Array(d),p,m=0;m<d;++m)(p=c[m]||u[m])&&(f[m]=p);for(;l<r;++l)i[l]=t[l];return new Fn(i,this._parents,this._name,this._id)}function X_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Q_(e,t,n){var r,o,s=X_(t)?yd:Sn;return function(){var i=s(this,e),l=i.on;l!==r&&(o=(r=l).copy()).on(t,n),i.on=o}}function J_(e,t){var n=this._id;return arguments.length<2?hn(this.node(),n).on.on(e):this.each(Q_(n,e,t))}function Z_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function q_(){return this.on("end.remove",Z_(this._id))}function eN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hd(e));for(var r=this._groups,o=r.length,s=new Array(o),i=0;i<o;++i)for(var l=r[i],c=l.length,u=s[i]=new Array(c),d,f,p=0;p<c;++p)(d=l[p])&&(f=e.call(d,d.__data__,p,l))&&("__data__"in d&&(f.__data__=d.__data__),u[p]=f,fa(u[p],t,n,p,u,hn(d,n)));return new Fn(s,this._parents,t,n)}function tN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=sg(e));for(var r=this._groups,o=r.length,s=[],i=[],l=0;l<o;++l)for(var c=r[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var p=e.call(d,d.__data__,f,c),m,g=hn(d,n),w=0,b=p.length;w<b;++w)(m=p[w])&&fa(m,t,n,w,p,g);s.push(p),i.push(d)}return new Fn(s,i,t,n)}var nN=li.prototype.constructor;function rN(){return new nN(this._groups,this._parents)}function oN(e,t){var n,r,o;return function(){var s=Uo(this,e),i=(this.style.removeProperty(e),Uo(this,e));return s===i?null:s===n&&i===r?o:o=t(n=s,r=i)}}function Pg(e){return function(){this.style.removeProperty(e)}}function sN(e,t,n){var r,o=n+"",s;return function(){var i=Uo(this,e);return i===o?null:i===r?s:s=t(r=i,n)}}function iN(e,t,n){var r,o,s;return function(){var i=Uo(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Uo(this,e))),i===c?null:i===r&&c===o?s:(o=c,s=t(r=i,l))}}function lN(e,t){var n,r,o,s="style."+t,i="end."+s,l;return function(){var c=Sn(this,e),u=c.on,d=c.value[s]==null?l||(l=Pg(t)):void 0;(u!==n||o!==d)&&(r=(n=u).copy()).on(i,o=d),c.on=r}}function aN(e,t,n){var r=(e+="")=="transform"?a_:Cg;return t==null?this.styleTween(e,oN(e,r)).on("end.style."+e,Pg(e)):typeof t=="function"?this.styleTween(e,iN(e,r,vd(this,"style."+e,t))).each(lN(this._id,e)):this.styleTween(e,sN(e,r,t),n).on("end.style."+e,null)}function cN(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function uN(e,t,n){var r,o;function s(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&cN(e,i,n)),r}return s._value=t,s}function dN(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,uN(e,t,n??""))}function fN(e){return function(){this.textContent=e}}function pN(e){return function(){var t=e(this);this.textContent=t??""}}function hN(e){return this.tween("text",typeof e=="function"?pN(vd(this,"text",e)):fN(e==null?"":e+""))}function mN(e){return function(t){this.textContent=e.call(this,t)}}function gN(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&mN(o)),t}return r._value=e,r}function xN(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,gN(e))}function yN(){for(var e=this._name,t=this._id,n=Tg(),r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],l=i.length,c,u=0;u<l;++u)if(c=i[u]){var d=hn(c,t);fa(c,e,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Fn(r,this._parents,e,n)}function vN(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(s,i){var l={value:i},c={value:function(){--o===0&&s()}};n.each(function(){var u=Sn(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),o===0&&s()})}var wN=0;function Fn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Tg(){return++wN}var jn=li.prototype;Fn.prototype={constructor:Fn,select:eN,selectAll:tN,selectChild:jn.selectChild,selectChildren:jn.selectChildren,filter:K_,merge:G_,selection:rN,transition:yN,call:jn.call,nodes:jn.nodes,node:jn.node,size:jn.size,empty:jn.empty,each:jn.each,on:J_,attr:M_,attrTween:z_,style:aN,styleTween:dN,text:hN,textTween:xN,remove:q_,tween:S_,delay:O_,duration:B_,ease:V_,easeVarying:Y_,end:vN,[Symbol.iterator]:jn[Symbol.iterator]};function bN(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _N={time:null,delay:0,duration:250,ease:bN};function NN(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function SN(e){var t,n;e instanceof Fn?(t=e._id,e=e._name):(t=Tg(),(n=_N).time=xd(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],l=i.length,c,u=0;u<l;++u)(c=i[u])&&fa(c,e,t,u,i,n||NN(c,t));return new Fn(r,this._parents,e,t)}li.prototype.interrupt=b_;li.prototype.transition=SN;const Wi=e=>()=>e;function kN(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Mn(e,t,n){this.k=e,this.x=t,this.y=n}Mn.prototype={constructor:Mn,scale:function(e){return e===1?this:new Mn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Mn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $n=new Mn(1,0,0);Mn.prototype;function Ja(e){e.stopImmediatePropagation()}function as(e){e.preventDefault(),e.stopImmediatePropagation()}function jN(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function EN(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Wp(){return this.__zoom||$n}function CN(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function PN(){return navigator.maxTouchPoints||"ontouchstart"in this}function TN(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Mg(){var e=jN,t=EN,n=TN,r=CN,o=PN,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,c=p_,u=ca("start","zoom","end"),d,f,p,m=500,g=150,w=0,b=10;function h(S){S.property("__zoom",Wp).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",C).filter(o).on("touchstart.zoom",L).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(S,z,P,H){var M=S.selection?S.selection():S;M.property("__zoom",Wp),S!==M?k(S,z,P,H):M.interrupt().each(function(){E(this,arguments).event(H).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},h.scaleBy=function(S,z,P,H){h.scaleTo(S,function(){var M=this.__zoom.k,j=typeof z=="function"?z.apply(this,arguments):z;return M*j},P,H)},h.scaleTo=function(S,z,P,H){h.transform(S,function(){var M=t.apply(this,arguments),j=this.__zoom,D=P==null?v(M):typeof P=="function"?P.apply(this,arguments):P,F=j.invert(D),B=typeof z=="function"?z.apply(this,arguments):z;return n(_(x(j,B),D,F),M,i)},P,H)},h.translateBy=function(S,z,P,H){h.transform(S,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof P=="function"?P.apply(this,arguments):P),t.apply(this,arguments),i)},null,H)},h.translateTo=function(S,z,P,H,M){h.transform(S,function(){var j=t.apply(this,arguments),D=this.__zoom,F=H==null?v(j):typeof H=="function"?H.apply(this,arguments):H;return n($n.translate(F[0],F[1]).scale(D.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof P=="function"?-P.apply(this,arguments):-P),j,i)},H,M)};function x(S,z){return z=Math.max(s[0],Math.min(s[1],z)),z===S.k?S:new Mn(z,S.x,S.y)}function _(S,z,P){var H=z[0]-P[0]*S.k,M=z[1]-P[1]*S.k;return H===S.x&&M===S.y?S:new Mn(S.k,H,M)}function v(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function k(S,z,P,H){S.on("start.zoom",function(){E(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(H).end()}).tween("zoom",function(){var M=this,j=arguments,D=E(M,j).event(H),F=t.apply(M,j),B=P==null?v(F):typeof P=="function"?P.apply(M,j):P,Q=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),X=M.__zoom,re=typeof z=="function"?z.apply(M,j):z,Y=c(X.invert(B).concat(Q/X.k),re.invert(B).concat(Q/re.k));return function(se){if(se===1)se=re;else{var V=Y(se),G=Q/V[2];se=new Mn(G,B[0]-V[0]*G,B[1]-V[1]*G)}D.zoom(null,se)}})}function E(S,z,P){return!P&&S.__zooming||new T(S,z)}function T(S,z){this.that=S,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(S,z),this.taps=0}T.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,z){return this.mouse&&S!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var z=Yt(this.that).datum();u.call(S,this.that,new kN(S,{sourceEvent:this.sourceEvent,target:h,transform:this.that.__zoom,dispatch:u}),z)}};function $(S,...z){if(!e.apply(this,arguments))return;var P=E(this,z).event(S),H=this.__zoom,M=Math.max(s[0],Math.min(s[1],H.k*Math.pow(2,r.apply(this,arguments)))),j=ln(S);if(P.wheel)(P.mouse[0][0]!==j[0]||P.mouse[0][1]!==j[1])&&(P.mouse[1]=H.invert(P.mouse[0]=j)),clearTimeout(P.wheel);else{if(H.k===M)return;P.mouse=[j,H.invert(j)],fl(this),P.start()}as(S),P.wheel=setTimeout(D,g),P.zoom("mouse",n(_(x(H,M),P.mouse[0],P.mouse[1]),P.extent,i));function D(){P.wheel=null,P.end()}}function R(S,...z){if(p||!e.apply(this,arguments))return;var P=S.currentTarget,H=E(this,z,!0).event(S),M=Yt(S.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",Q,!0),j=ln(S,P),D=S.clientX,F=S.clientY;gg(S.view),Ja(S),H.mouse=[j,this.__zoom.invert(j)],fl(this),H.start();function B(X){if(as(X),!H.moved){var re=X.clientX-D,Y=X.clientY-F;H.moved=re*re+Y*Y>w}H.event(X).zoom("mouse",n(_(H.that.__zoom,H.mouse[0]=ln(X,P),H.mouse[1]),H.extent,i))}function Q(X){M.on("mousemove.zoom mouseup.zoom",null),xg(X.view,H.moved),as(X),H.event(X).end()}}function C(S,...z){if(e.apply(this,arguments)){var P=this.__zoom,H=ln(S.changedTouches?S.changedTouches[0]:S,this),M=P.invert(H),j=P.k*(S.shiftKey?.5:2),D=n(_(x(P,j),H,M),t.apply(this,z),i);as(S),l>0?Yt(this).transition().duration(l).call(k,D,H,S):Yt(this).call(h.transform,D,H,S)}}function L(S,...z){if(e.apply(this,arguments)){var P=S.touches,H=P.length,M=E(this,z,S.changedTouches.length===H).event(S),j,D,F,B;for(Ja(S),D=0;D<H;++D)F=P[D],B=ln(F,this),B=[B,this.__zoom.invert(B),F.identifier],M.touch0?!M.touch1&&M.touch0[2]!==B[2]&&(M.touch1=B,M.taps=0):(M.touch0=B,j=!0,M.taps=1+!!d);d&&(d=clearTimeout(d)),j&&(M.taps<2&&(f=B[0],d=setTimeout(function(){d=null},m)),fl(this),M.start())}}function W(S,...z){if(this.__zooming){var P=E(this,z).event(S),H=S.changedTouches,M=H.length,j,D,F,B;for(as(S),j=0;j<M;++j)D=H[j],F=ln(D,this),P.touch0&&P.touch0[2]===D.identifier?P.touch0[0]=F:P.touch1&&P.touch1[2]===D.identifier&&(P.touch1[0]=F);if(D=P.that.__zoom,P.touch1){var Q=P.touch0[0],X=P.touch0[1],re=P.touch1[0],Y=P.touch1[1],se=(se=re[0]-Q[0])*se+(se=re[1]-Q[1])*se,V=(V=Y[0]-X[0])*V+(V=Y[1]-X[1])*V;D=x(D,Math.sqrt(se/V)),F=[(Q[0]+re[0])/2,(Q[1]+re[1])/2],B=[(X[0]+Y[0])/2,(X[1]+Y[1])/2]}else if(P.touch0)F=P.touch0[0],B=P.touch0[1];else return;P.zoom("touch",n(_(D,F,B),P.extent,i))}}function U(S,...z){if(this.__zooming){var P=E(this,z).event(S),H=S.changedTouches,M=H.length,j,D;for(Ja(S),p&&clearTimeout(p),p=setTimeout(function(){p=null},m),j=0;j<M;++j)D=H[j],P.touch0&&P.touch0[2]===D.identifier?delete P.touch0:P.touch1&&P.touch1[2]===D.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(D=ln(D,this),Math.hypot(f[0]-D[0],f[1]-D[1])<b)){var F=Yt(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return h.wheelDelta=function(S){return arguments.length?(r=typeof S=="function"?S:Wi(+S),h):r},h.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Wi(!!S),h):e},h.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:Wi(!!S),h):o},h.extent=function(S){return arguments.length?(t=typeof S=="function"?S:Wi([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),h):t},h.scaleExtent=function(S){return arguments.length?(s[0]=+S[0],s[1]=+S[1],h):[s[0],s[1]]},h.translateExtent=function(S){return arguments.length?(i[0][0]=+S[0][0],i[1][0]=+S[1][0],i[0][1]=+S[0][1],i[1][1]=+S[1][1],h):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},h.constrain=function(S){return arguments.length?(n=S,h):n},h.duration=function(S){return arguments.length?(l=+S,h):l},h.interpolate=function(S){return arguments.length?(c=S,h):c},h.on=function(){var S=u.on.apply(u,arguments);return S===u?h:S},h.clickDistance=function(S){return arguments.length?(w=(S=+S)*S,h):Math.sqrt(w)},h.tapDistance=function(S){return arguments.length?(b=+S,h):b},h}const pa=y.createContext(null),MN=pa.Provider,Hn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Ig=Hn.error001();function Ce(e,t){const n=y.useContext(pa);if(n===null)throw new Error(Ig);return rg(n,e,t)}const Ke=()=>{const e=y.useContext(pa);if(e===null)throw new Error(Ig);return y.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},IN=e=>e.userSelectionActive?"none":"all";function wd({position:e,children:t,className:n,style:r,...o}){const s=Ce(IN),i=`${e}`.split("-");return O.createElement("div",{className:at(["react-flow__panel",n,...i]),style:{...r,pointerEvents:s},...o},t)}function $N({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:O.createElement(wd,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},O.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const DN=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=y.useRef(null),[p,m]=y.useState({x:0,y:0,width:0,height:0}),g=at(["react-flow__edge-textwrapper",u]);return y.useEffect(()=>{if(f.current){const w=f.current.getBBox();m({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),typeof n>"u"||!n?null:O.createElement("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:g,visibility:p.width?"visible":"hidden",...d},o&&O.createElement("rect",{width:p.width+2*i[0],x:-i[0],y:-i[1],height:p.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),O.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:f,style:r},n),c)};var RN=y.memo(DN);const bd=e=>({width:e.offsetWidth,height:e.offsetHeight}),Wo=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),_d=(e={x:0,y:0},t)=>({x:Wo(e.x,t[0][0],t[1][0]),y:Wo(e.y,t[0][1],t[1][1])}),Yp=(e,t,n)=>e<t?Wo(Math.abs(e-t),1,50)/50:e>n?-Wo(Math.abs(e-n),1,50)/50:0,$g=(e,t)=>{const n=Yp(e.x,35,t.width-35)*20,r=Yp(e.y,35,t.height-35)*20;return[n,r]},Dg=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Rg=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Js=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),zg=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Kp=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),zN=(e,t)=>zg(Rg(Js(e),Js(t))),au=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},LN=e=>Gt(e.width)&&Gt(e.height)&&Gt(e.x)&&Gt(e.y),Gt=e=>!isNaN(e)&&isFinite(e),He=Symbol.for("internals"),Lg=["Enter"," ","Escape"],AN=(e,t)=>{},ON=e=>"nativeEvent"in e;function cu(e){var o,s;const t=ON(e)?e.nativeEvent:e,n=((s=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Ag=e=>"clientX"in e,pr=(e,t)=>{var s,i;const n=Ag(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Ul=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},ci=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:m=20})=>O.createElement(O.Fragment,null,O.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:p}),m&&O.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),o&&Gt(n)&&Gt(r)?O.createElement(RN,{x:n,y:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);ci.displayName="BaseEdge";function cs(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(s=>s.id===e);o&&n(r,{...o})}}function Og({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,i=Math.abs(r-t)/2,l=r<t?r+i:r-i;return[s,l,o,i]}function Fg({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:l}){const c=e*.125+o*.375+i*.375+n*.125,u=t*.125+s*.375+l*.375+r*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Gr;(function(e){e.Strict="strict",e.Loose="loose"})(Gr||(Gr={}));var Dr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Dr||(Dr={}));var Zs;(function(e){e.Partial="partial",e.Full="full"})(Zs||(Zs={}));var tr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(tr||(tr={}));var Xr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Xr||(Xr={}));var oe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(oe||(oe={}));function Gp({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===oe.Left||e===oe.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Hg({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:r,targetY:o,targetPosition:s=oe.Top}){const[i,l]=Gp({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,u]=Gp({pos:s,x1:r,y1:o,x2:e,y2:t}),[d,f,p,m]=Fg({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${l} ${c},${u} ${r},${o}`,d,f,p,m]}const Nd=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=oe.Bottom,targetPosition:s=oe.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:g,interactionWidth:w})=>{const[b,h,x]=Hg({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s});return O.createElement(ci,{path:b,labelX:h,labelY:x,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:g,interactionWidth:w})});Nd.displayName="SimpleBezierEdge";const Xp={[oe.Left]:{x:-1,y:0},[oe.Right]:{x:1,y:0},[oe.Top]:{x:0,y:-1},[oe.Bottom]:{x:0,y:1}},FN=({source:e,sourcePosition:t=oe.Bottom,target:n})=>t===oe.Left||t===oe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Qp=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function HN({source:e,sourcePosition:t=oe.Bottom,target:n,targetPosition:r=oe.Top,center:o,offset:s}){const i=Xp[t],l=Xp[r],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:n.x+l.x*s,y:n.y+l.y*s},d=FN({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",p=d[f];let m=[],g,w;const b={x:0,y:0},h={x:0,y:0},[x,_,v,k]=Og({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*l[f]===-1){g=o.x??x,w=o.y??_;const T=[{x:g,y:c.y},{x:g,y:u.y}],$=[{x:c.x,y:w},{x:u.x,y:w}];i[f]===p?m=f==="x"?T:$:m=f==="x"?$:T}else{const T=[{x:c.x,y:u.y}],$=[{x:u.x,y:c.y}];if(f==="x"?m=i.x===p?$:T:m=i.y===p?T:$,t===r){const U=Math.abs(e[f]-n[f]);if(U<=s){const S=Math.min(s-1,s-U);i[f]===p?b[f]=(c[f]>e[f]?-1:1)*S:h[f]=(u[f]>n[f]?-1:1)*S}}if(t!==r){const U=f==="x"?"y":"x",S=i[f]===l[U],z=c[U]>u[U],P=c[U]<u[U];(i[f]===1&&(!S&&z||S&&P)||i[f]!==1&&(!S&&P||S&&z))&&(m=f==="x"?T:$)}const R={x:c.x+b.x,y:c.y+b.y},C={x:u.x+h.x,y:u.y+h.y},L=Math.max(Math.abs(R.x-m[0].x),Math.abs(C.x-m[0].x)),W=Math.max(Math.abs(R.y-m[0].y),Math.abs(C.y-m[0].y));L>=W?(g=(R.x+C.x)/2,w=m[0].y):(g=m[0].x,w=(R.y+C.y)/2)}return[[e,{x:c.x+b.x,y:c.y+b.y},...m,{x:u.x+h.x,y:u.y+h.y},n],g,w,v,k]}function BN(e,t,n,r){const o=Math.min(Qp(e,t)/2,Qp(t,n)/2,r),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${s+o*u},${i}Q ${s},${i} ${s},${i+o*d}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${i+o*c}Q ${s},${i} ${s+o*l},${i}`}function uu({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:r,targetY:o,targetPosition:s=oe.Top,borderRadius:i=5,centerX:l,centerY:c,offset:u=20}){const[d,f,p,m,g]=HN({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:l,y:c},offset:u});return[d.reduce((b,h,x)=>{let _="";return x>0&&x<d.length-1?_=BN(d[x-1],h,d[x+1],i):_=`${x===0?"M":"L"}${h.x} ${h.y}`,b+=_,b},""),f,p,m,g]}const ha=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=oe.Bottom,targetPosition:p=oe.Top,markerEnd:m,markerStart:g,pathOptions:w,interactionWidth:b})=>{const[h,x,_]=uu({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:p,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset});return O.createElement(ci,{path:h,labelX:x,labelY:_,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:g,interactionWidth:b})});ha.displayName="SmoothStepEdge";const Sd=y.memo(e=>{var t;return O.createElement(ha,{...e,pathOptions:y.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Sd.displayName="StepEdge";function UN({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,s,i,l]=Og({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,i,l]}const kd=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:m})=>{const[g,w,b]=UN({sourceX:e,sourceY:t,targetX:n,targetY:r});return O.createElement(ci,{path:g,labelX:w,labelY:b,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:m})});kd.displayName="StraightEdge";function Yi(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Jp({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case oe.Left:return[t-Yi(t-r,s),n];case oe.Right:return[t+Yi(r-t,s),n];case oe.Top:return[t,n-Yi(n-o,s)];case oe.Bottom:return[t,n+Yi(o-n,s)]}}function Bg({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:r,targetY:o,targetPosition:s=oe.Top,curvature:i=.25}){const[l,c]=Jp({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[u,d]=Jp({pos:s,x1:r,y1:o,x2:e,y2:t,c:i}),[f,p,m,g]=Fg({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${r},${o}`,f,p,m,g]}const Vl=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=oe.Bottom,targetPosition:s=oe.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:g,pathOptions:w,interactionWidth:b})=>{const[h,x,_]=Bg({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s,curvature:w==null?void 0:w.curvature});return O.createElement(ci,{path:h,labelX:x,labelY:_,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:g,interactionWidth:b})});Vl.displayName="BezierEdge";const jd=y.createContext(null),VN=jd.Provider;jd.Consumer;const WN=()=>y.useContext(jd),YN=e=>"id"in e&&"source"in e&&"target"in e,KN=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,du=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,GN=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Ug=(e,t)=>{if(!e.source||!e.target)return t;let n;return YN(e)?n={...e}:n={...e,id:KN(e)},GN(n,t)?t:t.concat(n)},fu=({x:e,y:t},[n,r,o],s,[i,l])=>{const c={x:(e-n)/o,y:(t-r)/o};return s?{x:i*Math.round(c.x/i),y:l*Math.round(c.y/l)}:c},Vg=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),Fr=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},ma=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:s,y:i}=Fr(o,t).positionAbsolute;return Rg(r,Js({x:s,y:i,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return zg(n)},Wg=(e,t,[n,r,o]=[0,0,1],s=!1,i=!1,l=[0,0])=>{const c={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},u=[];return e.forEach(d=>{const{width:f,height:p,selectable:m=!0,hidden:g=!1}=d;if(i&&!m||g)return!1;const{positionAbsolute:w}=Fr(d,l),b={x:w.x,y:w.y,width:f||0,height:p||0},h=au(c,b),x=typeof f>"u"||typeof p>"u"||f===null||p===null,_=s&&h>0,v=(f||0)*(p||0);(x||_||h>=v||d.dragging)&&u.push(d)}),u},Yg=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Kg=(e,t,n,r,o,s=.1)=>{const i=t/(e.width*(1+s)),l=n/(e.height*(1+s)),c=Math.min(i,l),u=Wo(c,r,o),d=e.x+e.width/2,f=e.y+e.height/2,p=t/2-d*u,m=n/2-f*u;return{x:p,y:m,zoom:u}},Pr=(e,t=0)=>e.transition().duration(t);function Zp(e,t,n,r){return(t[n]||[]).reduce((o,s)=>{var i,l;return`${e.id}-${s.id}-${n}`!==r&&o.push({id:s.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),o},[])}function XN(e,t,n,r,o,s){const{x:i,y:l}=pr(e),u=t.elementsFromPoint(i,l).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const w=Ed(void 0,u),b=u.getAttribute("data-handleid"),h=s({nodeId:g,id:b,type:w});if(h){const x=o.find(_=>_.nodeId===g&&_.type===w&&_.id===b);return{handle:{id:b,type:w,nodeId:g,x:(x==null?void 0:x.x)||n.x,y:(x==null?void 0:x.y)||n.y},validHandleResult:h}}}}let d=[],f=1/0;if(o.forEach(g=>{const w=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(w<=r){const b=s(g);w<=f&&(w<f?d=[{handle:g,validHandleResult:b}]:w===f&&d.push({handle:g,validHandleResult:b}),f=w)}}),!d.length)return{handle:null,validHandleResult:Gg()};if(d.length===1)return d[0];const p=d.some(({validHandleResult:g})=>g.isValid),m=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:w})=>m?g.type==="target":p?w.isValid:!0)||d[0]}const QN={source:null,target:null,sourceHandle:null,targetHandle:null},Gg=()=>({handleDomNode:null,isValid:!1,connection:QN,endHandle:null});function Xg(e,t,n,r,o,s,i){const l=o==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Gg(),handleDomNode:c};if(c){const d=Ed(void 0,c),f=c.getAttribute("data-nodeid"),p=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),w={source:l?f:n,sourceHandle:l?p:r,target:l?n:f,targetHandle:l?r:p};u.connection=w,m&&g&&(t===Gr.Strict?l&&d==="source"||!l&&d==="target":f!==n||p!==r)&&(u.endHandle={nodeId:f,handleId:p,type:d},u.isValid=s(w))}return u}function JN({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,s)=>{if(s[He]){const{handleBounds:i}=s[He];let l=[],c=[];i&&(l=Zp(s,i,"source",`${t}-${n}-${r}`),c=Zp(s,i,"target",`${t}-${n}-${r}`)),o.push(...l,...c)}return o},[])}function Ed(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Za(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function ZN(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Qg({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:s,setState:i,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=Dg(e.target),{connectionMode:f,domNode:p,autoPanOnConnect:m,connectionRadius:g,onConnectStart:w,panBy:b,getNodes:h,cancelConnection:x}=s();let _=0,v;const{x:k,y:E}=pr(e),T=d==null?void 0:d.elementFromPoint(k,E),$=Ed(c,T),R=p==null?void 0:p.getBoundingClientRect();if(!R||!$)return;let C,L=pr(e,R),W=!1,U=null,S=!1,z=null;const P=JN({nodes:h(),nodeId:n,handleId:t,handleType:$}),H=()=>{if(!m)return;const[D,F]=$g(L,R);b({x:D,y:F}),_=requestAnimationFrame(H)};i({connectionPosition:L,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:$,connectionStartHandle:{nodeId:n,handleId:t,type:$},connectionEndHandle:null}),w==null||w(e,{nodeId:n,handleId:t,handleType:$});function M(D){const{transform:F}=s();L=pr(D,R);const{handle:B,validHandleResult:Q}=XN(D,d,fu(L,F,!1,[1,1]),g,P,X=>Xg(X,f,n,t,o?"target":"source",l,d));if(v=B,W||(H(),W=!0),z=Q.handleDomNode,U=Q.connection,S=Q.isValid,i({connectionPosition:v&&S?Vg({x:v.x,y:v.y},F):L,connectionStatus:ZN(!!v,S),connectionEndHandle:Q.endHandle}),!v&&!S&&!z)return Za(C);U.source!==U.target&&z&&(Za(C),C=z,z.classList.add("connecting","react-flow__handle-connecting"),z.classList.toggle("valid",S),z.classList.toggle("react-flow__handle-valid",S))}function j(D){var F,B;(v||z)&&U&&S&&(r==null||r(U)),(B=(F=s()).onConnectEnd)==null||B.call(F,D),c&&(u==null||u(D)),Za(C),x(),cancelAnimationFrame(_),W=!1,S=!1,U=null,z=null,d.removeEventListener("mousemove",M),d.removeEventListener("mouseup",j),d.removeEventListener("touchmove",M),d.removeEventListener("touchend",j)}d.addEventListener("mousemove",M),d.addEventListener("mouseup",j),d.addEventListener("touchmove",M),d.addEventListener("touchend",j)}const qp=()=>!0,qN=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),e2=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:s,connectionClickStartHandle:i}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},Jg=y.forwardRef(({type:e="source",position:t=oe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:i,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...p},m)=>{var R,C;const g=i||null,w=e==="target",b=Ke(),h=WN(),{connectOnClick:x,noPanClassName:_}=Ce(qN,rt),{connecting:v,clickConnecting:k}=Ce(e2(h,g,e),rt);h||(C=(R=b.getState()).onError)==null||C.call(R,"010",Hn.error010());const E=L=>{const{defaultEdgeOptions:W,onConnect:U,hasDefaultEdges:S}=b.getState(),z={...W,...L};if(S){const{edges:P,setEdges:H}=b.getState();H(Ug(z,P))}U==null||U(z),l==null||l(z)},T=L=>{if(!h)return;const W=Ag(L);o&&(W&&L.button===0||!W)&&Qg({event:L,handleId:g,nodeId:h,onConnect:E,isTarget:w,getState:b.getState,setState:b.setState,isValidConnection:n||b.getState().isValidConnection||qp}),W?d==null||d(L):f==null||f(L)},$=L=>{const{onClickConnectStart:W,onClickConnectEnd:U,connectionClickStartHandle:S,connectionMode:z,isValidConnection:P}=b.getState();if(!h||!S&&!o)return;if(!S){W==null||W(L,{nodeId:h,handleId:g,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:h,type:e,handleId:g}});return}const H=Dg(L.target),M=n||P||qp,{connection:j,isValid:D}=Xg({nodeId:h,id:g,type:e},z,S.nodeId,S.handleId||null,S.type,M,H);D&&E(j),U==null||U(L),b.setState({connectionClickStartHandle:null})};return O.createElement("div",{"data-handleid":g,"data-nodeid":h,"data-handlepos":t,"data-id":`${h}-${g}-${e}`,className:at(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,u,{source:!w,target:w,connectable:r,connectablestart:o,connectableend:s,connecting:k,connectionindicator:r&&(o&&!v||s&&v)}]),onMouseDown:T,onTouchStart:T,onClick:x?$:void 0,ref:m,...p},c)});Jg.displayName="Handle";var Yo=y.memo(Jg);const Zg=({data:e,isConnectable:t,targetPosition:n=oe.Top,sourcePosition:r=oe.Bottom})=>O.createElement(O.Fragment,null,O.createElement(Yo,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,O.createElement(Yo,{type:"source",position:r,isConnectable:t}));Zg.displayName="DefaultNode";var pu=y.memo(Zg);const qg=({data:e,isConnectable:t,sourcePosition:n=oe.Bottom})=>O.createElement(O.Fragment,null,e==null?void 0:e.label,O.createElement(Yo,{type:"source",position:n,isConnectable:t}));qg.displayName="InputNode";var ex=y.memo(qg);const tx=({data:e,isConnectable:t,targetPosition:n=oe.Top})=>O.createElement(O.Fragment,null,O.createElement(Yo,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);tx.displayName="OutputNode";var nx=y.memo(tx);const Cd=()=>null;Cd.displayName="GroupNode";const t2=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Ki=e=>e.id;function n2(e,t){return rt(e.selectedNodes.map(Ki),t.selectedNodes.map(Ki))&&rt(e.selectedEdges.map(Ki),t.selectedEdges.map(Ki))}const rx=y.memo(({onSelectionChange:e})=>{const t=Ke(),{selectedNodes:n,selectedEdges:r}=Ce(t2,n2);return y.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(s=>s(o))},[n,r,e]),null});rx.displayName="SelectionListener";const r2=e=>!!e.onSelectionChange;function o2({onSelectionChange:e}){const t=Ce(r2);return e||t?O.createElement(rx,{onSelectionChange:e}):null}const s2=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function oo(e,t){y.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function pe(e,t,n){y.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const i2=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:s,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:p,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:w,maxZoom:b,nodeExtent:h,onNodesChange:x,onEdgesChange:_,elementsSelectable:v,connectionMode:k,snapGrid:E,snapToGrid:T,translateExtent:$,connectOnClick:R,defaultEdgeOptions:C,fitView:L,fitViewOptions:W,onNodesDelete:U,onEdgesDelete:S,onNodeDrag:z,onNodeDragStart:P,onNodeDragStop:H,onSelectionDrag:M,onSelectionDragStart:j,onSelectionDragStop:D,noPanClassName:F,nodeOrigin:B,rfId:Q,autoPanOnConnect:X,autoPanOnNodeDrag:re,onError:Y,connectionRadius:se,isValidConnection:V,nodeDragThreshold:G})=>{const{setNodes:J,setEdges:ue,setDefaultNodesAndEdges:ae,setMinZoom:Pe,setMaxZoom:_e,setTranslateExtent:ke,setNodeExtent:Ge,reset:ge}=Ce(s2,rt),ee=Ke();return y.useEffect(()=>{const Ne=r==null?void 0:r.map(ct=>({...ct,...C}));return ae(n,Ne),()=>{ge()}},[]),pe("defaultEdgeOptions",C,ee.setState),pe("connectionMode",k,ee.setState),pe("onConnect",o,ee.setState),pe("onConnectStart",s,ee.setState),pe("onConnectEnd",i,ee.setState),pe("onClickConnectStart",l,ee.setState),pe("onClickConnectEnd",c,ee.setState),pe("nodesDraggable",u,ee.setState),pe("nodesConnectable",d,ee.setState),pe("nodesFocusable",f,ee.setState),pe("edgesFocusable",p,ee.setState),pe("edgesUpdatable",m,ee.setState),pe("elementsSelectable",v,ee.setState),pe("elevateNodesOnSelect",g,ee.setState),pe("snapToGrid",T,ee.setState),pe("snapGrid",E,ee.setState),pe("onNodesChange",x,ee.setState),pe("onEdgesChange",_,ee.setState),pe("connectOnClick",R,ee.setState),pe("fitViewOnInit",L,ee.setState),pe("fitViewOnInitOptions",W,ee.setState),pe("onNodesDelete",U,ee.setState),pe("onEdgesDelete",S,ee.setState),pe("onNodeDrag",z,ee.setState),pe("onNodeDragStart",P,ee.setState),pe("onNodeDragStop",H,ee.setState),pe("onSelectionDrag",M,ee.setState),pe("onSelectionDragStart",j,ee.setState),pe("onSelectionDragStop",D,ee.setState),pe("noPanClassName",F,ee.setState),pe("nodeOrigin",B,ee.setState),pe("rfId",Q,ee.setState),pe("autoPanOnConnect",X,ee.setState),pe("autoPanOnNodeDrag",re,ee.setState),pe("onError",Y,ee.setState),pe("connectionRadius",se,ee.setState),pe("isValidConnection",V,ee.setState),pe("nodeDragThreshold",G,ee.setState),oo(e,J),oo(t,ue),oo(w,Pe),oo(b,_e),oo($,ke),oo(h,Ge),null},eh={display:"none"},l2={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ox="react-flow__node-desc",sx="react-flow__edge-desc",a2="react-flow__aria-live",c2=e=>e.ariaLiveMessage;function u2({rfId:e}){const t=Ce(c2);return O.createElement("div",{id:`${a2}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:l2},t)}function d2({rfId:e,disableKeyboardA11y:t}){return O.createElement(O.Fragment,null,O.createElement("div",{id:`${ox}-${e}`,style:eh},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),O.createElement("div",{id:`${sx}-${e}`,style:eh},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&O.createElement(u2,{rfId:e}))}var qs=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=y.useState(!1),o=y.useRef(!1),s=y.useRef(new Set([])),[i,l]=y.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,p)=>f.concat(...p),[]);return[u,d]}return[[],[]]},[e]);return y.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=m=>{if(o.current=m.ctrlKey||m.metaKey||m.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&cu(m))return!1;const w=nh(m.code,l);s.current.add(m[w]),th(i,s.current,!1)&&(m.preventDefault(),r(!0))},f=m=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&cu(m))return!1;const w=nh(m.code,l);th(i,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(m[w]),m.key==="Meta"&&s.current.clear(),o.current=!1},p=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",p),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",p)}}},[e,r]),n};function th(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function nh(e,t){return t.includes(e)?"code":"key"}function ix(e,t,n,r){var l,c;const o=e.parentNode||e.parentId;if(!o)return n;const s=t.get(o),i=Fr(s,r);return ix(s,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((l=s[He])==null?void 0:l.z)??0)>(n.z??0)?((c=s[He])==null?void 0:c.z)??0:n.z??0},r)}function lx(e,t,n){e.forEach(r=>{var s;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:i,y:l,z:c}=ix(r,e,{...r.position,z:((s=r[He])==null?void 0:s.z)??0},t);r.positionAbsolute={x:i,y:l},r[He].z=c,n!=null&&n[r.id]&&(r[He].isParent=!0)}})}function qa(e,t,n,r){const o=new Map,s={},i=r?1e3:0;return e.forEach(l=>{var m;const c=(Gt(l.zIndex)?l.zIndex:0)+(l.selected?i:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(s[f]=!0);const p=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,He,{enumerable:!1,value:{handleBounds:p||(m=u==null?void 0:u[He])==null?void 0:m.handleBounds,z:c}}),o.set(l.id,d)}),lx(o,n,s),o}function ax(e,t={}){const{getNodes:n,width:r,height:o,minZoom:s,maxZoom:i,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),p=t.initial&&!u&&d;if(l&&c&&(p||!t.initial)){const g=n().filter(b=>{var x;const h=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(x=t.nodes)!=null&&x.length?h&&t.nodes.some(_=>_.id===b.id):h}),w=g.every(b=>b.width&&b.height);if(g.length>0&&w){const b=ma(g,f),{x:h,y:x,zoom:_}=Kg(b,r,o,t.minZoom??s,t.maxZoom??i,t.padding??.1),v=$n.translate(h,x).scale(_);return typeof t.duration=="number"&&t.duration>0?l.transform(Pr(c,t.duration),v):l.transform(c,v),!0}}return!1}function f2(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[He]:r[He],selected:n.selected})}),new Map(t)}function p2(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function Gi({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:s,onNodesChange:i,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&r({nodeInternals:f2(e,o)}),i==null||i(e)),t!=null&&t.length&&(u&&r({edges:p2(t,s)}),l==null||l(t))}const so=()=>{},h2={zoomIn:so,zoomOut:so,zoomTo:so,getZoom:()=>1,setViewport:so,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:so,fitBounds:so,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},m2=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),g2=()=>{const e=Ke(),{d3Zoom:t,d3Selection:n}=Ce(m2,rt);return y.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(Pr(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(Pr(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,s)=>t.scaleTo(Pr(n,s==null?void 0:s.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,s)=>{const[i,l,c]=e.getState().transform,u=$n.translate(o.x??i,o.y??l).scale(o.zoom??c);t.transform(Pr(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[o,s,i]=e.getState().transform;return{x:o,y:s,zoom:i}},fitView:o=>ax(e.getState,o),setCenter:(o,s,i)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=l/2-o*d,p=c/2-s*d,m=$n.translate(f,p).scale(d);t.transform(Pr(n,i==null?void 0:i.duration),m)},fitBounds:(o,s)=>{const{width:i,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:p}=Kg(o,i,l,c,u,(s==null?void 0:s.padding)??.1),m=$n.translate(d,f).scale(p);t.transform(Pr(n,s==null?void 0:s.duration),m)},project:o=>{const{transform:s,snapToGrid:i,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),fu(o,s,i,l)},screenToFlowPosition:o=>{const{transform:s,snapToGrid:i,snapGrid:l,domNode:c}=e.getState();if(!c)return o;const{x:u,y:d}=c.getBoundingClientRect(),f={x:o.x-u,y:o.y-d};return fu(f,s,i,l)},flowToScreenPosition:o=>{const{transform:s,domNode:i}=e.getState();if(!i)return o;const{x:l,y:c}=i.getBoundingClientRect(),u=Vg(o,s);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:h2,[t,n])};function Qo(){const e=g2(),t=Ke(),n=y.useCallback(()=>t.getState().getNodes().map(w=>({...w})),[]),r=y.useCallback(w=>t.getState().nodeInternals.get(w),[]),o=y.useCallback(()=>{const{edges:w=[]}=t.getState();return w.map(b=>({...b}))},[]),s=y.useCallback(w=>{const{edges:b=[]}=t.getState();return b.find(h=>h.id===w)},[]),i=y.useCallback(w=>{const{getNodes:b,setNodes:h,hasDefaultNodes:x,onNodesChange:_}=t.getState(),v=b(),k=typeof w=="function"?w(v):w;if(x)h(k);else if(_){const E=k.length===0?v.map(T=>({type:"remove",id:T.id})):k.map(T=>({item:T,type:"reset"}));_(E)}},[]),l=y.useCallback(w=>{const{edges:b=[],setEdges:h,hasDefaultEdges:x,onEdgesChange:_}=t.getState(),v=typeof w=="function"?w(b):w;if(x)h(v);else if(_){const k=v.length===0?b.map(E=>({type:"remove",id:E.id})):v.map(E=>({item:E,type:"reset"}));_(k)}},[]),c=y.useCallback(w=>{const b=Array.isArray(w)?w:[w],{getNodes:h,setNodes:x,hasDefaultNodes:_,onNodesChange:v}=t.getState();if(_){const E=[...h(),...b];x(E)}else if(v){const k=b.map(E=>({item:E,type:"add"}));v(k)}},[]),u=y.useCallback(w=>{const b=Array.isArray(w)?w:[w],{edges:h=[],setEdges:x,hasDefaultEdges:_,onEdgesChange:v}=t.getState();if(_)x([...h,...b]);else if(v){const k=b.map(E=>({item:E,type:"add"}));v(k)}},[]),d=y.useCallback(()=>{const{getNodes:w,edges:b=[],transform:h}=t.getState(),[x,_,v]=h;return{nodes:w().map(k=>({...k})),edges:b.map(k=>({...k})),viewport:{x,y:_,zoom:v}}},[]),f=y.useCallback(({nodes:w,edges:b})=>{const{nodeInternals:h,getNodes:x,edges:_,hasDefaultNodes:v,hasDefaultEdges:k,onNodesDelete:E,onEdgesDelete:T,onNodesChange:$,onEdgesChange:R}=t.getState(),C=(w||[]).map(z=>z.id),L=(b||[]).map(z=>z.id),W=x().reduce((z,P)=>{const H=P.parentNode||P.parentId,M=!C.includes(P.id)&&H&&z.find(D=>D.id===H);return(typeof P.deletable=="boolean"?P.deletable:!0)&&(C.includes(P.id)||M)&&z.push(P),z},[]),U=_.filter(z=>typeof z.deletable=="boolean"?z.deletable:!0),S=U.filter(z=>L.includes(z.id));if(W||S){const z=Yg(W,U),P=[...S,...z],H=P.reduce((M,j)=>(M.includes(j.id)||M.push(j.id),M),[]);if((k||v)&&(k&&t.setState({edges:_.filter(M=>!H.includes(M.id))}),v&&(W.forEach(M=>{h.delete(M.id)}),t.setState({nodeInternals:new Map(h)}))),H.length>0&&(T==null||T(P),R&&R(H.map(M=>({id:M,type:"remove"})))),W.length>0&&(E==null||E(W),$)){const M=W.map(j=>({id:j.id,type:"remove"}));$(M)}}},[]),p=y.useCallback(w=>{const b=LN(w),h=b?null:t.getState().nodeInternals.get(w.id);return!b&&!h?[null,null,b]:[b?w:Kp(h),h,b]},[]),m=y.useCallback((w,b=!0,h)=>{const[x,_,v]=p(w);return x?(h||t.getState().getNodes()).filter(k=>{if(!v&&(k.id===_.id||!k.positionAbsolute))return!1;const E=Kp(k),T=au(E,x);return b&&T>0||T>=x.width*x.height}):[]},[]),g=y.useCallback((w,b,h=!0)=>{const[x]=p(w);if(!x)return!1;const _=au(x,b);return h&&_>0||_>=x.width*x.height},[]);return y.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:s,setNodes:i,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:g}),[e,n,r,o,s,i,l,c,u,d,f,m,g])}const x2={actInsideInputWithModifier:!1};var y2=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ke(),{deleteElements:r}=Qo(),o=qs(e,x2),s=qs(t);y.useEffect(()=>{if(o){const{edges:i,getNodes:l}=n.getState(),c=l().filter(d=>d.selected),u=i.filter(d=>d.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[o]),y.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function v2(e){const t=Ke();y.useEffect(()=>{let n;const r=()=>{var s,i;if(!e.current)return;const o=bd(e.current);(o.height===0||o.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Hn.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Pd={position:"absolute",width:"100%",height:"100%",top:0,left:0},w2=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Xi=e=>({x:e.x,y:e.y,zoom:e.k}),io=(e,t)=>e.target.closest(`.${t}`),rh=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),oh=e=>{const t=e.ctrlKey&&Ul()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},b2=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),_2=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Dr.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:p,translateExtent:m,minZoom:g,maxZoom:w,zoomActivationKeyCode:b,preventScrolling:h=!0,children:x,noWheelClassName:_,noPanClassName:v})=>{const k=y.useRef(),E=Ke(),T=y.useRef(!1),$=y.useRef(!1),R=y.useRef(null),C=y.useRef({x:0,y:0,zoom:0}),{d3Zoom:L,d3Selection:W,d3ZoomHandler:U,userSelectionActive:S}=Ce(b2,rt),z=qs(b),P=y.useRef(0),H=y.useRef(!1),M=y.useRef();return v2(R),y.useEffect(()=>{if(R.current){const j=R.current.getBoundingClientRect(),D=Mg().scaleExtent([g,w]).translateExtent(m),F=Yt(R.current).call(D),B=$n.translate(p.x,p.y).scale(Wo(p.zoom,g,w)),Q=[[0,0],[j.width,j.height]],X=D.constrain()(B,Q,m);D.transform(F,X),D.wheelDelta(oh),E.setState({d3Zoom:D,d3Selection:F,d3ZoomHandler:F.on("wheel.zoom"),transform:[X.x,X.y,X.k],domNode:R.current.closest(".react-flow")})}},[]),y.useEffect(()=>{W&&L&&(i&&!z&&!S?W.on("wheel.zoom",j=>{if(io(j,_))return!1;j.preventDefault(),j.stopImmediatePropagation();const D=W.property("__zoom").k||1;if(j.ctrlKey&&s){const V=ln(j),G=oh(j),J=D*Math.pow(2,G);L.scaleTo(W,J,V,j);return}const F=j.deltaMode===1?20:1;let B=c===Dr.Vertical?0:j.deltaX*F,Q=c===Dr.Horizontal?0:j.deltaY*F;!Ul()&&j.shiftKey&&c!==Dr.Vertical&&(B=j.deltaY*F,Q=0),L.translateBy(W,-(B/D)*l,-(Q/D)*l,{internal:!0});const X=Xi(W.property("__zoom")),{onViewportChangeStart:re,onViewportChange:Y,onViewportChangeEnd:se}=E.getState();clearTimeout(M.current),H.current||(H.current=!0,t==null||t(j,X),re==null||re(X)),H.current&&(e==null||e(j,X),Y==null||Y(X),M.current=setTimeout(()=>{n==null||n(j,X),se==null||se(X),H.current=!1},150))},{passive:!1}):typeof U<"u"&&W.on("wheel.zoom",function(j,D){if(!h&&j.type==="wheel"&&!j.ctrlKey||io(j,_))return null;j.preventDefault(),U.call(this,j,D)},{passive:!1}))},[S,i,c,W,L,U,z,s,h,_,t,e,n]),y.useEffect(()=>{L&&L.on("start",j=>{var B,Q;if(!j.sourceEvent||j.sourceEvent.internal)return null;P.current=(B=j.sourceEvent)==null?void 0:B.button;const{onViewportChangeStart:D}=E.getState(),F=Xi(j.transform);T.current=!0,C.current=F,((Q=j.sourceEvent)==null?void 0:Q.type)==="mousedown"&&E.setState({paneDragging:!0}),D==null||D(F),t==null||t(j.sourceEvent,F)})},[L,t]),y.useEffect(()=>{L&&(S&&!T.current?L.on("zoom",null):S||L.on("zoom",j=>{var F;const{onViewportChange:D}=E.getState();if(E.setState({transform:[j.transform.x,j.transform.y,j.transform.k]}),$.current=!!(r&&rh(f,P.current??0)),(e||D)&&!((F=j.sourceEvent)!=null&&F.internal)){const B=Xi(j.transform);D==null||D(B),e==null||e(j.sourceEvent,B)}}))},[S,L,e,f,r]),y.useEffect(()=>{L&&L.on("end",j=>{if(!j.sourceEvent||j.sourceEvent.internal)return null;const{onViewportChangeEnd:D}=E.getState();if(T.current=!1,E.setState({paneDragging:!1}),r&&rh(f,P.current??0)&&!$.current&&r(j.sourceEvent),$.current=!1,(n||D)&&w2(C.current,j.transform)){const F=Xi(j.transform);C.current=F,clearTimeout(k.current),k.current=setTimeout(()=>{D==null||D(F),n==null||n(j.sourceEvent,F)},i?150:0)}})},[L,i,f,n,r]),y.useEffect(()=>{L&&L.filter(j=>{const D=z||o,F=s&&j.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&j.button===1&&j.type==="mousedown"&&(io(j,"react-flow__node")||io(j,"react-flow__edge")))return!0;if(!f&&!D&&!i&&!u&&!s||S||!u&&j.type==="dblclick"||io(j,_)&&j.type==="wheel"||io(j,v)&&(j.type!=="wheel"||i&&j.type==="wheel"&&!z)||!s&&j.ctrlKey&&j.type==="wheel"||!D&&!i&&!F&&j.type==="wheel"||!f&&(j.type==="mousedown"||j.type==="touchstart")||Array.isArray(f)&&!f.includes(j.button)&&j.type==="mousedown")return!1;const B=Array.isArray(f)&&f.includes(j.button)||!j.button||j.button<=1;return(!j.ctrlKey||j.type==="wheel")&&B})},[S,L,o,s,i,u,f,d,z]),O.createElement("div",{className:"react-flow__renderer",ref:R,style:Pd},x)},N2=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function S2(){const{userSelectionActive:e,userSelectionRect:t}=Ce(N2,rt);return e&&t?O.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function sh(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(o>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),s>0&&(r.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);r.position.x=r.position.x-i,r.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);r.position.y=r.position.y-i,r.style.height+=i,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function cx(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const s=e.filter(l=>l.id===o.id);if(s.length===0)return r.push(o),r;const i={...o};for(const l of s)if(l)switch(l.type){case"select":{i.selected=l.selected;break}case"position":{typeof l.position<"u"&&(i.position=l.position),typeof l.positionAbsolute<"u"&&(i.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&sh(r,i);break}case"dimensions":{typeof l.dimensions<"u"&&(i.width=l.dimensions.width,i.height=l.dimensions.height),typeof l.updateStyle<"u"&&(i.style={...i.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(i.resizing=l.resizing),i.expandParent&&sh(r,i);break}case"remove":return r}return r.push(i),r},n)}function ux(e,t){return cx(e,t)}function k2(e,t){return cx(e,t)}const Zn=(e,t)=>({id:e,type:"select",selected:t});function So(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(Zn(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(Zn(r.id,!1))),n},[])}const ec=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},j2=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),dx=y.memo(({isSelecting:e,selectionMode:t=Zs.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const p=y.useRef(null),m=Ke(),g=y.useRef(0),w=y.useRef(0),b=y.useRef(),{userSelectionActive:h,elementsSelectable:x,dragging:_}=Ce(j2,rt),v=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,w.current=0},k=U=>{s==null||s(U),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},E=U=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){U.preventDefault();return}i==null||i(U)},T=l?U=>l(U):void 0,$=U=>{const{resetSelectedElements:S,domNode:z}=m.getState();if(b.current=z==null?void 0:z.getBoundingClientRect(),!x||!e||U.button!==0||U.target!==p.current||!b.current)return;const{x:P,y:H}=pr(U,b.current);S(),m.setState({userSelectionRect:{width:0,height:0,startX:P,startY:H,x:P,y:H}}),r==null||r(U)},R=U=>{const{userSelectionRect:S,nodeInternals:z,edges:P,transform:H,onNodesChange:M,onEdgesChange:j,nodeOrigin:D,getNodes:F}=m.getState();if(!e||!b.current||!S)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const B=pr(U,b.current),Q=S.startX??0,X=S.startY??0,re={...S,x:B.x<Q?B.x:Q,y:B.y<X?B.y:X,width:Math.abs(B.x-Q),height:Math.abs(B.y-X)},Y=F(),se=Wg(z,re,H,t===Zs.Partial,!0,D),V=Yg(se,P).map(J=>J.id),G=se.map(J=>J.id);if(g.current!==G.length){g.current=G.length;const J=So(Y,G);J.length&&(M==null||M(J))}if(w.current!==V.length){w.current=V.length;const J=So(P,V);J.length&&(j==null||j(J))}m.setState({userSelectionRect:re})},C=U=>{if(U.button!==0)return;const{userSelectionRect:S}=m.getState();!h&&S&&U.target===p.current&&(k==null||k(U)),m.setState({nodesSelectionActive:g.current>0}),v(),o==null||o(U)},L=U=>{h&&(m.setState({nodesSelectionActive:g.current>0}),o==null||o(U)),v()},W=x&&(e||h);return O.createElement("div",{className:at(["react-flow__pane",{dragging:_,selection:e}]),onClick:W?void 0:ec(k,p),onContextMenu:ec(E,p),onWheel:ec(T,p),onMouseEnter:W?void 0:c,onMouseDown:W?$:void 0,onMouseMove:W?R:u,onMouseUp:W?C:void 0,onMouseLeave:W?L:d,ref:p,style:Pd},f,O.createElement(S2,null))});dx.displayName="Pane";function fx(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:fx(r,t):!1}function ih(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function E2(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!fx(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var s,i;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=o.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=o.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function C2(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function px(e,t,n,r,o=[0,0],s){const i=C2(e,e.extent||r);let l=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:p,y:m}=Fr(f,o).positionAbsolute;l=f&&Gt(p)&&Gt(m)&&Gt(f.width)&&Gt(f.height)?[[p+e.width*o[0],m+e.height*o[1]],[p+f.width-e.width+e.width*o[0],m+f.height-e.height+e.height*o[1]]]:l}else s==null||s("005",Hn.error005()),l=i;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:p,y:m}=Fr(f,o).positionAbsolute;l=[[e.extent[0][0]+p,e.extent[0][1]+m],[e.extent[1][0]+p,e.extent[1][1]+m]]}let u={x:0,y:0};if(c){const f=n.get(c);u=Fr(f,o).positionAbsolute}const d=l&&l!=="parent"?_d(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function tc({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const lh=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const s=Array.from(o),i=t.getBoundingClientRect(),l={x:i.width*r[0],y:i.height*r[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-l.x)/n,y:(u.top-i.top-l.y)/n,...bd(c)}})};function us(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function hu({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",Hn.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):o([e])}function P2(){const e=Ke();return y.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:s}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,c={x:(i-r[0])/r[2],y:(l-r[1])/r[2]};return{xSnapped:s?o[0]*Math.round(c.x/o[0]):c.x,ySnapped:s?o[1]*Math.round(c.y/o[1]):c.y,...c}},[])}function nc(e){return(t,n,r)=>e==null?void 0:e(t,r)}function hx({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,selectNodesOnDrag:i}){const l=Ke(),[c,u]=y.useState(!1),d=y.useRef([]),f=y.useRef({x:null,y:null}),p=y.useRef(0),m=y.useRef(null),g=y.useRef({x:0,y:0}),w=y.useRef(null),b=y.useRef(!1),h=y.useRef(!1),x=y.useRef(!1),_=P2();return y.useEffect(()=>{if(e!=null&&e.current){const v=Yt(e.current),k=({x:$,y:R})=>{const{nodeInternals:C,onNodeDrag:L,onSelectionDrag:W,updateNodePositions:U,nodeExtent:S,snapGrid:z,snapToGrid:P,nodeOrigin:H,onError:M}=l.getState();f.current={x:$,y:R};let j=!1,D={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&S){const B=ma(d.current,H);D=Js(B)}if(d.current=d.current.map(B=>{const Q={x:$-B.distance.x,y:R-B.distance.y};P&&(Q.x=z[0]*Math.round(Q.x/z[0]),Q.y=z[1]*Math.round(Q.y/z[1]));const X=[[S[0][0],S[0][1]],[S[1][0],S[1][1]]];d.current.length>1&&S&&!B.extent&&(X[0][0]=B.positionAbsolute.x-D.x+S[0][0],X[1][0]=B.positionAbsolute.x+(B.width??0)-D.x2+S[1][0],X[0][1]=B.positionAbsolute.y-D.y+S[0][1],X[1][1]=B.positionAbsolute.y+(B.height??0)-D.y2+S[1][1]);const re=px(B,Q,C,X,H,M);return j=j||B.position.x!==re.position.x||B.position.y!==re.position.y,B.position=re.position,B.positionAbsolute=re.positionAbsolute,B}),!j)return;U(d.current,!0,!0),u(!0);const F=o?L:nc(W);if(F&&w.current){const[B,Q]=tc({nodeId:o,dragItems:d.current,nodeInternals:C});F(w.current,B,Q)}},E=()=>{if(!m.current)return;const[$,R]=$g(g.current,m.current);if($!==0||R!==0){const{transform:C,panBy:L}=l.getState();f.current.x=(f.current.x??0)-$/C[2],f.current.y=(f.current.y??0)-R/C[2],L({x:$,y:R})&&k(f.current)}p.current=requestAnimationFrame(E)},T=$=>{var H;const{nodeInternals:R,multiSelectionActive:C,nodesDraggable:L,unselectNodesAndEdges:W,onNodeDragStart:U,onSelectionDragStart:S}=l.getState();h.current=!0;const z=o?U:nc(S);(!i||!s)&&!C&&o&&((H=R.get(o))!=null&&H.selected||W()),o&&s&&i&&hu({id:o,store:l,nodeRef:e});const P=_($);if(f.current=P,d.current=E2(R,L,P,o),z&&d.current){const[M,j]=tc({nodeId:o,dragItems:d.current,nodeInternals:R});z($.sourceEvent,M,j)}};if(t)v.on(".drag",null);else{const $=Hb().on("start",R=>{const{domNode:C,nodeDragThreshold:L}=l.getState();L===0&&T(R),x.current=!1;const W=_(R);f.current=W,m.current=(C==null?void 0:C.getBoundingClientRect())||null,g.current=pr(R.sourceEvent,m.current)}).on("drag",R=>{var U,S;const C=_(R),{autoPanOnNodeDrag:L,nodeDragThreshold:W}=l.getState();if(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1&&(x.current=!0),!x.current){if(!b.current&&h.current&&L&&(b.current=!0,E()),!h.current){const z=C.xSnapped-(((U=f==null?void 0:f.current)==null?void 0:U.x)??0),P=C.ySnapped-(((S=f==null?void 0:f.current)==null?void 0:S.y)??0);Math.sqrt(z*z+P*P)>W&&T(R)}(f.current.x!==C.xSnapped||f.current.y!==C.ySnapped)&&d.current&&h.current&&(w.current=R.sourceEvent,g.current=pr(R.sourceEvent,m.current),k(C))}}).on("end",R=>{if(!(!h.current||x.current)&&(u(!1),b.current=!1,h.current=!1,cancelAnimationFrame(p.current),d.current)){const{updateNodePositions:C,nodeInternals:L,onNodeDragStop:W,onSelectionDragStop:U}=l.getState(),S=o?W:nc(U);if(C(d.current,!1,!1),S){const[z,P]=tc({nodeId:o,dragItems:d.current,nodeInternals:L});S(R.sourceEvent,z,P)}}}).filter(R=>{const C=R.target;return!R.button&&(!n||!ih(C,`.${n}`,e))&&(!r||ih(C,r,e))});return v.call($),()=>{v.on(".drag",null)}}}},[e,t,n,r,s,l,o,i,_]),c}function mx(){const e=Ke();return y.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:s,getNodes:i,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(x=>x.selected&&(x.draggable||d&&typeof x.draggable>"u")),p=l?c[0]:5,m=l?c[1]:5,g=n.isShiftPressed?4:1,w=n.x*p*g,b=n.y*m*g,h=f.map(x=>{if(x.positionAbsolute){const _={x:x.positionAbsolute.x+w,y:x.positionAbsolute.y+b};l&&(_.x=c[0]*Math.round(_.x/c[0]),_.y=c[1]*Math.round(_.y/c[1]));const{positionAbsolute:v,position:k}=px(x,_,r,o,void 0,u);x.position=k,x.positionAbsolute=v}return x});s(h,!0,!1)},[])}const $o={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ds=e=>{const t=({id:n,type:r,data:o,xPos:s,yPos:i,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:p,onMouseLeave:m,onContextMenu:g,onDoubleClick:w,style:b,className:h,isDraggable:x,isSelectable:_,isConnectable:v,isFocusable:k,selectNodesOnDrag:E,sourcePosition:T,targetPosition:$,hidden:R,resizeObserver:C,dragHandle:L,zIndex:W,isParent:U,noDragClassName:S,noPanClassName:z,initialized:P,disableKeyboardA11y:H,ariaLabel:M,rfId:j,hasHandleBounds:D})=>{const F=Ke(),B=y.useRef(null),Q=y.useRef(null),X=y.useRef(T),re=y.useRef($),Y=y.useRef(r),se=_||x||d||f||p||m,V=mx(),G=us(n,F.getState,f),J=us(n,F.getState,p),ue=us(n,F.getState,m),ae=us(n,F.getState,g),Pe=us(n,F.getState,w),_e=ge=>{const{nodeDragThreshold:ee}=F.getState();if(_&&(!E||!x||ee>0)&&hu({id:n,store:F,nodeRef:B}),d){const Ne=F.getState().nodeInternals.get(n);Ne&&d(ge,{...Ne})}},ke=ge=>{if(!cu(ge)&&!H)if(Lg.includes(ge.key)&&_){const ee=ge.key==="Escape";hu({id:n,store:F,unselect:ee,nodeRef:B})}else x&&u&&Object.prototype.hasOwnProperty.call($o,ge.key)&&(F.setState({ariaLiveMessage:`Moved selected node ${ge.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),V({x:$o[ge.key].x,y:$o[ge.key].y,isShiftPressed:ge.shiftKey}))};y.useEffect(()=>()=>{Q.current&&(C==null||C.unobserve(Q.current),Q.current=null)},[]),y.useEffect(()=>{if(B.current&&!R){const ge=B.current;(!P||!D||Q.current!==ge)&&(Q.current&&(C==null||C.unobserve(Q.current)),C==null||C.observe(ge),Q.current=ge)}},[R,P,D]),y.useEffect(()=>{const ge=Y.current!==r,ee=X.current!==T,Ne=re.current!==$;B.current&&(ge||ee||Ne)&&(ge&&(Y.current=r),ee&&(X.current=T),Ne&&(re.current=$),F.getState().updateNodeDimensions([{id:n,nodeElement:B.current,forceUpdate:!0}]))},[n,r,T,$]);const Ge=hx({nodeRef:B,disabled:R||!x,noDragClassName:S,handleSelector:L,nodeId:n,isSelectable:_,selectNodesOnDrag:E});return R?null:O.createElement("div",{className:at(["react-flow__node",`react-flow__node-${r}`,{[z]:x},h,{selected:u,selectable:_,parent:U,dragging:Ge}]),ref:B,style:{zIndex:W,transform:`translate(${l}px,${c}px)`,pointerEvents:se?"all":"none",visibility:P?"visible":"hidden",...b},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:G,onMouseMove:J,onMouseLeave:ue,onContextMenu:ae,onClick:_e,onDoubleClick:Pe,onKeyDown:k?ke:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":H?void 0:`${ox}-${j}`,"aria-label":M},O.createElement(VN,{value:n},O.createElement(e,{id:n,data:o,type:r,xPos:s,yPos:i,selected:u,isConnectable:v,sourcePosition:T,targetPosition:$,dragging:Ge,dragHandle:L,zIndex:W})))};return t.displayName="NodeWrapper",y.memo(t)};const T2=e=>{const t=e.getNodes().filter(n=>n.selected);return{...ma(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function M2({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ke(),{width:o,height:s,x:i,y:l,transformString:c,userSelectionActive:u}=Ce(T2,rt),d=mx(),f=y.useRef(null);if(y.useEffect(()=>{var g;n||(g=f.current)==null||g.focus({preventScroll:!0})},[n]),hx({nodeRef:f}),u||!o||!s)return null;const p=e?g=>{const w=r.getState().getNodes().filter(b=>b.selected);e(g,w)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call($o,g.key)&&d({x:$o[g.key].x,y:$o[g.key].y,isShiftPressed:g.shiftKey})};return O.createElement("div",{className:at(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},O.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:o,height:s,top:l,left:i}}))}var I2=y.memo(M2);const $2=e=>e.nodesSelectionActive,gx=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:p,selectionMode:m,onSelectionStart:g,onSelectionEnd:w,multiSelectionKeyCode:b,panActivationKeyCode:h,zoomActivationKeyCode:x,elementsSelectable:_,zoomOnScroll:v,zoomOnPinch:k,panOnScroll:E,panOnScrollSpeed:T,panOnScrollMode:$,zoomOnDoubleClick:R,panOnDrag:C,defaultViewport:L,translateExtent:W,minZoom:U,maxZoom:S,preventScrolling:z,onSelectionContextMenu:P,noWheelClassName:H,noPanClassName:M,disableKeyboardA11y:j})=>{const D=Ce($2),F=qs(f),B=qs(h),Q=B||C,X=B||E,re=F||p&&Q!==!0;return y2({deleteKeyCode:l,multiSelectionKeyCode:b}),O.createElement(_2,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:v,zoomOnPinch:k,panOnScroll:X,panOnScrollSpeed:T,panOnScrollMode:$,zoomOnDoubleClick:R,panOnDrag:!F&&Q,defaultViewport:L,translateExtent:W,minZoom:U,maxZoom:S,zoomActivationKeyCode:x,preventScrolling:z,noWheelClassName:H,noPanClassName:M},O.createElement(dx,{onSelectionStart:g,onSelectionEnd:w,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:Q,isSelecting:!!re,selectionMode:m},e,D&&O.createElement(I2,{onSelectionContextMenu:P,noPanClassName:M,disableKeyboardA11y:j})))};gx.displayName="FlowRenderer";var D2=y.memo(gx);function R2(e){return Ce(y.useCallback(n=>e?Wg(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function z2(e){const t={input:ds(e.input||ex),default:ds(e.default||pu),output:ds(e.output||nx),group:ds(e.group||Cd)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,s)=>(o[s]=ds(e[s]||pu),o),n);return{...t,...r}}const L2=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},A2=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),xx=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:s,onError:i}=Ce(A2,rt),l=R2(e.onlyRenderVisibleElements),c=y.useRef(),u=y.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const p=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(p)});return c.current=d,d},[]);return y.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),O.createElement("div",{className:"react-flow__nodes",style:Pd},l.map(d=>{var k,E,T;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",Hn.error003(f)),f="default");const p=e.nodeTypes[f]||e.nodeTypes.default,m=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||o&&typeof d.selectable>"u"),w=!!(d.connectable||n&&typeof d.connectable>"u"),b=!!(d.focusable||r&&typeof d.focusable>"u"),h=e.nodeExtent?_d(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,x=(h==null?void 0:h.x)??0,_=(h==null?void 0:h.y)??0,v=L2({x,y:_,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return O.createElement(p,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||oe.Bottom,targetPosition:d.targetPosition||oe.Top,hidden:d.hidden,xPos:x,yPos:_,xPosOrigin:v.x,yPosOrigin:v.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:g,isConnectable:w,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((k=d[He])==null?void 0:k.z)??0,isParent:!!((E=d[He])!=null&&E.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((T=d[He])!=null&&T.handleBounds)})}))};xx.displayName="NodeRenderer";var O2=y.memo(xx);const F2=(e,t,n)=>n===oe.Left?e-t:n===oe.Right?e+t:e,H2=(e,t,n)=>n===oe.Top?e-t:n===oe.Bottom?e+t:e,ah="react-flow__edgeupdater",ch=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:s,onMouseOut:i,type:l})=>O.createElement("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:i,className:at([ah,`${ah}-${l}`]),cx:F2(t,r,e),cy:H2(n,r,e),r,stroke:"transparent",fill:"transparent"}),B2=()=>!0;var lo=e=>{const t=({id:n,className:r,type:o,data:s,onClick:i,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:w,style:b,source:h,target:x,sourceX:_,sourceY:v,targetX:k,targetY:E,sourcePosition:T,targetPosition:$,elementsSelectable:R,hidden:C,sourceHandleId:L,targetHandleId:W,onContextMenu:U,onMouseEnter:S,onMouseMove:z,onMouseLeave:P,reconnectRadius:H,onReconnect:M,onReconnectStart:j,onReconnectEnd:D,markerEnd:F,markerStart:B,rfId:Q,ariaLabel:X,isFocusable:re,isReconnectable:Y,pathOptions:se,interactionWidth:V,disableKeyboardA11y:G})=>{const J=y.useRef(null),[ue,ae]=y.useState(!1),[Pe,_e]=y.useState(!1),ke=Ke(),Ge=y.useMemo(()=>`url('#${du(B,Q)}')`,[B,Q]),ge=y.useMemo(()=>`url('#${du(F,Q)}')`,[F,Q]);if(C)return null;const ee=Be=>{var De;const{edges:ot,addSelectedEdges:St,unselectNodesAndEdges:tn,multiSelectionActive:Bt}=ke.getState(),Ze=ot.find(Re=>Re.id===n);Ze&&(R&&(ke.setState({nodesSelectionActive:!1}),Ze.selected&&Bt?(tn({nodes:[],edges:[Ze]}),(De=J.current)==null||De.blur()):St([n])),i&&i(Be,Ze))},Ne=cs(n,ke.getState,l),ct=cs(n,ke.getState,U),mn=cs(n,ke.getState,S),Je=cs(n,ke.getState,z),Zt=cs(n,ke.getState,P),$t=(Be,ot)=>{if(Be.button!==0)return;const{edges:St,isValidConnection:tn}=ke.getState(),Bt=ot?x:h,Ze=(ot?W:L)||null,De=ot?"target":"source",Re=tn||B2,nn=ot,kt=St.find(yt=>yt.id===n);_e(!0),j==null||j(Be,kt,De);const kn=yt=>{_e(!1),D==null||D(yt,kt,De)};Qg({event:Be,handleId:Ze,nodeId:Bt,onConnect:yt=>M==null?void 0:M(kt,yt),isTarget:nn,getState:ke.getState,setState:ke.setState,isValidConnection:Re,edgeUpdaterType:De,onReconnectEnd:kn})},qt=Be=>$t(Be,!0),$e=Be=>$t(Be,!1),Nt=()=>ae(!0),xt=()=>ae(!1),gn=!R&&!i,en=Be=>{var ot;if(!G&&Lg.includes(Be.key)&&R){const{unselectNodesAndEdges:St,addSelectedEdges:tn,edges:Bt}=ke.getState();Be.key==="Escape"?((ot=J.current)==null||ot.blur(),St({edges:[Bt.find(De=>De.id===n)]})):tn([n])}};return O.createElement("g",{className:at(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:c,animated:u,inactive:gn,updating:ue}]),onClick:ee,onDoubleClick:Ne,onContextMenu:ct,onMouseEnter:mn,onMouseMove:Je,onMouseLeave:Zt,onKeyDown:re?en:void 0,tabIndex:re?0:void 0,role:re?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":X===null?void 0:X||`Edge from ${h} to ${x}`,"aria-describedby":re?`${sx}-${Q}`:void 0,ref:J},!Pe&&O.createElement(e,{id:n,source:h,target:x,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:w,data:s,style:b,sourceX:_,sourceY:v,targetX:k,targetY:E,sourcePosition:T,targetPosition:$,sourceHandleId:L,targetHandleId:W,markerStart:Ge,markerEnd:ge,pathOptions:se,interactionWidth:V}),Y&&O.createElement(O.Fragment,null,(Y==="source"||Y===!0)&&O.createElement(ch,{position:T,centerX:_,centerY:v,radius:H,onMouseDown:qt,onMouseEnter:Nt,onMouseOut:xt,type:"source"}),(Y==="target"||Y===!0)&&O.createElement(ch,{position:$,centerX:k,centerY:E,radius:H,onMouseDown:$e,onMouseEnter:Nt,onMouseOut:xt,type:"target"})))};return t.displayName="EdgeWrapper",y.memo(t)};function U2(e){const t={default:lo(e.default||Vl),straight:lo(e.bezier||kd),step:lo(e.step||Sd),smoothstep:lo(e.step||ha),simplebezier:lo(e.simplebezier||Nd)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,s)=>(o[s]=lo(e[s]||Vl),o),n);return{...t,...r}}function uh(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case oe.Top:return{x:r+s/2,y:o};case oe.Right:return{x:r+s,y:o+i/2};case oe.Bottom:return{x:r+s/2,y:o+i};case oe.Left:return{x:r,y:o+i/2}}}function dh(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const V2=(e,t,n,r,o,s)=>{const i=uh(n,e,t),l=uh(s,r,o);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}};function W2({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:s,width:i,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=Js({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),p=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*p)>0}function fh(e){var r,o,s,i,l;const t=((r=e==null?void 0:e[He])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Y2=[{level:0,isMaxLevel:!0,edges:[]}];function K2(e,t,n=!1){let r=-1;const o=e.reduce((i,l)=>{var d,f;const c=Gt(l.zIndex);let u=c?l.zIndex:0;if(n){const p=t.get(l.target),m=t.get(l.source),g=l.selected||(p==null?void 0:p.selected)||(m==null?void 0:m.selected),w=Math.max(((d=m==null?void 0:m[He])==null?void 0:d.z)||0,((f=p==null?void 0:p[He])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(g?w:0)}return i[u]?i[u].push(l):i[u]=[l],r=u>r?u:r,i},{}),s=Object.entries(o).map(([i,l])=>{const c=+i;return{edges:l,level:c,isMaxLevel:c===r}});return s.length===0?Y2:s}function G2(e,t,n){const r=Ce(y.useCallback(o=>e?o.edges.filter(s=>{const i=t.get(s.source),l=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&W2({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:l.width,targetHeight:l.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return K2(r,t,n)}const X2=({color:e="none",strokeWidth:t=1})=>O.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Q2=({color:e="none",strokeWidth:t=1})=>O.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ph={[Xr.Arrow]:X2,[Xr.ArrowClosed]:Q2};function J2(e){const t=Ke();return y.useMemo(()=>{var o,s;return Object.prototype.hasOwnProperty.call(ph,e)?ph[e]:((s=(o=t.getState()).onError)==null||s.call(o,"009",Hn.error009(e)),null)},[e])}const Z2=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=J2(t);return c?O.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},O.createElement(c,{color:n,strokeWidth:i})):null},q2=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const l=du(i,t);r.includes(l)||(o.push({id:l,color:i.color||e,...i}),r.push(l))}}),o),[]).sort((o,s)=>o.id.localeCompare(s.id))},yx=({defaultColor:e,rfId:t})=>{const n=Ce(y.useCallback(q2({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((s,i)=>s.id!==o[i].id)));return O.createElement("defs",null,n.map(r=>O.createElement(Z2,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};yx.displayName="MarkerDefinitions";var eS=y.memo(yx);const tS=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),vx=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:w,children:b,disableKeyboardA11y:h})=>{const{edgesFocusable:x,edgesUpdatable:_,elementsSelectable:v,width:k,height:E,connectionMode:T,nodeInternals:$,onError:R}=Ce(tS,rt),C=G2(t,$,n);return k?O.createElement(O.Fragment,null,C.map(({level:L,edges:W,isMaxLevel:U})=>O.createElement("svg",{key:L,style:{zIndex:L},width:k,height:E,className:"react-flow__edges react-flow__container"},U&&O.createElement(eS,{defaultColor:e,rfId:r}),O.createElement("g",null,W.map(S=>{const[z,P,H]=fh($.get(S.source)),[M,j,D]=fh($.get(S.target));if(!H||!D)return null;let F=S.type||"default";o[F]||(R==null||R("011",Hn.error011(F)),F="default");const B=o[F]||o.default,Q=T===Gr.Strict?j.target:(j.target??[]).concat(j.source??[]),X=dh(P.source,S.sourceHandle),re=dh(Q,S.targetHandle),Y=(X==null?void 0:X.position)||oe.Bottom,se=(re==null?void 0:re.position)||oe.Top,V=!!(S.focusable||x&&typeof S.focusable>"u"),G=S.reconnectable||S.updatable,J=typeof p<"u"&&(G||_&&typeof G>"u");if(!X||!re)return R==null||R("008",Hn.error008(X,S)),null;const{sourceX:ue,sourceY:ae,targetX:Pe,targetY:_e}=V2(z,X,Y,M,re,se);return O.createElement(B,{key:S.id,id:S.id,className:at([S.className,s]),type:F,data:S.data,selected:!!S.selected,animated:!!S.animated,hidden:!!S.hidden,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,style:S.style,source:S.source,target:S.target,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerEnd:S.markerEnd,markerStart:S.markerStart,sourceX:ue,sourceY:ae,targetX:Pe,targetY:_e,sourcePosition:Y,targetPosition:se,elementsSelectable:v,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:w,rfId:r,ariaLabel:S.ariaLabel,isFocusable:V,isReconnectable:J,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth,disableKeyboardA11y:h})})))),b):null};vx.displayName="EdgeRenderer";var nS=y.memo(vx);const rS=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function oS({children:e}){const t=Ce(rS);return O.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function sS(e){const t=Qo(),n=y.useRef(!1);y.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const iS={[oe.Left]:oe.Right,[oe.Right]:oe.Left,[oe.Top]:oe.Bottom,[oe.Bottom]:oe.Top},wx=({nodeId:e,handleType:t,style:n,type:r=tr.Bezier,CustomComponent:o,connectionStatus:s})=>{var E,T,$;const{fromNode:i,handleId:l,toX:c,toY:u,connectionMode:d}=Ce(y.useCallback(R=>({fromNode:R.nodeInternals.get(e),handleId:R.connectionHandleId,toX:(R.connectionPosition.x-R.transform[0])/R.transform[2],toY:(R.connectionPosition.y-R.transform[1])/R.transform[2],connectionMode:R.connectionMode}),[e]),rt),f=(E=i==null?void 0:i[He])==null?void 0:E.handleBounds;let p=f==null?void 0:f[t];if(d===Gr.Loose&&(p=p||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!p)return null;const m=l?p.find(R=>R.id===l):p[0],g=m?m.x+m.width/2:(i.width??0)/2,w=m?m.y+m.height/2:i.height??0,b=(((T=i.positionAbsolute)==null?void 0:T.x)??0)+g,h=((($=i.positionAbsolute)==null?void 0:$.y)??0)+w,x=m==null?void 0:m.position,_=x?iS[x]:null;if(!x||!_)return null;if(o)return O.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:m,fromX:b,fromY:h,toX:c,toY:u,fromPosition:x,toPosition:_,connectionStatus:s});let v="";const k={sourceX:b,sourceY:h,sourcePosition:x,targetX:c,targetY:u,targetPosition:_};return r===tr.Bezier?[v]=Bg(k):r===tr.Step?[v]=uu({...k,borderRadius:0}):r===tr.SmoothStep?[v]=uu(k):r===tr.SimpleBezier?[v]=Hg(k):v=`M${b},${h} ${c},${u}`,O.createElement("path",{d:v,fill:"none",className:"react-flow__connection-path",style:n})};wx.displayName="ConnectionLine";const lS=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function aS({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:s,nodesConnectable:i,width:l,height:c,connectionStatus:u}=Ce(lS,rt);return!(o&&s&&l&&i)?null:O.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},O.createElement("g",{className:at(["react-flow__connection",u])},O.createElement(wx,{nodeId:o,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function hh(e,t){return y.useRef(null),Ke(),y.useMemo(()=>t(e),[e])}const bx=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:s,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:w,onSelectionEnd:b,connectionLineType:h,connectionLineStyle:x,connectionLineComponent:_,connectionLineContainerStyle:v,selectionKeyCode:k,selectionOnDrag:E,selectionMode:T,multiSelectionKeyCode:$,panActivationKeyCode:R,zoomActivationKeyCode:C,deleteKeyCode:L,onlyRenderVisibleElements:W,elementsSelectable:U,selectNodesOnDrag:S,defaultViewport:z,translateExtent:P,minZoom:H,maxZoom:M,preventScrolling:j,defaultMarkerColor:D,zoomOnScroll:F,zoomOnPinch:B,panOnScroll:Q,panOnScrollSpeed:X,panOnScrollMode:re,zoomOnDoubleClick:Y,panOnDrag:se,onPaneClick:V,onPaneMouseEnter:G,onPaneMouseMove:J,onPaneMouseLeave:ue,onPaneScroll:ae,onPaneContextMenu:Pe,onEdgeContextMenu:_e,onEdgeMouseEnter:ke,onEdgeMouseMove:Ge,onEdgeMouseLeave:ge,onReconnect:ee,onReconnectStart:Ne,onReconnectEnd:ct,reconnectRadius:mn,noDragClassName:Je,noWheelClassName:Zt,noPanClassName:$t,elevateEdgesOnSelect:qt,disableKeyboardA11y:$e,nodeOrigin:Nt,nodeExtent:xt,rfId:gn})=>{const en=hh(e,z2),Be=hh(t,U2);return sS(s),O.createElement(D2,{onPaneClick:V,onPaneMouseEnter:G,onPaneMouseMove:J,onPaneMouseLeave:ue,onPaneContextMenu:Pe,onPaneScroll:ae,deleteKeyCode:L,selectionKeyCode:k,selectionOnDrag:E,selectionMode:T,onSelectionStart:w,onSelectionEnd:b,multiSelectionKeyCode:$,panActivationKeyCode:R,zoomActivationKeyCode:C,elementsSelectable:U,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:F,zoomOnPinch:B,zoomOnDoubleClick:Y,panOnScroll:Q,panOnScrollSpeed:X,panOnScrollMode:re,panOnDrag:se,defaultViewport:z,translateExtent:P,minZoom:H,maxZoom:M,onSelectionContextMenu:g,preventScrolling:j,noDragClassName:Je,noWheelClassName:Zt,noPanClassName:$t,disableKeyboardA11y:$e},O.createElement(oS,null,O.createElement(nS,{edgeTypes:Be,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:W,onEdgeContextMenu:_e,onEdgeMouseEnter:ke,onEdgeMouseMove:Ge,onEdgeMouseLeave:ge,onReconnect:ee,onReconnectStart:Ne,onReconnectEnd:ct,reconnectRadius:mn,defaultMarkerColor:D,noPanClassName:$t,elevateEdgesOnSelect:!!qt,disableKeyboardA11y:$e,rfId:gn},O.createElement(aS,{style:x,type:h,component:_,containerStyle:v})),O.createElement("div",{className:"react-flow__edgelabel-renderer"}),O.createElement(O2,{nodeTypes:en,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:m,selectNodesOnDrag:S,onlyRenderVisibleElements:W,noPanClassName:$t,noDragClassName:Je,disableKeyboardA11y:$e,nodeOrigin:Nt,nodeExtent:xt,rfId:gn})))};bx.displayName="GraphView";var cS=y.memo(bx);const mu=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Kn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:mu,nodeExtent:mu,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Gr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:AN,isValidConnection:void 0},uS=()=>qw((e,t)=>({...Kn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:s}=t();e({nodeInternals:qa(n,r,o,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",s=typeof r<"u",i=o?qa(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?r:[],hasDefaultNodes:o,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:p}=new window.DOMMatrixReadOnly(f.transform),m=n.reduce((w,b)=>{const h=o.get(b.id);if(h!=null&&h.hidden)o.set(h.id,{...h,[He]:{...h[He],handleBounds:void 0}});else if(h){const x=bd(b.nodeElement);!!(x.width&&x.height&&(h.width!==x.width||h.height!==x.height||b.forceUpdate))&&(o.set(h.id,{...h,[He]:{...h[He],handleBounds:{source:lh(".source",b.nodeElement,p,u),target:lh(".target",b.nodeElement,p,u)}},...x}),w.push({id:h.id,type:"dimensions",dimensions:x}))}return w},[]);lx(o,u);const g=i||s&&!i&&ax(t,{initial:!0,...l});e({nodeInternals:new Map(o),fitViewOnInitDone:g}),(m==null?void 0:m.length)>0&&(r==null||r(m))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:s}=t(),i=n.map(l=>{const c={id:l.id,type:"position",dragging:o};return r&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});s(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:s,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(s){const u=ux(n,l()),d=qa(u,o,i,c);e({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,l=null;r?i=n.map(c=>Zn(c,!0)):(i=So(s(),n),l=So(o,[])),Gi({changedNodes:i,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,l=null;r?i=n.map(c=>Zn(c,!0)):(i=So(o,n),l=So(s(),[])),Gi({changedNodes:l,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:s}=t(),i=n||s(),l=r||o,c=i.map(d=>(d.selected=!1,Zn(d.id,!1))),u=l.map(d=>Zn(d.id,!1));Gi({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(l=>l.selected).map(l=>Zn(l.id,!1)),i=n.filter(l=>l.selected).map(l=>Zn(l.id,!1));Gi({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=_d(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:s,d3Zoom:i,d3Selection:l,translateExtent:c}=t();if(!i||!l||!n.x&&!n.y)return!1;const u=$n.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[o,s]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(l,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Kn.connectionNodeId,connectionHandleId:Kn.connectionHandleId,connectionHandleType:Kn.connectionHandleType,connectionStatus:Kn.connectionStatus,connectionStartHandle:Kn.connectionStartHandle,connectionEndHandle:Kn.connectionEndHandle}),reset:()=>e({...Kn})}),Object.is),ga=({children:e})=>{const t=y.useRef(null);return t.current||(t.current=uS()),O.createElement(MN,{value:t.current},e)};ga.displayName="ReactFlowProvider";const _x=({children:e})=>y.useContext(pa)?O.createElement(O.Fragment,null,e):O.createElement(ga,null,e);_x.displayName="ReactFlowWrapper";const dS={input:ex,default:pu,output:nx,group:Cd},fS={default:Vl,straight:kd,step:Sd,smoothstep:ha,simplebezier:Nd},pS=[0,0],hS=[15,15],mS={x:0,y:0,zoom:1},gS={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Nx=y.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:s=dS,edgeTypes:i=fS,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:p,onConnect:m,onConnectStart:g,onConnectEnd:w,onClickConnectStart:b,onClickConnectEnd:h,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:v,onNodeContextMenu:k,onNodeDoubleClick:E,onNodeDragStart:T,onNodeDrag:$,onNodeDragStop:R,onNodesDelete:C,onEdgesDelete:L,onSelectionChange:W,onSelectionDragStart:U,onSelectionDrag:S,onSelectionDragStop:z,onSelectionContextMenu:P,onSelectionStart:H,onSelectionEnd:M,connectionMode:j=Gr.Strict,connectionLineType:D=tr.Bezier,connectionLineStyle:F,connectionLineComponent:B,connectionLineContainerStyle:Q,deleteKeyCode:X="Backspace",selectionKeyCode:re="Shift",selectionOnDrag:Y=!1,selectionMode:se=Zs.Full,panActivationKeyCode:V="Space",multiSelectionKeyCode:G=Ul()?"Meta":"Control",zoomActivationKeyCode:J=Ul()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:ae=hS,onlyRenderVisibleElements:Pe=!1,selectNodesOnDrag:_e=!0,nodesDraggable:ke,nodesConnectable:Ge,nodesFocusable:ge,nodeOrigin:ee=pS,edgesFocusable:Ne,edgesUpdatable:ct,elementsSelectable:mn,defaultViewport:Je=mS,minZoom:Zt=.5,maxZoom:$t=2,translateExtent:qt=mu,preventScrolling:$e=!0,nodeExtent:Nt,defaultMarkerColor:xt="#b1b1b7",zoomOnScroll:gn=!0,zoomOnPinch:en=!0,panOnScroll:Be=!1,panOnScrollSpeed:ot=.5,panOnScrollMode:St=Dr.Free,zoomOnDoubleClick:tn=!0,panOnDrag:Bt=!0,onPaneClick:Ze,onPaneMouseEnter:De,onPaneMouseMove:Re,onPaneMouseLeave:nn,onPaneScroll:kt,onPaneContextMenu:kn,children:Ut,onEdgeContextMenu:yt,onEdgeDoubleClick:_r,onEdgeMouseEnter:Zr,onEdgeMouseMove:qr,onEdgeMouseLeave:I,onEdgeUpdate:A,onEdgeUpdateStart:Z,onEdgeUpdateEnd:ie,onReconnect:le,onReconnectStart:de,onReconnectEnd:ye,reconnectRadius:xe=10,edgeUpdaterRadius:he=10,onNodesChange:fe,onEdgesChange:jt,noDragClassName:qe="nodrag",noWheelClassName:ut="nowheel",noPanClassName:Un="nopan",fitView:hi=!1,fitViewOptions:Vn,connectOnClick:Nr=!0,attributionPosition:Sr,proOptions:Wn,defaultEdgeOptions:eo,elevateNodesOnSelect:mi=!0,elevateEdgesOnSelect:ya=!1,disableKeyboardA11y:gi=!1,autoPanOnConnect:va=!0,autoPanOnNodeDrag:to=!0,connectionRadius:xi=20,isValidConnection:yi,onError:vi,style:wi,id:Zo,nodeDragThreshold:bi,..._i},Ni)=>{const no=Zo||"1";return O.createElement("div",{..._i,style:{...wi,...gS},ref:Ni,className:at(["react-flow",o]),"data-testid":"rf__wrapper",id:Zo},O.createElement(_x,null,O.createElement(cS,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:p,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:v,onNodeContextMenu:k,onNodeDoubleClick:E,nodeTypes:s,edgeTypes:i,connectionLineType:D,connectionLineStyle:F,connectionLineComponent:B,connectionLineContainerStyle:Q,selectionKeyCode:re,selectionOnDrag:Y,selectionMode:se,deleteKeyCode:X,multiSelectionKeyCode:G,panActivationKeyCode:V,zoomActivationKeyCode:J,onlyRenderVisibleElements:Pe,selectNodesOnDrag:_e,defaultViewport:Je,translateExtent:qt,minZoom:Zt,maxZoom:$t,preventScrolling:$e,zoomOnScroll:gn,zoomOnPinch:en,zoomOnDoubleClick:tn,panOnScroll:Be,panOnScrollSpeed:ot,panOnScrollMode:St,panOnDrag:Bt,onPaneClick:Ze,onPaneMouseEnter:De,onPaneMouseMove:Re,onPaneMouseLeave:nn,onPaneScroll:kt,onPaneContextMenu:kn,onSelectionContextMenu:P,onSelectionStart:H,onSelectionEnd:M,onEdgeContextMenu:yt,onEdgeDoubleClick:_r,onEdgeMouseEnter:Zr,onEdgeMouseMove:qr,onEdgeMouseLeave:I,onReconnect:le??A,onReconnectStart:de??Z,onReconnectEnd:ye??ie,reconnectRadius:xe??he,defaultMarkerColor:xt,noDragClassName:qe,noWheelClassName:ut,noPanClassName:Un,elevateEdgesOnSelect:ya,rfId:no,disableKeyboardA11y:gi,nodeOrigin:ee,nodeExtent:Nt}),O.createElement(i2,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:g,onConnectEnd:w,onClickConnectStart:b,onClickConnectEnd:h,nodesDraggable:ke,nodesConnectable:Ge,nodesFocusable:ge,edgesFocusable:Ne,edgesUpdatable:ct,elementsSelectable:mn,elevateNodesOnSelect:mi,minZoom:Zt,maxZoom:$t,nodeExtent:Nt,onNodesChange:fe,onEdgesChange:jt,snapToGrid:ue,snapGrid:ae,connectionMode:j,translateExtent:qt,connectOnClick:Nr,defaultEdgeOptions:eo,fitView:hi,fitViewOptions:Vn,onNodesDelete:C,onEdgesDelete:L,onNodeDragStart:T,onNodeDrag:$,onNodeDragStop:R,onSelectionDrag:S,onSelectionDragStart:U,onSelectionDragStop:z,noPanClassName:Un,nodeOrigin:ee,rfId:no,autoPanOnConnect:va,autoPanOnNodeDrag:to,onError:vi,connectionRadius:xi,isValidConnection:yi,nodeDragThreshold:bi}),O.createElement(o2,{onSelectionChange:W}),Ut,O.createElement($N,{proOptions:Wn,position:Sr}),O.createElement(d2,{rfId:no,disableKeyboardA11y:gi})))});Nx.displayName="ReactFlow";function xS(){const e=Ke();return y.useCallback(t=>{const{domNode:n,updateNodeDimensions:r}=e.getState(),s=(Array.isArray(t)?t:[t]).reduce((i,l)=>{const c=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${l}"]`);return c&&i.push({id:l,nodeElement:c,forceUpdate:!0}),i},[]);requestAnimationFrame(()=>r(s))},[])}const Sx=({id:e,x:t,y:n,width:r,height:o,style:s,color:i,strokeColor:l,strokeWidth:c,className:u,borderRadius:d,shapeRendering:f,onClick:p,selected:m})=>{const{background:g,backgroundColor:w}=s||{},b=i||g||w;return O.createElement("rect",{className:at(["react-flow__minimap-node",{selected:m},u]),x:t,y:n,rx:d,ry:d,width:r,height:o,fill:b,stroke:l,strokeWidth:c,shapeRendering:f,onClick:p?h=>p(h,e):void 0})};Sx.displayName="MiniMapNode";var yS=y.memo(Sx);const vS=e=>e.nodeOrigin,wS=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),rc=e=>e instanceof Function?e:()=>e;function bS({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:s=yS,onClick:i}){const l=Ce(wS,rt),c=Ce(vS),u=rc(t),d=rc(e),f=rc(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return O.createElement(O.Fragment,null,l.map(m=>{const{x:g,y:w}=Fr(m,c).positionAbsolute;return O.createElement(s,{key:m.id,x:g,y:w,width:m.width,height:m.height,style:m.style,selected:m.selected,className:f(m),color:u(m),borderRadius:r,strokeColor:d(m),strokeWidth:o,shapeRendering:p,onClick:i,id:m.id})}))}var _S=y.memo(bS);const NS=200,SS=150,kS=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?zN(ma(t,e.nodeOrigin),n):n,rfId:e.rfId}},jS="react-flow__minimap-desc";function kx({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:i=2,nodeComponent:l,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:d=1,position:f="bottom-right",onClick:p,onNodeClick:m,pannable:g=!1,zoomable:w=!1,ariaLabel:b="React Flow mini map",inversePan:h=!1,zoomStep:x=10,offsetScale:_=5}){const v=Ke(),k=y.useRef(null),{boundingRect:E,viewBB:T,rfId:$}=Ce(kS,rt),R=(e==null?void 0:e.width)??NS,C=(e==null?void 0:e.height)??SS,L=E.width/R,W=E.height/C,U=Math.max(L,W),S=U*R,z=U*C,P=_*U,H=E.x-(S-E.width)/2-P,M=E.y-(z-E.height)/2-P,j=S+P*2,D=z+P*2,F=`${jS}-${$}`,B=y.useRef(0);B.current=U,y.useEffect(()=>{if(k.current){const re=Yt(k.current),Y=G=>{const{transform:J,d3Selection:ue,d3Zoom:ae}=v.getState();if(G.sourceEvent.type!=="wheel"||!ue||!ae)return;const Pe=-G.sourceEvent.deltaY*(G.sourceEvent.deltaMode===1?.05:G.sourceEvent.deltaMode?1:.002)*x,_e=J[2]*Math.pow(2,Pe);ae.scaleTo(ue,_e)},se=G=>{const{transform:J,d3Selection:ue,d3Zoom:ae,translateExtent:Pe,width:_e,height:ke}=v.getState();if(G.sourceEvent.type!=="mousemove"||!ue||!ae)return;const Ge=B.current*Math.max(1,J[2])*(h?-1:1),ge={x:J[0]-G.sourceEvent.movementX*Ge,y:J[1]-G.sourceEvent.movementY*Ge},ee=[[0,0],[_e,ke]],Ne=$n.translate(ge.x,ge.y).scale(J[2]),ct=ae.constrain()(Ne,ee,Pe);ae.transform(ue,ct)},V=Mg().on("zoom",g?se:null).on("zoom.wheel",w?Y:null);return re.call(V),()=>{re.on("zoom",null)}}},[g,w,h,x]);const Q=p?re=>{const Y=ln(re);p(re,{x:Y[0],y:Y[1]})}:void 0,X=m?(re,Y)=>{const se=v.getState().nodeInternals.get(Y);m(re,se)}:void 0;return O.createElement(wd,{position:f,style:e,className:at(["react-flow__minimap",t]),"data-testid":"rf__minimap"},O.createElement("svg",{width:R,height:C,viewBox:`${H} ${M} ${j} ${D}`,role:"img","aria-labelledby":F,ref:k,onClick:Q},b&&O.createElement("title",{id:F},b),O.createElement(_S,{onClick:X,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:l}),O.createElement("path",{className:"react-flow__minimap-mask",d:`M${H-P},${M-P}h${j+P*2}v${D+P*2}h${-j-P*2}z
        M${T.x},${T.y}h${T.width}v${T.height}h${-T.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:d,pointerEvents:"none"})))}kx.displayName="MiniMap";var ES=y.memo(kx);function CS(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},O.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function PS(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},O.createElement("path",{d:"M0 0h32v4.2H0z"}))}function TS(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},O.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function MS(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},O.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function IS(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},O.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const wn=({children:e,className:t,...n})=>O.createElement("button",{type:"button",className:at(["react-flow__controls-button",t]),...n},e);wn.displayName="ControlButton";const $S=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),jx=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const p=Ke(),[m,g]=y.useState(!1),{isInteractive:w,minZoomReached:b,maxZoomReached:h}=Ce($S,rt),{zoomIn:x,zoomOut:_,fitView:v}=Qo();if(y.useEffect(()=>{g(!0)},[]),!m)return null;const k=()=>{x(),s==null||s()},E=()=>{_(),i==null||i()},T=()=>{v(o),l==null||l()},$=()=>{p.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),c==null||c(!w)};return O.createElement(wd,{className:at(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&O.createElement(O.Fragment,null,O.createElement(wn,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:h},O.createElement(CS,null)),O.createElement(wn,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},O.createElement(PS,null))),n&&O.createElement(wn,{className:"react-flow__controls-fitview",onClick:T,title:"fit view","aria-label":"fit view"},O.createElement(TS,null)),r&&O.createElement(wn,{className:"react-flow__controls-interactive",onClick:$,title:"toggle interactivity","aria-label":"toggle interactivity"},w?O.createElement(IS,null):O.createElement(MS,null)),d)};jx.displayName="Controls";var DS=y.memo(jx),fn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(fn||(fn={}));function RS({color:e,dimensions:t,lineWidth:n}){return O.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function zS({color:e,radius:t}){return O.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const LS={[fn.Dots]:"#91919a",[fn.Lines]:"#eee",[fn.Cross]:"#e2e2e2"},AS={[fn.Dots]:1,[fn.Lines]:1,[fn.Cross]:6},OS=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ex({id:e,variant:t=fn.Dots,gap:n=20,size:r,lineWidth:o=1,offset:s=2,color:i,style:l,className:c}){const u=y.useRef(null),{transform:d,patternId:f}=Ce(OS,rt),p=i||LS[t],m=r||AS[t],g=t===fn.Dots,w=t===fn.Cross,b=Array.isArray(n)?n:[n,n],h=[b[0]*d[2]||1,b[1]*d[2]||1],x=m*d[2],_=w?[x,x]:h,v=g?[x/s,x/s]:[_[0]/s,_[1]/s];return O.createElement("svg",{className:at(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},O.createElement("pattern",{id:f+e,x:d[0]%h[0],y:d[1]%h[1],width:h[0],height:h[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${v[0]},-${v[1]})`},g?O.createElement(zS,{color:p,radius:x/s}):O.createElement(RS,{dimensions:_,color:p,lineWidth:o})),O.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Ex.displayName="Background";var FS=y.memo(Ex);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ei(){return ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ei.apply(this,arguments)}var or;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(or||(or={}));const mh="popstate";function HS(e){e===void 0&&(e={});function t(r,o){let{pathname:s,search:i,hash:l}=r.location;return gu("",{pathname:s,search:i,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Px(o)}return US(t,n,null,e)}function Ye(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Cx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function BS(){return Math.random().toString(36).substr(2,8)}function gh(e,t){return{usr:e.state,key:e.key,idx:t}}function gu(e,t,n,r){return n===void 0&&(n=null),ei({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Jo(t):t,{state:n,key:t&&t.key||r||BS()})}function Px(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Jo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function US(e,t,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:s=!1}=r,i=o.history,l=or.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(ei({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){l=or.Pop;let b=d(),h=b==null?null:b-u;u=b,c&&c({action:l,location:w.location,delta:h})}function p(b,h){l=or.Push;let x=gu(w.location,b,h);u=d()+1;let _=gh(x,u),v=w.createHref(x);try{i.pushState(_,"",v)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;o.location.assign(v)}s&&c&&c({action:l,location:w.location,delta:1})}function m(b,h){l=or.Replace;let x=gu(w.location,b,h);u=d();let _=gh(x,u),v=w.createHref(x);i.replaceState(_,"",v),s&&c&&c({action:l,location:w.location,delta:0})}function g(b){let h=o.location.origin!=="null"?o.location.origin:o.location.href,x=typeof b=="string"?b:Px(b);return x=x.replace(/ $/,"%20"),Ye(h,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,h)}let w={get action(){return l},get location(){return e(o,i)},listen(b){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(mh,f),c=b,()=>{o.removeEventListener(mh,f),c=null}},createHref(b){return t(o,b)},createURL:g,encodeLocation(b){let h=g(b);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:p,replace:m,go(b){return i.go(b)}};return w}var xh;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xh||(xh={}));function VS(e,t,n){return n===void 0&&(n="/"),WS(e,t,n)}function WS(e,t,n,r){let o=typeof t=="string"?Jo(t):t,s=Ix(o.pathname||"/",n);if(s==null)return null;let i=Tx(e);YS(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=ok(s);l=tk(i[c],u)}return l}function Tx(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(s,i,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};c.relativePath.startsWith("/")&&(Ye(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Hr([r,c.relativePath]),d=n.concat(c);s.children&&s.children.length>0&&(Ye(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Tx(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:qS(u,s.index),routesMeta:d})};return e.forEach((s,i)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))o(s,i);else for(let c of Mx(s.path))o(s,i,c)}),t}function Mx(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let i=Mx(r.join("/")),l=[];return l.push(...i.map(c=>c===""?s:[s,c].join("/"))),o&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function YS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ek(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const KS=/^:[\w-]+$/,GS=3,XS=2,QS=1,JS=10,ZS=-2,yh=e=>e==="*";function qS(e,t){let n=e.split("/"),r=n.length;return n.some(yh)&&(r+=ZS),t&&(r+=XS),n.filter(o=>!yh(o)).reduce((o,s)=>o+(KS.test(s)?GS:s===""?QS:JS),r)}function ek(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function tk(e,t,n){let{routesMeta:r}=e,o={},s="/",i=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=s==="/"?t:t.slice(s.length)||"/",f=nk({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!f)return null;Object.assign(o,f.params),i.push({params:o,pathname:Hr([s,f.pathname]),pathnameBase:ak(Hr([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Hr([s,f.pathnameBase]))}return i}function nk(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=rk(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let w=l[f]||"";i=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const g=l[f];return m&&!g?u[p]=void 0:u[p]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:e}}function rk(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Cx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function ok(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Cx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ix(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function sk(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?Jo(e):e;return{pathname:n?n.startsWith("/")?n:ik(n,t):t,search:ck(r),hash:uk(o)}}function ik(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function oc(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lk(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function $x(e,t){let n=lk(e);return t?n.map((r,o)=>o===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Dx(e,t,n,r){r===void 0&&(r=!1);let o;typeof e=="string"?o=Jo(e):(o=ei({},e),Ye(!o.pathname||!o.pathname.includes("?"),oc("?","pathname","search",o)),Ye(!o.pathname||!o.pathname.includes("#"),oc("#","pathname","hash",o)),Ye(!o.search||!o.search.includes("#"),oc("#","search","hash",o)));let s=e===""||o.pathname==="",i=s?"/":o.pathname,l;if(i==null)l=n;else{let f=t.length-1;if(!r&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),f-=1;o.pathname=p.join("/")}l=f>=0?t[f]:"/"}let c=sk(o,l),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Hr=e=>e.join("/").replace(/\/\/+/g,"/"),ak=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ck=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,uk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Rx=["post","put","patch","delete"];new Set(Rx);const fk=["get",...Rx];new Set(fk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ti(){return ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ti.apply(this,arguments)}const Td=y.createContext(null),pk=y.createContext(null),ui=y.createContext(null),xa=y.createContext(null),br=y.createContext({outlet:null,matches:[],isDataRoute:!1}),zx=y.createContext(null);function di(){return y.useContext(xa)!=null}function Md(){return di()||Ye(!1),y.useContext(xa).location}function Lx(e){y.useContext(ui).static||y.useLayoutEffect(e)}function fi(){let{isDataRoute:e}=y.useContext(br);return e?Ek():hk()}function hk(){di()||Ye(!1);let e=y.useContext(Td),{basename:t,future:n,navigator:r}=y.useContext(ui),{matches:o}=y.useContext(br),{pathname:s}=Md(),i=JSON.stringify($x(o,n.v7_relativeSplatPath)),l=y.useRef(!1);return Lx(()=>{l.current=!0}),y.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=Dx(u,JSON.parse(i),s,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Hr([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,i,s,e])}function mk(){let{matches:e}=y.useContext(br),t=e[e.length-1];return t?t.params:{}}function gk(e,t){return xk(e,t)}function xk(e,t,n,r){di()||Ye(!1);let{navigator:o}=y.useContext(ui),{matches:s}=y.useContext(br),i=s[s.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=Md(),d;if(t){var f;let b=typeof t=="string"?Jo(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Ye(!1),d=b}else d=u;let p=d.pathname||"/",m=p;if(c!=="/"){let b=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=VS(e,{pathname:m}),w=_k(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Hr([c,o.encodeLocation?o.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Hr([c,o.encodeLocation?o.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,n,r);return t&&w?y.createElement(xa.Provider,{value:{location:ti({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:or.Pop}},w):w}function yk(){let e=jk(),t=dk(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),n?y.createElement("pre",{style:o},n):null,null)}const vk=y.createElement(yk,null);class wk extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?y.createElement(br.Provider,{value:this.props.routeContext},y.createElement(zx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bk(e){let{routeContext:t,match:n,children:r}=e,o=y.useContext(Td);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(br.Provider,{value:t},r)}function _k(e,t,n,r){var o;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=(o=n)==null?void 0:o.errors;if(l!=null){let d=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Ye(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:m}=n,g=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,p)=>{let m,g=!1,w=null,b=null;n&&(m=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||vk,c&&(u<0&&p===0?(Ck("route-fallback"),g=!0,b=null):u===p&&(g=!0,b=f.route.hydrateFallbackElement||null)));let h=t.concat(i.slice(0,p+1)),x=()=>{let _;return m?_=w:g?_=b:f.route.Component?_=y.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=d,y.createElement(bk,{match:f,routeContext:{outlet:d,matches:h,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?y.createElement(wk,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:x(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):x()},null)}var Ax=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ax||{}),Ox=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ox||{});function Nk(e){let t=y.useContext(Td);return t||Ye(!1),t}function Sk(e){let t=y.useContext(pk);return t||Ye(!1),t}function kk(e){let t=y.useContext(br);return t||Ye(!1),t}function Fx(e){let t=kk(),n=t.matches[t.matches.length-1];return n.route.id||Ye(!1),n.route.id}function jk(){var e;let t=y.useContext(zx),n=Sk(),r=Fx();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Ek(){let{router:e}=Nk(Ax.UseNavigateStable),t=Fx(Ox.UseNavigateStable),n=y.useRef(!1);return Lx(()=>{n.current=!0}),y.useCallback(function(o,s){s===void 0&&(s={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,ti({fromRouteId:t},s)))},[e,t])}const vh={};function Ck(e,t,n){vh[e]||(vh[e]=!0)}function Pk(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Tk(e){let{to:t,replace:n,state:r,relative:o}=e;di()||Ye(!1);let{future:s,static:i}=y.useContext(ui),{matches:l}=y.useContext(br),{pathname:c}=Md(),u=fi(),d=Dx(t,$x(l,s.v7_relativeSplatPath),c,o==="path"),f=JSON.stringify(d);return y.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:o}),[u,f,o,n,r]),null}function uo(e){Ye(!1)}function Mk(e){let{basename:t="/",children:n=null,location:r,navigationType:o=or.Pop,navigator:s,static:i=!1,future:l}=e;di()&&Ye(!1);let c=t.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:s,static:i,future:ti({v7_relativeSplatPath:!1},l)}),[c,l,s,i]);typeof r=="string"&&(r=Jo(r));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:g="default"}=r,w=y.useMemo(()=>{let b=Ix(d,c);return b==null?null:{location:{pathname:b,search:f,hash:p,state:m,key:g},navigationType:o}},[c,d,f,p,m,g,o]);return w==null?null:y.createElement(ui.Provider,{value:u},y.createElement(xa.Provider,{children:n,value:w}))}function Ik(e){let{children:t,location:n}=e;return gk(xu(t),n)}new Promise(()=>{});function xu(e,t){t===void 0&&(t=[]);let n=[];return y.Children.forEach(e,(r,o)=>{if(!y.isValidElement(r))return;let s=[...t,o];if(r.type===y.Fragment){n.push.apply(n,xu(r.props.children,s));return}r.type!==uo&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=xu(r.props.children,s)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const $k="6";try{window.__reactRouterVersion=$k}catch{}const Dk="startTransition",wh=vy[Dk];function Rk(e){let{basename:t,children:n,future:r,window:o}=e,s=y.useRef();s.current==null&&(s.current=HS({window:o,v5Compat:!0}));let i=s.current,[l,c]=y.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},d=y.useCallback(f=>{u&&wh?wh(()=>c(f)):c(f)},[c,u]);return y.useLayoutEffect(()=>i.listen(d),[i,d]),y.useEffect(()=>Pk(r),[r]),y.createElement(Mk,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:i,future:r})}var bh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(bh||(bh={}));var _h;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_h||(_h={}));class Hx extends O.Component{constructor(n){super(n);gf(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){var n;if(this.state.hasError){if(this.props.fallback){const r=this.props.fallback;return a.jsx(r,{error:this.state.error,onRetry:this.handleRetry})}return a.jsx("div",{className:"flex h-full items-center justify-center p-6",children:a.jsxs("div",{className:"rounded-lg border border-red-500/20 bg-red-500/10 p-6 text-center",children:[a.jsx("div",{className:"mb-4 text-red-400",children:a.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h3",{className:"mb-2 text-lg font-semibold text-slate-100",children:"-   "}),a.jsx("p",{className:"mb-4 text-sm text-slate-400",children:((n=this.state.error)==null?void 0:n.message)||"  "}),a.jsx("button",{type:"button",className:"rounded bg-slate-700 px-4 py-2 text-sm text-slate-200 hover:bg-slate-600",onClick:this.handleRetry,children:" "})]})})}return this.props.children}}function zk({error:e,onRetry:t}){return a.jsxs("div",{className:"rounded-lg border border-red-500/20 bg-red-500/10 p-4 text-center",children:[a.jsx("h4",{className:"mb-2 text-sm font-semibold text-red-400",children:"  "}),a.jsx("p",{className:"mb-3 text-xs text-slate-400",children:(e==null?void 0:e.message)||"    "}),t&&a.jsx("button",{type:"button",className:"rounded bg-slate-700 px-3 py-1 text-xs text-slate-200 hover:bg-slate-600",onClick:t,children:""})]})}function Do({title:e,children:t,onClose:n,actions:r}){y.useEffect(()=>{const s=i=>{i.key==="Escape"&&n()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[n]);const o=a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 p-6",children:a.jsxs("div",{className:"w-full max-w-4xl overflow-hidden rounded-2xl border border-slate-800 bg-slate-900 shadow-xl",children:[a.jsxs("header",{className:"flex items-center justify-between border-b border-slate-800 px-6 py-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:e}),a.jsx("button",{type:"button",className:"rounded bg-slate-800 px-2 py-1 text-sm text-slate-300 hover:bg-slate-700",onClick:n,children:"Close"})]}),a.jsx("div",{className:"max-h-[65vh] overflow-y-auto px-6 py-4 text-sm text-slate-200",children:t}),r&&a.jsx("footer",{className:"border-t border-slate-800 px-6 py-4",children:r})]})});return Q0.createPortal(o,document.body)}function Lk(e){return a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[a.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),a.jsx("path",{d:"M12 9v4"}),a.jsx("path",{d:"m12 17 .01 0"})]})}function Ak({isOpen:e,title:t,message:n,confirmText:r="OK",cancelText:o="",onConfirm:s,onCancel:i,type:l="danger"}){if(!e)return null;const u={danger:{icon:"text-red-400",confirmButton:"bg-red-600 hover:bg-red-500 focus:ring-red-500",border:"border-red-500/20",iconBg:"bg-red-500/10"},warning:{icon:"text-yellow-400",confirmButton:"bg-yellow-600 hover:bg-yellow-500 focus:ring-yellow-500",border:"border-yellow-500/20",iconBg:"bg-yellow-500/10"},info:{icon:"text-blue-400",confirmButton:"bg-blue-600 hover:bg-blue-500 focus:ring-blue-500",border:"border-blue-500/20",iconBg:"bg-blue-500/10"}}[l];return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:i}),a.jsxs("div",{className:`relative bg-slate-900 border ${u.border} rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden animate-zoom-in-95`,children:[a.jsx("div",{className:"p-6 pb-4",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full ${u.iconBg} flex items-center justify-center`,children:a.jsx(Lk,{className:`w-6 h-6 ${u.icon}`})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:t}),a.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:n})]})]})}),a.jsxs("div",{className:"px-6 py-4 bg-slate-800/50 flex gap-3 justify-end",children:[a.jsx("button",{onClick:i,className:"px-4 py-2 text-sm font-medium text-slate-300 hover:text-white bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-slate-500",children:o}),a.jsx("button",{onClick:s,className:`px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors focus:outline-none focus:ring-2 ${u.confirmButton}`,children:r})]})]})]})}function pi(){const[e,t]=O.useState({isOpen:!1,title:"",message:""}),n=O.useCallback(s=>new Promise(i=>{t({...s,isOpen:!0,onConfirm:()=>{t(l=>({...l,isOpen:!1})),i(!0)}})}),[]),r=O.useCallback(()=>{t(s=>({...s,isOpen:!1}))},[]),o=O.useCallback(()=>a.jsx(Ak,{isOpen:e.isOpen,title:e.title,message:e.message,confirmText:e.confirmText,cancelText:e.cancelText,type:e.type,onConfirm:e.onConfirm||(()=>{}),onCancel:r}),[e,r]);return{showConfirm:n,ConfirmDialog:o}}const Qi=[{id:"openai_gpt",name:"OpenAI GPT Access",category:"text_to_text",description:"Standard GPT access for prompt completion and structured reasoning.",credentials:[{label:"API Key",key:"OPENAI_API_KEY",placeholder:"sk-***"},{label:"Org ID (optional)",key:"OPENAI_ORG_ID"}],limits:[{label:"Requests",desc:"60 RPM / 3,000 TPM default quota"},{label:"Safety",desc:"All content scanned; blocked categories return 400"}],webhookContract:`{
  "headers": {
    "authorization": "Bearer {OPENAI_API_KEY}",
    "content-type": "application/json"
  },
  "body": {
    "model": "gpt-4.1-mini",
    "messages": [{ "role": "user", "content": "Prompt text" }]
  }
}`,pythonHelper:`import os
import requests

OPENAI_API_KEY = os.environ["OPENAI_API_KEY"]

def call_openai(messages, model="gpt-4.1-mini"):
    response = requests.post(
        "https://api.openai.com/v1/chat/completions",
        headers={
            "Authorization": f"Bearer {OPENAI_API_KEY}",
            "Content-Type": "application/json",
        },
        json={"model": model, "messages": messages},
        timeout=30,
    )
    response.raise_for_status()
    return response.json()
`},{id:"midjourney_proxy",name:"Midjourney Relay",category:"text_to_image",description:"Proxy webhook for Midjourney-style prompt posting with reference assets.",credentials:[{label:"Relay URL",key:"MIDJOURNEY_RELAY_URL",placeholder:"https://relay.example.com/hook"},{label:"Auth Token",key:"MIDJOURNEY_TOKEN",placeholder:"mj-secret"}],limits:[{label:"Assets",desc:"Reference images up to 10 MB; JPG or PNG only"},{label:"Prompts",desc:"Max 1,000 characters per prompt including modifiers"}],webhookContract:`POST {MIDJOURNEY_RELAY_URL}
Headers:
  Authorization: Bearer {MIDJOURNEY_TOKEN}
Body:
  {
    "prompt": "Text prompt appended with style directives",
    "reference_images": [
      {
        "url": "https://...",
        "purpose": "character",
        "strength": 0.7
      }
    ]
  }
Response: 202 Accepted + task id`,pythonHelper:`import os
import requests

def queue_midjourney(prompt, references):
    response = requests.post(
        os.environ["MIDJOURNEY_RELAY_URL"],
        headers={
            "Authorization": f"Bearer {os.environ['MIDJOURNEY_TOKEN']}",
            "Content-Type": "application/json",
        },
        json={"prompt": prompt, "reference_images": references},
        timeout=30,
    )
    response.raise_for_status()
    return response.json()
`},{id:"google_drive_root",name:"Google Drive Workspace",category:"storage",description:"Shared Drive root for storing project exports and imported assets.",credentials:[{label:"Service Account JSON",key:"GOOGLE_DRIVE_SA_JSON",placeholder:'{"type":"service_account",...}'},{label:"Parent Folder ID",key:"GOOGLE_DRIVE_ROOT_ID",placeholder:"1AbCdEf..."}],limits:[{label:"Rate Limit",desc:"10 requests / second per service account"},{label:"File Size",desc:"Up to 5 GB per file via resumable upload"}],webhookContract:`Service uses Google Drive API v3.
POST https://www.googleapis.com/upload/drive/v3/files?uploadType=resumable
Headers: Authorization: Bearer {OAUTH_TOKEN}
Metadata: { "name": "file.png", "parents": ["{PROJECT_FOLDER_ID}"] }`,pythonHelper:`import json
from google.oauth2 import service_account
from googleapiclient.discovery import build

SCOPES = ["https://www.googleapis.com/auth/drive"]
SERVICE_INFO = json.loads(os.environ["GOOGLE_DRIVE_SA_JSON"])

creds = service_account.Credentials.from_service_account_info(SERVICE_INFO, scopes=SCOPES)
drive = build("drive", "v3", credentials=creds)

def ensure_project_folder(project_id):
    # implement Drive folder creation
    pass
`,notes:"Project-specific folders are created automatically under the shared root."},{id:"zapier_hook",name:"Zapier Webhook",category:"automation",description:"Low-code webhook for post-processing (e.g., notifications, translations).",credentials:[{label:"Zapier Hook URL",key:"ZAPIER_HOOK_URL",placeholder:"https://hooks.zapier.com/hooks/catch/.../"}],limits:[{label:"Payload",desc:"Max 750 KB per request"},{label:"Retries",desc:"Zapier will auto-retry up to 30 minutes on failure"}],webhookContract:`POST {ZAPIER_HOOK_URL}
Headers: content-type: application/json
Body: { "event": "node.complete", "payload": { ... } }
Response: 200 OK`,pythonHelper:`import os
import requests

def notify_zapier(event, payload):
    response = requests.post(
        os.environ["ZAPIER_HOOK_URL"],
        json={"event": event, "payload": payload},
        timeout=15,
    )
    response.raise_for_status()
    return response.json() if response.content else None
`}],Bx={},{useDebugValue:Ok}=O,{useSyncExternalStoreWithSelector:Fk}=tg;let Nh=!1;const Hk=e=>e;function Bk(e,t=Hk,n){(Bx?"production":void 0)!=="production"&&n&&!Nh&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Nh=!0);const r=Fk(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ok(r),r}const Sh=e=>{(Bx?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?ng(e):e,n=(r,o)=>Bk(t,r,o);return Object.assign(n,t),n},Ux=e=>e?Sh(e):Sh;async function kr(e){const t=await fetch(`/api/project/${e}`);if(!t.ok)throw new Error(await t.text());return t.json()}async function kh(){const e=await fetch("/api/projects");if(!e.ok)throw new Error(await e.text());return e.json()}async function Uk(e,t){const n=await fetch(`/api/node/${encodeURIComponent(t)}/run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e})});if(!n.ok)throw new Error(await n.text());return n.json()}async function Vk(e,t,n){const r=await fetch(`/api/node/${encodeURIComponent(t)}/rerun`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e,...n})});if(!r.ok)throw new Error(await r.text());return r.json()}async function Gn(e,t){const n=await fetch(`/api/node/${encodeURIComponent(t)}/logs?project_id=${encodeURIComponent(e)}`);if(!n.ok)throw new Error(await n.text());return n.json()}async function Wk(e,t){const n=await fetch(`/api/projects/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(await n.text());return n.json()}async function Yk(e,t){const n=await fetch(`/api/projects/${encodeURIComponent(e)}/clone`,{method:"POST",headers:{"Content-Type":"application/json"},body:t?JSON.stringify(t):void 0});if(!n.ok)throw new Error(await n.text());return n.json()}async function Vx(e){const t=await fetch(`/api/projects/${encodeURIComponent(e)}/sync-drive`,{method:"POST"});if(!t.ok)throw new Error(await t.text())}async function Kk(e){const t=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(await t.text());return t.json()}async function sc(e,t,n){const r=await fetch(`/api/node/${encodeURIComponent(t)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e,...n})});if(!r.ok)throw new Error(await r.text());return r.json()}async function fs(e,t){const n=await fetch("/api/node",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e,...t})});if(!n.ok)throw new Error(await n.text());return n.json()}async function ps(e,t){const n=await fetch(`/api/project/${encodeURIComponent(e)}/edges`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(await n.text());return n.json()}async function Gk(e,t,n){const r=await fetch(`/api/project/${encodeURIComponent(e)}/edges/${encodeURIComponent(t)}/${encodeURIComponent(n)}`,{method:"DELETE"});if(!r.ok)throw new Error(await r.text());return r.json()}async function jh(e,t){const n=await fetch(`/api/node/${encodeURIComponent(t)}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e})});if(!n.ok)throw new Error(await n.text());return n.json()}async function Xk(){const e=await fetch("/api/integrations");if(!e.ok)throw new Error(await e.text());return e.json()}async function Qk(e){const t=await fetch("/api/integrations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(await t.text());return t.json()}async function Jk(e,t){const n=await fetch(`/api/integrations/${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(await n.text());return n.json()}async function Zk(e){const t=await fetch(`/api/integrations/${encodeURIComponent(e)}`,{method:"DELETE"});if(!t.ok)throw new Error(await t.text())}async function Eh(e,t){const n=await fetch(`/api/project/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(await n.text());return n.json()}async function qk(e){const t=await fetch(`/api/projects/${encodeURIComponent(e)}`,{method:"DELETE"});if(!t.ok)throw new Error(await t.text())}async function ej(e){const t=await e.arrayBuffer(),n=new Uint8Array(t);let r="";for(let l=0;l<n.byteLength;l+=1)r+=String.fromCharCode(n[l]);const o=btoa(r),s=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({archive:o})});if(!s.ok)throw new Error(await s.text());const i=await s.json();if(!(i!=null&&i.project_id))throw new Error("Import response missing project id");return i.project_id}const Wx=Ux((e,t)=>({integrations:[],loading:!1,error:null,fetchIntegrations:async()=>{e({loading:!0,error:null});try{const n=await Xk();e({integrations:n,loading:!1})}catch(n){const r=n instanceof Error?n.message:String(n);e({error:`Failed to fetch integrations: ${r}`,loading:!1})}},addIntegration:async n=>{e({loading:!0,error:null});try{const r=await Qk(n);return e(o=>({integrations:[...o.integrations,r],loading:!1})),r}catch(r){const o=r instanceof Error?r.message:String(r);e({error:`Failed to add integration: ${o}`,loading:!1});return}},updateIntegration:async(n,r)=>{e({loading:!0,error:null});try{const o=await Jk(n,r);return e(s=>({integrations:s.integrations.map(i=>i.id===n?{...i,...o}:i),loading:!1})),o}catch(o){const s=o instanceof Error?o.message:String(o);e({error:`Failed to update integration: ${s}`,loading:!1});return}},removeIntegration:async n=>{e({loading:!0,error:null});try{await Zk(n),e(r=>({integrations:r.integrations.filter(o=>o.id!==n),loading:!1}))}catch(r){const o=r instanceof Error?r.message:String(r);e({error:`Failed to delete integration: ${o}`,loading:!1})}}}));function tj({onSelect:e}){const{integrations:t,loading:n,error:r,fetchIntegrations:o,addIntegration:s,updateIntegration:i,removeIntegration:l}=Wx(),[c,u]=y.useState(null),[d,f]=y.useState(!1),[p,m]=y.useState(!1),[g,w]=y.useState(null),[b,h]=y.useState(null),{showConfirm:x,ConfirmDialog:_}=pi(),v=y.useMemo(()=>t.find(C=>C.id===c)??null,[t,c]),k=y.useMemo(()=>Qi.find(C=>C.id===((v==null?void 0:v.providerId)||(g==null?void 0:g.providerId)))??null,[v,g]);y.useEffect(()=>{o()},[o]),y.useEffect(()=>{w(v?{id:v.id,providerId:v.providerId,name:v.name,description:v.description??"",apiKey:v.apiKey??"",baseUrl:v.baseUrl??"",organization:v.organization??"",webhookContract:v.webhookContract??"",systemPrompt:v.systemPrompt??"",inputFields:v.inputFields??[]}:null)},[v]);const E=y.useCallback(C=>{try{if(console.log("handleSelectIntegration called with:",C),u(C),h(null),C){const L=t.find(S=>S.id===C);if(console.log("Found integration:",L),!L){console.error("Integration not found:",C),h("  "),m(!1);return}if(!L.providerId){console.error("Integration missing providerId:",L),h("  "),m(!1);return}const W=Qi.find(S=>S.id===L.providerId);if(console.log("Found provider config:",W),!W){console.error("Provider config not found:",L.providerId),h("  "),m(!1);return}e==null||e(W);const U={id:L.id,providerId:L.providerId,name:L.name||"Unnamed Integration",description:L.description??"",apiKey:L.apiKey??"",baseUrl:L.baseUrl??"",organization:L.organization??"",webhookContract:L.webhookContract??"",systemPrompt:L.systemPrompt??"",inputFields:Array.isArray(L.inputFields)?L.inputFields:[]};console.log("Setting integration draft:",U),w(U),m(!0)}else e==null||e(null),m(!1),w(null)}catch(L){console.error("Error in handleSelectIntegration:",L),h("    "),m(!1),w(null)}},[t,e]),T=y.useCallback(C=>{w({providerId:C.id,name:`New ${C.name} Integration`,description:C.description,apiKey:"",baseUrl:"",organization:"",webhookContract:C.webhookContract,systemPrompt:C.pythonHelper,inputFields:C.credentials.map(L=>({id:L.key,label:L.label,key:L.key,type:"text",placeholder:L.placeholder??""}))}),f(!0),u(null),e==null||e(null)},[e]),$=y.useCallback(async()=>{if(!(!g||!g.providerId)){h(null);try{if(g.id)await i(g.id,g),h(" .");else{const C=await s(g);C&&(u(C.id),h(" ."))}f(!1)}catch(C){const L=C instanceof Error?C.message:String(C);h(`: ${L}`)}}},[g,s,i]),R=y.useCallback(async C=>{if(await x({title:" ?",message:"   .       .",confirmText:"",cancelText:"",type:"danger"}))try{await l(C),u(null),h(" .")}catch(W){const U=W instanceof Error?W.message:String(W);h(`: ${U}`)}},[l]);return n?a.jsx("p",{children:" ..."}):r?a.jsxs("p",{className:"text-red-500",children:[": ",r]}):a.jsxs("div",{className:"flex h-full flex-col gap-4",children:[a.jsxs("header",{children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Global Integrations"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Manage API credentials and configurations for all your projects."})]}),a.jsx("div",{className:"flex min-h-0 flex-1 gap-4",children:a.jsxs("nav",{className:"w-48 overflow-y-auto pr-2",children:[a.jsx("h3",{className:"mb-2 text-xs uppercase tracking-wide text-slate-400",children:"Configured Integrations"}),a.jsx("ul",{className:"space-y-2 text-sm",children:t.map(C=>{const L=C.id===c,W=Qi.find(U=>U.id===C.providerId);return a.jsxs("li",{className:"flex items-center justify-between group",children:[a.jsxs("button",{type:"button",className:`w-full rounded px-3 py-2 text-left transition ${L?"bg-slate-800 text-primary":"bg-slate-900/70 text-slate-300 hover:bg-slate-800"}`,onClick:()=>E(C.id),children:[a.jsx("div",{className:"font-medium",children:C.name}),a.jsx("div",{className:"text-xs text-slate-500",children:(W==null?void 0:W.name)||C.providerId})]}),a.jsx("button",{type:"button",className:"ml-2 p-1 rounded-full text-slate-500 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>R(C.id),title:"Delete Integration",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},C.id)})}),a.jsx("h3",{className:"mt-4 mb-2 text-xs uppercase tracking-wide text-slate-400",children:"Add New Integration"}),a.jsx("ul",{className:"space-y-2 text-sm",children:Qi.map(C=>a.jsx("li",{children:a.jsxs("button",{type:"button",className:"w-full rounded border border-dashed border-slate-700 px-3 py-2 text-left text-xs uppercase tracking-wide text-slate-400 hover:border-primary/60 hover:text-primary",onClick:()=>T(C),children:["+ ",C.name]})},C.id))})]})}),d&&g&&k&&a.jsx(Do,{title:`Create ${k.name} Integration`,onClose:()=>f(!1),actions:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",className:"rounded border border-slate-700 px-3 py-1 text-xs text-slate-300 hover:border-slate-500",onClick:()=>f(!1),children:"Cancel"}),a.jsx("button",{type:"button",className:"rounded bg-primary px-4 py-1 text-xs font-semibold text-white hover:bg-primary/90",onClick:$,disabled:!g.name||!g.providerId,children:"Create"})]}),children:a.jsx(rj,{integration:g,providerConfig:k,onUpdate:C=>w(L=>L?{...L,...C}:null)})}),p&&g&&k?a.jsx(Do,{title:`Edit ${(v==null?void 0:v.name)||k.name} Integration`,onClose:()=>{m(!1),w(null),h(null)},actions:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",className:"rounded border border-slate-700 px-3 py-1 text-xs text-slate-300 hover:border-slate-500",onClick:()=>{m(!1),w(null),h(null)},children:"Cancel"}),a.jsx("button",{type:"button",className:"rounded bg-primary px-4 py-1 text-xs font-semibold text-white hover:bg-primary/90",onClick:$,disabled:!(g!=null&&g.name)||!(g!=null&&g.providerId),children:"Save Changes"})]}),children:a.jsx(nj,{integration:g,providerConfig:k,onUpdate:C=>w(L=>L?{...L,...C}:null),onSave:$,statusMessage:b})}):p&&a.jsx(Do,{title:"  ",onClose:()=>{m(!1),w(null),h(null)},actions:a.jsx("div",{className:"flex justify-end gap-2",children:a.jsx("button",{type:"button",className:"rounded bg-slate-800 px-3 py-1 text-xs text-slate-300 hover:bg-slate-700",onClick:()=>{m(!1),w(null),h(null)},children:""})}),children:a.jsxs("div",{className:"text-red-400 p-4 text-center",children:[a.jsx("p",{className:"mb-2",children:"    "}),a.jsxs("p",{className:"text-sm text-slate-400",children:[": ",g?"":" ",a.jsx("br",{}),": ",k?"":" "]})]})}),a.jsx(_,{})]})}function nj({integration:e,providerConfig:t,onUpdate:n,onSave:r,statusMessage:o}){return e?t?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("header",{className:"border-b border-slate-800 pb-3",children:[a.jsxs("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:["Provider: ",t.name]}),a.jsx("input",{type:"text",className:"w-full bg-transparent text-xl font-semibold text-slate-100 focus:outline-none",value:e.name||"",onChange:s=>n({name:s.target.value}),placeholder:"Integration Name"}),a.jsx("textarea",{className:"w-full bg-transparent text-sm text-slate-400 focus:outline-none mt-1",value:e.description||"",onChange:s=>n({description:s.target.value}),placeholder:"Description (optional)",rows:2})]}),a.jsxs("section",{children:[a.jsx("h4",{className:"text-xs uppercase tracking-wide text-slate-400 mb-3",children:"Configuration"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"API Key"}),a.jsx("textarea",{className:"min-h-[60px] rounded border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 focus:border-primary focus:outline-none",value:e.apiKey||"",onChange:s=>n({apiKey:s.target.value}),placeholder:"sk-***"})]}),a.jsxs("label",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"Base URL (optional)"}),a.jsx("input",{type:"text",className:"rounded border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 focus:border-primary focus:outline-none",value:e.baseUrl||"",onChange:s=>n({baseUrl:s.target.value}),placeholder:"https://api.openai.com/v1"})]}),a.jsxs("label",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"Organization ID (optional)"}),a.jsx("input",{type:"text",className:"rounded border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 focus:border-primary focus:outline-none",value:e.organization||"",onChange:s=>n({organization:s.target.value}),placeholder:"org-..."})]}),a.jsxs("label",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"System Prompt Template (optional)"}),a.jsx("textarea",{className:"min-h-[80px] rounded border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 focus:border-primary focus:outline-none",value:e.systemPrompt||"",onChange:s=>n({systemPrompt:s.target.value}),placeholder:"You are an assistant..."})]})]})]}),a.jsx(oj,{fields:Array.isArray(e.inputFields)?e.inputFields:[],onChange:s=>n({inputFields:s})}),o&&a.jsx("p",{className:"text-xs text-emerald-300",children:o}),a.jsx("div",{className:"flex justify-end gap-2",children:a.jsx("button",{type:"button",className:"rounded bg-primary px-4 py-1 text-xs font-semibold text-white hover:bg-primary/90",onClick:r,children:"Save Changes"})})]}):a.jsx("div",{className:"text-red-400 p-4",children:a.jsx("p",{children:":    "})}):a.jsx("div",{className:"text-red-400 p-4",children:a.jsx("p",{children:":    "})})}function rj({integration:e,providerConfig:t,onUpdate:n}){return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"Integration Name"}),a.jsx("input",{type:"text",className:"rounded border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 focus:border-primary focus:outline-none",value:e.name,onChange:r=>n({name:r.target.value}),placeholder:"My Custom OpenAI Integration"})]}),a.jsxs("label",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"Description"}),a.jsx("textarea",{className:"min-h-[60px] rounded border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 focus:border-primary focus:outline-none",value:e.description??"",onChange:r=>n({description:r.target.value}),placeholder:"A short description of this integration",rows:2})]}),a.jsx("div",{className:"space-y-3 pt-2",children:a.jsxs("label",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"API Key"}),a.jsx("textarea",{className:"min-h-[60px] rounded border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 focus:border-primary focus:outline-none",value:e.apiKey??"",onChange:r=>n({apiKey:r.target.value}),placeholder:"sk-***"})]})})]})}function oj({fields:e,onChange:t}){const n=(s,i)=>{t(e.map(l=>l.id===s?{...l,...i}:l))},r=s=>{t(e.filter(i=>i.id!==s))},o=()=>{t([...e,{id:`field_${Date.now()}`,label:"New Field",key:`field_${e.length+1}`,type:"text",placeholder:"",description:"",required:!1,default_value:""}])};return a.jsxs("section",{className:"space-y-3",children:[a.jsxs("header",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold",children:"Integration Fields"}),a.jsx("p",{className:"text-xs text-slate-400",children:"These fields appear in the agent node. Use them as input forms."})]}),a.jsx("button",{type:"button",className:"rounded bg-slate-800 px-3 py-1 text-xs text-slate-200 hover:bg-slate-700",onClick:o,children:"+ Add Field"})]}),e.length===0&&a.jsx("p",{className:"rounded border border-dashed border-slate-700 bg-slate-900/40 p-3 text-xs text-slate-400",children:"No fields yet. Add at least one to guide users on what to fill in."}),a.jsx("div",{className:"space-y-3",children:e.map((s,i)=>a.jsxs("div",{className:"rounded border border-slate-700 bg-slate-900/50 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h5",{className:"text-sm font-semibold text-slate-200",children:s.label||`Field ${i+1}`}),a.jsx("button",{type:"button",className:"rounded bg-slate-800 px-2 py-1 text-xs text-rose-200 hover:bg-rose-600/20",onClick:()=>r(s.id),children:"Delete"})]}),a.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-2",children:[a.jsxs("label",{className:"flex flex-col gap-1 text-xs text-slate-300",children:["Label",a.jsx("input",{type:"text",className:"rounded border border-slate-700 bg-slate-900 px-2 py-1 text-sm text-slate-100 focus:border-primary focus:outline-none",value:s.label,onChange:l=>n(s.id,{label:l.target.value})})]}),a.jsxs("label",{className:"flex flex-col gap-1 text-xs text-slate-300",children:["Key",a.jsx("input",{type:"text",className:"rounded border border-slate-700 bg-slate-900 px-2 py-1 text-sm text-slate-100 focus:border-primary focus:outline-none",value:s.key,onChange:l=>n(s.id,{key:l.target.value})})]}),a.jsxs("label",{className:"flex flex-col gap-1 text-xs text-slate-300",children:["Type",a.jsxs("select",{className:"rounded border border-slate-700 bg-slate-900 px-2 py-1 text-sm text-slate-100 focus:border-primary focus:outline-none",value:s.type,onChange:l=>n(s.id,{type:l.target.value}),children:[a.jsx("option",{value:"text",children:"Text"}),a.jsx("option",{value:"textarea",children:"Textarea"})]})]}),a.jsxs("label",{className:"flex flex-col gap-1 text-xs text-slate-300",children:["Placeholder",a.jsx("input",{type:"text",className:"rounded border border-slate-700 bg-slate-900 px-2 py-1 text-sm text-slate-100 focus:border-primary focus:outline-none",value:s.placeholder??"",onChange:l=>n(s.id,{placeholder:l.target.value})})]})]}),a.jsxs("label",{className:"mt-2 flex flex-col gap-1 text-xs text-slate-300",children:["Description",a.jsx("textarea",{className:"min-h-[60px] rounded border border-slate-700 bg-slate-900 px-2 py-1 text-sm text-slate-100 focus:border-primary focus:outline-none",value:s.description??"",onChange:l=>n(s.id,{description:l.target.value})})]}),a.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-xs text-slate-300",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:!!s.required,onChange:l=>n(s.id,{required:l.target.checked})}),"Required"]}),a.jsxs("label",{className:"flex flex-col gap-1",children:["Default Value",a.jsx("input",{type:"text",className:"rounded border border-slate-700 bg-slate-900 px-2 py-1 text-sm text-slate-100 focus:border-primary focus:outline-none",value:s.default_value??"",onChange:l=>n(s.id,{default_value:l.target.value})})]})]})]},String(s.id??s.key)))})]})}const Dn=450,xr=310,hr=1600,Rn=3200,ht=450,mt=310,Rt="#6B7280",Rr=Object.freeze({x1:0,y1:0,x2:ht,y2:mt});function sj(e){return typeof e!="number"||!Number.isFinite(e)?ht:Math.max(Dn,Math.min(hr,e))}function Ch(e,t){return typeof e!="number"||!Number.isFinite(e)?mt:Math.max(xr,Math.min(Rn,e))}function ij(e,t=!1,n=!1){if(n)return 110;if(!e)return mt;const r=e.split(`
`),o=20,s=60,i=50,l=t?80:0,c=40,u=r.length*o,d=s+u+i+l+c;return Math.max(xr,Math.min(Rn,d))}const Yx=Ux(e=>({project:null,loading:!1,error:null,selectedNodeId:null,runs:{},setProject:t=>e(()=>{var r;const n=gj(t);return{project:n,selectedNodeId:((r=n.nodes[0])==null?void 0:r.node_id)??null}}),setLoading:t=>e({loading:t}),setError:t=>e({error:t}),selectNode:t=>e({selectedNodeId:t}),setRuns:(t,n)=>e(r=>({runs:{...r.runs,[t]:n}})),upsertNodeContent:(t,n)=>e(r=>{if(!r.project)return r;const o=r.project.nodes.map(s=>s.node_id===t?{...s,...n}:s);return{project:{...r.project,nodes:o}}}),addNodeFromServer:(t,n)=>e(r=>{if(!r.project)return r;const o=r.project.nodes.some(l=>l.node_id===t.node_id),s=Gx(t),i=o?r.project.nodes.map(l=>l.node_id===s.node_id?{...l,...s}:l):[...r.project.nodes,s];return{project:{...r.project,nodes:i,updated_at:n??r.project.updated_at},selectedNodeId:t.node_id}}),addNode:(t,n)=>e(r=>{if(!r.project)return r;const o=r.project,s=pj(n.slug),i=fj(o.nodes,s),l=new Date().toISOString(),c=lj(t.meta),u=hj(n.position),d={node_id:i,type:t.type,title:t.title,content_type:t.content_type,content:t.content,meta:c??{},ai:t.ai,parser:t.parser,python:t.python,visibility_rules:t.visibility_rules??{},ui:u,ai_visible:!0,connections:mj()};return{project:{...o,nodes:[...o.nodes,d],updated_at:l},selectedNodeId:i}}),removeNode:t=>e(n=>{var c;if(!n.project)return n;const r=n.project.nodes.filter(u=>u.node_id!==t),o=n.project.edges.filter(u=>u.from!==t&&u.to!==t),s=n.selectedNodeId===t?((c=r[0])==null?void 0:c.node_id)??null:n.selectedNodeId,{[t]:i,...l}=n.runs;return{project:{...n.project,nodes:r,edges:o,updated_at:new Date().toISOString()},runs:l,selectedNodeId:s}}),setEdges:(t,n)=>e(r=>r.project?{project:{...r.project,edges:t,updated_at:n??r.project.updated_at}}:r),addEdge:(t,n)=>e(r=>r.project?r.project.edges.some(s=>s.from===t.from&&s.to===t.to)?n?{project:{...r.project,updated_at:n}}:r:{project:{...r.project,edges:[...r.project.edges,t],updated_at:n??r.project.updated_at}}:r),removeEdge:({from:t,to:n},r)=>e(o=>{if(!o.project)return o;const s=o.project.edges.filter(i=>!(i.from===t&&i.to===n));return{project:{...o.project,edges:s,updated_at:r??o.project.updated_at}}}),updateProjectSettings:(t,n)=>e(r=>{if(!r.project)return r;const o=Kx(r.project.settings??{},t);return{project:{...r.project,settings:o,updated_at:n??r.project.updated_at}}}),clearProject:()=>e(()=>({project:null,selectedNodeId:null,runs:{}}))}));function ao(e,t){return!e||!t?null:e.nodes.find(n=>n.node_id===t)??null}function lj(e){if(!e)return;const{input_ports:t,...n}=e;return{...n,...t?{input_ports:t.map((r,o)=>({...r,id:r.id??aj(`${r.kind??"port"}-${o}`),kind:typeof r.kind=="string"?r.kind:"text",max_items:typeof r.max_items=="number"&&Number.isFinite(r.max_items)?Math.max(1,Math.floor(r.max_items)):1}))}:{}}}let Ph=0;function aj(e="port"){return Ph+=1,`${e}-${Date.now()}-${Ph}`}function cj(e,t){if(!e)return[];const n=new Map;for(const i of e.edges){const l=n.get(i.to)??[];l.push(i.from),n.set(i.to,l)}const r=[],o=new Set,s=[...n.get(t)??[]];for(;s.length;){const i=s.pop();if(o.has(i))continue;o.add(i);const l=e.nodes.find(c=>c.node_id===i);l&&(r.push(l),s.push(...n.get(i)??[]))}return r}function uj(e,t){return e?e.edges.filter(n=>n.from===t).map(n=>e.nodes.find(r=>r.node_id===n.to)).filter(n=>!!n):[]}function Kx(e,t){const n={...e};for(const[r,o]of Object.entries(t))if(Th(o)){const s=n[r];Th(s)?n[r]=Kx(s,o):n[r]=dj(o)}else n[r]=o;return n}function Th(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function dj(e){return e===void 0?e:JSON.parse(JSON.stringify(e))}function fj(e,t){return`n${e.reduce((o,s)=>{const i=/^n(\d+)_/.exec(s.node_id);if(i){const l=Number.parseInt(i[1],10);if(!Number.isNaN(l))return Math.max(o,l)}return o},0)+1}_${t}`}function pj(e){return e.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9_-]+/g,"")||"node"}function hj(e){const t=ht,n=mt,r=e?Math.round(e.x):Rr.x1,o=e?Math.round(e.y):Rr.y1;return{color:Rt,bbox:{x1:r,y1:o,x2:r+t,y2:o+n}}}function mj(){return{incoming:[],outgoing:[]}}function gj(e){return{...e,nodes:e.nodes.map(Gx)}}function Gx(e){const t=xj(e.ui),n=vj(e.connections);return{...e,ui:t,ai_visible:e.ai_visible??!0,connections:n}}function xj(e){const t=typeof(e==null?void 0:e.color)=="string"&&e.color.trim().length>0?e.color:Rt,n=yj(e==null?void 0:e.bbox);return{color:t,bbox:n}}function yj(e){const t=Rr;if(!e)return{...t};const n=Mh(e.x2-e.x1,ht,Dn,hr),r=Mh(e.y2-e.y1,mt,xr,Rn),o=Number.isFinite(e.x1)?e.x1:t.x1,s=Number.isFinite(e.y1)?e.y1:t.y1;return{x1:o,y1:s,x2:o+n,y2:s+r}}function Mh(e,t,n,r){return!Number.isFinite(e)||e<=0?t:Math.max(n,Math.min(r,e))}function vj(e){const t=Array.isArray(e==null?void 0:e.incoming)?e.incoming.filter(wj):[],n=Array.isArray(e==null?void 0:e.outgoing)?e.outgoing.filter(bj):[];return{incoming:t.map(r=>({edge_id:r.edge_id,from:r.from,routing:typeof r.routing=="string"?r.routing:""})),outgoing:n.map(r=>({edge_id:r.edge_id,to:r.to,routing:typeof r.routing=="string"?r.routing:""}))}}function wj(e){return!!(e&&e.edge_id&&e.from)}function bj(e){return!!(e&&e.edge_id&&e.to)}function _j(){const e=fi(),{clearProject:t,setError:n}=Yx(g=>({clearProject:g.clearProject,setError:g.setError})),[r,o]=y.useState([]),[s,i]=y.useState(!0),[l,c]=y.useState(null);y.useEffect(()=>{t(),n(null)},[t,n]),y.useEffect(()=>{(async()=>{try{i(!0),c(null);const w=await kh();o(w)}catch(w){c(w instanceof Error?w.message:String(w))}finally{i(!1)}})().catch(w=>c(w instanceof Error?w.message:String(w)))},[]);const u=async()=>{try{i(!0);const g=await kh();o(g)}catch(g){c(g instanceof Error?g.message:String(g))}finally{i(!1)}},d=g=>{e(`/projects/${g}`)},f=async g=>{const w=window.prompt("Rename project",g.title);if(!(!w||w.trim()===""||w.trim()===g.title))try{await Wk(g.project_id,{title:w.trim()}),await u()}catch(b){window.alert(`Rename failed: ${b instanceof Error?b.message:String(b)}`)}},p=async g=>{try{const w=await Yk(g.project_id,{title:`Copy of ${g.title}`});await u(),e(`/projects/${w.project_id}`)}catch(w){window.alert(`Clone failed: ${w instanceof Error?w.message:String(w)}`)}},m=async g=>{try{await Vx(g.project_id),window.alert("Google Drive folder refreshed")}catch(w){window.alert(`Sync failed: ${w instanceof Error?w.message:String(w)}`)}};return a.jsxs("div",{className:"flex h-screen bg-slate-950 text-slate-100",children:[a.jsxs("main",{className:"flex-1 overflow-auto border-r border-slate-900/80 p-6",children:[a.jsxs("header",{className:"mb-6 flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-semibold",children:"Projects"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Manage creative flows, duplicate variants, or pick up where you left off."})]}),s&&a.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Loading"})]}),l&&a.jsx("div",{className:"mb-4 rounded border border-rose-500/40 bg-rose-500/10 p-3 text-sm text-rose-200",children:l}),!s&&r.length===0&&!l&&a.jsx("div",{className:"rounded border border-slate-800 bg-slate-900/60 p-6 text-center text-sm text-slate-400",children:"No projects yet. Import an existing flow or clone the demo to get started."}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:[a.jsxs("article",{className:"flex flex-col justify-between rounded-xl border border-dashed border-primary/60 bg-slate-900/40 p-4 text-sm text-primary shadow hover:border-primary hover:bg-slate-900/60",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"New Project"}),a.jsx("p",{className:"text-sm text-primary/70",children:"Start from scratch or import a .lcfz archive. Google Drive will receive a mirrored folder automatically."})]}),a.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[a.jsx("button",{className:"rounded bg-primary px-3 py-1 text-white",onClick:()=>e("/projects/new"),children:"Create Blank"}),a.jsx("button",{className:"rounded border border-primary/60 bg-amber-200/10 px-3 py-1 text-primary hover:bg-primary/10 hover:text-white",onClick:()=>e("/projects/import"),children:"Import Archive"})]})]}),r.map(g=>a.jsxs("article",{className:"group flex flex-col justify-between rounded-xl border border-slate-800 bg-slate-900/70 p-4 shadow transition hover:border-primary/60 hover:shadow-primary/10",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-100 group-hover:text-primary",children:g.title}),a.jsx("span",{className:"rounded bg-slate-800 px-2 py-0.5 text-[11px] text-slate-400",children:new Date(g.updated_at).toLocaleDateString()})]}),a.jsx("p",{className:"line-clamp-2 text-sm text-slate-400",children:g.description||"No description"})]}),a.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 text-sm",children:[a.jsx("button",{className:"rounded bg-primary/80 px-3 py-1 text-white hover:bg-primary",onClick:()=>d(g.project_id),children:"Open"}),a.jsx("button",{className:"rounded border border-slate-700 px-3 py-1 text-slate-200 hover:border-primary/60 hover:text-primary",onClick:()=>f(g),children:"Rename"}),a.jsx("button",{className:"rounded border border-slate-700 px-3 py-1 text-slate-200 hover:border-primary/60 hover:text-primary",onClick:()=>p(g),children:"Duplicate"}),a.jsx("button",{className:"rounded border border-slate-700 px-3 py-1 text-slate-200 hover:border-primary/60 hover:text-primary",onClick:()=>m(g),children:"Sync Drive"})]})]},g.project_id))]})]}),a.jsx("aside",{className:"hidden w-72 flex-shrink-0 border-l border-slate-900/80 bg-slate-950/70 p-6 lg:block",children:a.jsx(Hx,{fallback:zk,children:a.jsx(tj,{})})})]})}function Nj({node:e,onClose:t,onUpdateNodeMeta:n,loading:r=!1}){var m;const[o,s]=y.useState(e.meta||{}),[i,l]=y.useState(!1),{showConfirm:c,ConfirmDialog:u}=pi(),d=()=>{n&&i&&(n(e.node_id,o),l(!1))},f=async()=>{i&&await c({title:"  ",message:"       .     ?",confirmText:"",cancelText:" ",type:"warning"})&&d(),t()},p=(g,w)=>{s(b=>({...b,[g]:w})),l(!0)};return a.jsxs(Do,{title:` : ${e.title}`,onClose:f,actions:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",className:"rounded bg-slate-800 px-3 py-1.5 text-sm text-slate-300 hover:bg-slate-700",onClick:f,children:""}),i&&a.jsx("button",{type:"button",className:"rounded bg-blue-600 px-3 py-1.5 text-sm text-white hover:bg-blue-500",onClick:d,disabled:r,children:" "})]}),children:[a.jsxs("div",{className:"flex flex-col gap-6 p-6 max-h-[70vh] overflow-y-auto",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"mb-3 font-medium text-slate-300",children:"  "}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"ID:"}),a.jsx("span",{className:"font-mono text-slate-300",children:e.node_id})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:":"}),a.jsx("span",{className:"text-slate-300",children:e.type})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:":"}),a.jsx("span",{className:"text-slate-300",children:(e.content||"").length.toLocaleString()})]}),e.type==="ai"&&((m=e.ai)==null?void 0:m.model)&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:":"}),a.jsx("span",{className:"text-slate-300",children:String(e.ai.model)})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"mb-3 font-medium text-slate-300",children:" "}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:" "}),a.jsx("input",{type:"text",className:"w-full rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:String(o.short_description||""),onChange:g=>p("short_description",g.target.value),placeholder:"  ..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:" "}),a.jsxs("select",{className:"w-full rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:String(o.priority||"normal"),onChange:g=>p("priority",g.target.value),children:[a.jsx("option",{value:"low",children:""}),a.jsx("option",{value:"normal",children:""}),a.jsx("option",{value:"high",children:""}),a.jsx("option",{value:"critical",children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:" ( )"}),a.jsx("input",{type:"text",className:"w-full rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:String(o.tags||""),onChange:g=>p("tags",g.target.value),placeholder:"tag1, tag2, tag3"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"mb-3 font-medium text-slate-300",children:"  (JSON)"}),a.jsx("pre",{className:"text-xs bg-slate-900 p-3 rounded border border-slate-700 overflow-auto max-h-40",children:JSON.stringify(o,null,2)})]})]}),a.jsx(u,{})]})}function Sj({node:e,onClose:t,activeTab:n,onTabChange:r,onChangeAi:o,onUpdateNodeMeta:s,providers:i=[],loading:l=!1}){var U,S,z,P,H,M,j,D,F,B,Q,X,re;const[c,u]=y.useState(String(((U=e.ai)==null?void 0:U.system_prompt)||"")),[d,f]=y.useState(String(((S=e.ai)==null?void 0:S.output_example)||"")),[p,m]=y.useState(((z=e.meta)==null?void 0:z.output_type)||"node"),[g,w]=y.useState(!1),{showConfirm:b,ConfirmDialog:h}=pi(),x=i.find(Y=>{var se;return Y.id===((se=e.ai)==null?void 0:se.provider)}),_=()=>{o&&g&&(o(e.node_id,{...e.ai,system_prompt:c,output_example:d}),w(!1))},v=async()=>{g&&await b({title:"  ",message:"       AI.     ?",confirmText:"",cancelText:" ",type:"warning"})&&_(),t()},k=Y=>{u(Y),w(!0)},E=Y=>{f(Y),w(!0)},T=Y=>{const se=i.find(V=>V.id===Y);if(se&&o){const V={...e.ai,provider:Y,model:se.defaultModel};o(e.node_id,V)}},$=Y=>{if(o){const se={...e.ai,model:Y};o(e.node_id,se)}},R=Y=>{if(o){const se={...e.ai,temperature:Y};o(e.node_id,se)}},C=()=>{var G,J,ue;const Y={provider:(G=e.ai)==null?void 0:G.provider,model:(J=e.ai)==null?void 0:J.model,temperature:((ue=e.ai)==null?void 0:ue.temperature)||.7,system_prompt:c,output_example:d,output_type:p},se=JSON.parse(localStorage.getItem("ai_presets")||"[]"),V=`Preset_${new Date().toISOString().slice(0,19).replace(/:/g,"-")}`;se.push({name:V,...Y}),localStorage.setItem("ai_presets",JSON.stringify(se)),alert(`   "${V}"`)},L=Y=>{m(Y),s&&s(e.node_id,{output_type:Y})},W=()=>a.jsxs("div",{className:"border-t border-slate-600 pt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"  "}),a.jsx("div",{className:"flex gap-2 mb-2",children:a.jsx("button",{type:"button",onClick:()=>{const Y=JSON.stringify({nodes:[{type:"text",title:"1.   ",content:" ,       ",children:[{type:"ai",title:"1.1.  ",content:"AI-      ",ai:{system_prompt:"     ",model:"gpt-4",temperature:.7}},{type:"text",title:"1.2.  ",content:"   "}]},{type:"ai_improved",title:"2.  ",content:"AI-     ",ai:{system_prompt:"       ",model:"gpt-4",temperature:.5},children:[{type:"json",title:"2.1.  ",content:"  JSON   "}]},{type:"markdown",title:"3.   ",content:"#   \\n\\n##  \\n\\n1. \\n2.  \\n3.  "}]},null,2);E(Y)},className:"px-3 py-1 text-xs bg-blue-600/20 border border-blue-500/50 text-blue-300 hover:bg-blue-600/30 rounded transition",disabled:l,children:""})}),a.jsx("textarea",{className:"w-full h-32 rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 resize-vertical font-mono text-sm",value:d,onChange:Y=>E(Y.target.value),placeholder:': {"nodes": [{"type": "text", "title": "...", "content": "..."}]}',disabled:l})]});return a.jsxs(Do,{title:`AI : ${e.title}`,onClose:v,actions:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",className:"rounded bg-slate-800 px-3 py-1.5 text-sm text-slate-300 hover:bg-slate-700",onClick:v,children:""}),g&&a.jsx("button",{type:"button",className:"rounded bg-blue-600 px-3 py-1.5 text-sm text-white hover:bg-blue-500",onClick:_,disabled:l,children:" "})]}),children:[a.jsxs("div",{className:"flex flex-col gap-6 p-6 max-h-[70vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex border-b border-slate-700",children:[a.jsx("button",{className:`px-4 py-2 text-sm font-medium transition ${n==="settings"?"border-b-2 border-blue-500 text-blue-400":"text-slate-400 hover:text-slate-200"}`,onClick:()=>r("settings"),children:" "}),a.jsx("button",{className:`px-4 py-2 text-sm font-medium transition ${n==="ai_config"?"border-b-2 border-purple-500 text-purple-400":"text-slate-400 hover:text-slate-200"}`,onClick:()=>r("ai_config"),children:"  "}),a.jsx("button",{className:`px-4 py-2 text-sm font-medium transition ${n==="routing"?"border-b-2 border-green-500 text-green-400":"text-slate-400 hover:text-slate-200"}`,onClick:()=>r("routing"),children:" "})]}),n==="settings"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:" "}),a.jsx("div",{className:"flex gap-2 mb-2",children:a.jsx("button",{type:"button",onClick:()=>{k(` - - workflow.         .

  :
 text -  , , 
 ai - AI-    (    )
 ai_improved -  AI-   
 image - , , 
 video -  , 
 audio -  , , 
 html - HTML , -
 json -    JSON 
 markdown -    Markdown
 file - , , 
 python - Python , , 
 router -  ,   

  :
1.   type  title (!)
2.  content   ,    
3.  AI-  ai   system_prompt
4.    -     
5.       workflow

  ( JSON):
{
  "nodes": [
    {
      "type": "_",
      "title": " ",
      "content": "  ",
      "ai": {
        "system_prompt": "  ",
        "model": "gpt-4",
        "temperature": 0.7
      }
    }
  ]
}

  :
- text:  , , 
- ai:   , , 
- python:  ,  
- image:   , 
- markdown:  , 
- json:   

    workflow!`)},className:"px-3 py-1 text-xs bg-blue-600/20 border border-blue-500/50 text-blue-300 hover:bg-blue-600/30 rounded transition",disabled:l,children:""})}),a.jsx("textarea",{className:"w-full h-48 rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 resize-vertical font-mono text-sm",value:c,onChange:Y=>k(Y.target.value),placeholder:"    AI...",disabled:l})]}),a.jsx(W,{}),a.jsx("div",{className:"border-t border-slate-700 pt-4",children:a.jsxs("div",{className:"flex gap-4 items-end",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:" "}),a.jsxs("select",{value:p,onChange:Y=>L(Y.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:l,children:[a.jsx("option",{value:"mindmap",children:"Mindmap"}),a.jsx("option",{value:"node",children:"Node"}),a.jsx("option",{value:"folder",children:"Folder"})]}),a.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"     "})]}),a.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 bg-blue-600/20 border border-blue-500/50 text-blue-300 hover:bg-blue-600/30 rounded transition flex items-center gap-2",disabled:l,children:"  "})]})})]}),n==="ai_config"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"mb-3 font-medium text-slate-300",children:" "}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:""}),a.jsxs("select",{className:"w-full rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:String(((P=e.ai)==null?void 0:P.provider)||""),onChange:Y=>T(Y.target.value),disabled:l,children:[a.jsx("option",{value:"",disabled:!0,children:" "}),i.map(Y=>a.jsxs("option",{value:Y.id,disabled:!Y.available,children:[Y.name," ",!Y.available&&`(${Y.reason||""})`]},Y.id))]})]}),x&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:""}),a.jsx("select",{className:"w-full rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:String(((H=e.ai)==null?void 0:H.model)||x.defaultModel),onChange:Y=>$(Y.target.value),disabled:l,children:x.models.map(Y=>a.jsx("option",{value:Y,children:Y},Y))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:""}),a.jsx("input",{type:"number",min:"0",max:"2",step:"0.1",className:"w-full rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:Number(((M=e.ai)==null?void 0:M.temperature)||.7),onChange:Y=>R(parseFloat(Y.target.value)||.7),disabled:l}),a.jsx("div",{className:"text-xs text-slate-400 mt-1",children:" 0 ()  2 ().  : 0.7"})]}),a.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:" "}),a.jsx("div",{className:"bg-slate-900 p-3 rounded border border-slate-700 text-xs font-mono",children:a.jsxs("div",{className:"space-y-1 text-slate-300",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:":"})," ",String(((j=e.ai)==null?void 0:j.provider)||" ")]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:":"})," ",String(((D=e.ai)==null?void 0:D.model)||" ")]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:":"})," ",String(((F=e.ai)==null?void 0:F.temperature)||.7)]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:" :"})," ",i.filter(Y=>Y.available).length,"/",i.length]})]})})]})]})]}),a.jsx(W,{})]}),n==="routing"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"mb-3 font-medium text-slate-300",children:" "}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"text-slate-400 text-sm",children:a.jsx("p",{className:"mb-2",children:"         ."})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-slate-900 p-3 rounded border border-slate-700",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:" "}),a.jsxs("div",{className:"text-xs text-slate-400",children:[": ",((Q=(B=e.routing)==null?void 0:B.inputPorts)==null?void 0:Q.length)||0]}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"    "})]}),a.jsxs("div",{className:"bg-slate-900 p-3 rounded border border-slate-700",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:" "}),a.jsxs("div",{className:"text-xs text-slate-400",children:[": ",((re=(X=e.routing)==null?void 0:X.outputPorts)==null?void 0:re.length)||0]}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"    "})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"  "}),a.jsx("div",{className:"bg-slate-900 p-3 rounded border border-slate-700 overflow-auto max-h-60",children:a.jsx("pre",{className:"text-xs text-slate-300 whitespace-pre-wrap",children:JSON.stringify(e.routing||{message:"  "},null,2)})})]}),a.jsxs("div",{className:"text-xs text-slate-500 p-3 bg-slate-900/50 border border-slate-700/50 rounded",children:[a.jsx("strong",{className:"text-slate-400",children:":"}),"        .         ."]})]})]}),a.jsx(W,{})]})]}),a.jsx(h,{})]})}const zr={universal:{outputs:[{id:"text",type:"text",label:"",contentType:"text/plain",enabled:!0,description:"  "},{id:"markdown",type:"markdown",label:"Markdown",contentType:"text/markdown",enabled:!0,description:" markdown "},{id:"json",type:"json",label:"JSON",contentType:"application/json",enabled:!0,description:"  JSON"},{id:"html",type:"html",label:"HTML",contentType:"text/html",enabled:!1,description:"HTML "},{id:"code",type:"code",label:"",contentType:"text/plain",enabled:!1,description:" "}],defaultOutput:"text",autoRouting:{enabled:!0,rules:{detectJson:!0,detectCode:!0,detectMarkdown:!0,detectHtml:!1}},multiOutput:{enabled:!1,formats:[]}},coding:{outputs:[{id:"code",type:"code",label:"",contentType:"text/plain",enabled:!0,description:"    "},{id:"markdown",type:"markdown",label:"",contentType:"text/markdown",enabled:!0,description:"  markdown"},{id:"json",type:"json",label:"Config",contentType:"application/json",enabled:!0,description:" "},{id:"text",type:"text",label:"",contentType:"text/plain",enabled:!0,description:" "}],defaultOutput:"code",autoRouting:{enabled:!0,rules:{detectJson:!0,detectCode:!0,detectMarkdown:!0,detectHtml:!1}},multiOutput:{enabled:!0,formats:["code","markdown"]}},analysis:{outputs:[{id:"json",type:"json",label:"",contentType:"application/json",enabled:!0,description:"  "},{id:"csv",type:"csv",label:"CSV",contentType:"text/csv",enabled:!0,description:" "},{id:"markdown",type:"markdown",label:"",contentType:"text/markdown",enabled:!0,description:"  markdown"},{id:"text",type:"text",label:"",contentType:"text/plain",enabled:!0,description:" "}],defaultOutput:"json",autoRouting:{enabled:!0,rules:{detectJson:!0,detectCode:!1,detectMarkdown:!0,detectHtml:!1}},multiOutput:{enabled:!0,formats:["json","markdown"]}},creative:{outputs:[{id:"markdown",type:"markdown",label:"",contentType:"text/markdown",enabled:!0,description:"   markdown"},{id:"html",type:"html",label:"HTML",contentType:"text/html",enabled:!0,description:"HTML  -"},{id:"text",type:"text",label:"",contentType:"text/plain",enabled:!0,description:" "},{id:"json",type:"json",label:"",contentType:"application/json",enabled:!1,description:" "}],defaultOutput:"markdown",autoRouting:{enabled:!0,rules:{detectJson:!1,detectCode:!1,detectMarkdown:!0,detectHtml:!0}},multiOutput:{enabled:!1,formats:[]}}};function kj(e){return{text:"",json:"",markdown:"",html:"",code:"",yaml:"",xml:"",csv:""}[e]||""}const jj=[{value:"text",label:""},{value:"json",label:"JSON"},{value:"markdown",label:"Markdown"},{value:"html",label:"HTML"},{value:"code",label:""},{value:"yaml",label:"YAML"},{value:"xml",label:"XML"},{value:"csv",label:"CSV"}];function Ej({config:e,onChange:t,onClose:n}){const[r,o]=y.useState(e),s=y.useCallback(()=>{t(r),n()},[r,t,n]),i=y.useCallback(()=>{const d={id:`route_${Date.now()}`,type:"text",label:" ",contentType:"text/plain",enabled:!0,description:""};o(f=>({...f,outputs:[...f.outputs,d]}))},[]),l=y.useCallback((d,f)=>{o(p=>({...p,outputs:p.outputs.map((m,g)=>g===d?{...m,...f}:m)}))},[]),c=y.useCallback(d=>{o(f=>({...f,outputs:f.outputs.filter((p,m)=>m!==d)}))},[]),u=y.useCallback(d=>{const f=zr[d];f&&o(f)},[]);return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-200",children:"   "}),a.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-200 transition-colors",children:""})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-3",children:" "}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(zr).map(([d,f])=>a.jsxs("button",{onClick:()=>u(d),className:"px-3 py-2 bg-slate-700 hover:bg-slate-600 rounded text-sm text-slate-300 transition-colors",children:[d==="universal"&&" ",d==="coding"&&" ",d==="analysis"&&" ",d==="creative"&&" "]},d))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-300",children:" "}),a.jsx("button",{onClick:i,className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded text-sm text-white transition-colors",children:"+  "})]}),a.jsx("div",{className:"space-y-3",children:r.outputs.map((d,f)=>{var p,m;return a.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("span",{className:"text-lg",children:kj(d.type)}),a.jsx("input",{type:"text",value:d.label,onChange:g=>l(f,{label:g.target.value}),className:"flex-1 bg-slate-800 rounded px-2 py-1 text-slate-200 text-sm",placeholder:" "}),a.jsx("select",{value:d.type,onChange:g=>l(f,{type:g.target.value,contentType:Cj(g.target.value)}),className:"bg-slate-800 rounded px-2 py-1 text-slate-200 text-sm",children:jj.map(g=>a.jsx("option",{value:g.value,children:g.label},g.value))}),a.jsxs("label",{className:"flex items-center gap-1 text-sm text-slate-300",children:[a.jsx("input",{type:"checkbox",checked:d.enabled,onChange:g=>l(f,{enabled:g.target.checked}),className:"rounded"}),""]}),a.jsx("button",{onClick:()=>c(f),className:"text-red-400 hover:text-red-300 transition-colors",children:""})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[a.jsx("input",{type:"text",value:d.description||"",onChange:g=>l(f,{description:g.target.value}),className:"bg-slate-800 rounded px-2 py-1 text-slate-200 text-sm",placeholder:" "}),a.jsx("input",{type:"text",value:d.contentType,onChange:g=>l(f,{contentType:g.target.value}),className:"bg-slate-800 rounded px-2 py-1 text-slate-200 text-sm",placeholder:"Content-Type"})]}),a.jsxs("details",{className:"mt-2",children:[a.jsx("summary",{className:"text-sm text-slate-400 cursor-pointer hover:text-slate-300",children:" "}),a.jsx("div",{className:"mt-2 space-y-2",children:a.jsx("input",{type:"text",value:((m=(p=d.conditions)==null?void 0:p.contains)==null?void 0:m.join(", "))||"",onChange:g=>l(f,{conditions:{...d.conditions,contains:g.target.value.split(",").map(w=>w.trim()).filter(Boolean)}}),className:"w-full bg-slate-800 rounded px-2 py-1 text-slate-200 text-sm",placeholder:"  ( )"})})]})]},d.id)})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-3",children:" "}),a.jsxs("div",{className:"bg-slate-700 rounded-lg p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"  "}),a.jsx("select",{value:r.defaultOutput,onChange:d=>o(f=>({...f,defaultOutput:d.target.value})),className:"w-full bg-slate-800 rounded px-2 py-1 text-slate-200 text-sm",children:r.outputs.map(d=>a.jsx("option",{value:d.id,children:d.label},d.id))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[a.jsx("input",{type:"checkbox",checked:r.autoRouting.enabled,onChange:d=>o(f=>({...f,autoRouting:{...f.autoRouting,enabled:d.target.checked}})),className:"rounded"})," "]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"        "})]}),r.autoRouting.enabled&&a.jsx("div",{className:"ml-6 space-y-2",children:Object.entries(r.autoRouting.rules).map(([d,f])=>a.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-400",children:[a.jsx("input",{type:"checkbox",checked:f,onChange:p=>o(m=>({...m,autoRouting:{...m.autoRouting,rules:{...m.autoRouting.rules,[d]:p.target.checked}}})),className:"rounded"}),d==="detectJson"&&" JSON",d==="detectCode"&&" ",d==="detectMarkdown"&&" Markdown",d==="detectHtml"&&" HTML"]},d))}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[a.jsx("input",{type:"checkbox",checked:r.multiOutput.enabled,onChange:d=>o(f=>({...f,multiOutput:{...f.multiOutput,enabled:d.target.checked}})),className:"rounded"})," "]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"     "})]})]})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx("button",{onClick:n,className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 rounded text-slate-200 transition-colors",children:""}),a.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white transition-colors",children:""})]})]})})}function Cj(e){return{text:"text/plain",json:"application/json",markdown:"text/markdown",html:"text/html",code:"text/plain",yaml:"application/x-yaml",xml:"application/xml",csv:"text/csv"}[e]||"text/plain"}function Pj({nodeId:e,projectId:t,compact:n=!1}){const[r,o]=y.useState([]),[s,i]=y.useState(!1),[l,c]=y.useState(null),[u,d]=y.useState(null),f=y.useCallback(async()=>{try{i(!0),d(null);const b=await Gn(t,e);o(b)}catch(b){d(b instanceof Error?b.message:"  ")}finally{i(!1)}},[t,e]);y.useEffect(()=>{f()},[f]);const p=b=>{c(h=>h===b?null:b)},m=b=>new Date(b).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),g=b=>{switch(b){case"success":return"";case"failed":return"";case"running":return"";default:return""}},w=b=>{switch(b){case"success":return"text-green-400";case"failed":return"text-red-400";case"running":return"text-yellow-400";default:return"text-slate-400"}};if(n&&r.length===0)return a.jsx("div",{className:"text-xs text-slate-500 text-center py-2",children:"  "});if(n){const b=r[0];return a.jsxs("div",{className:"bg-slate-800/50 rounded p-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{children:g((b==null?void 0:b.status)||"")}),a.jsx("span",{className:"font-medium text-slate-300",children:" "}),a.jsx("span",{className:"text-slate-500 ml-auto",children:b?m(b.timestamp):" "})]}),b&&a.jsx("div",{className:`${w(b.status)} truncate`,children:b.status==="success"?" ":b.status==="failed"?" ":b.status==="running"?"...":" "})]})}return a.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-slate-300 flex items-center gap-2",children:["  ",r.length>0&&a.jsx("span",{className:"bg-slate-700 text-xs px-2 py-0.5 rounded",children:r.length})]}),a.jsx("button",{onClick:f,disabled:s,className:"text-xs text-blue-400 hover:text-blue-300 disabled:opacity-50",children:s?"":""})]}),u&&a.jsx("div",{className:"bg-red-900/20 border border-red-700/50 rounded p-2 mb-3 text-sm text-red-400",children:u}),s&&r.length===0?a.jsx("div",{className:"text-center text-slate-500 py-4 text-sm",children:" ..."}):r.length===0?a.jsx("div",{className:"text-center text-slate-500 py-4 text-sm",children:"   "}):a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:r.map(b=>a.jsxs("div",{className:"border border-slate-700 rounded-lg overflow-hidden",children:[a.jsxs("button",{onClick:()=>p(b.run_id),className:"w-full p-3 text-left hover:bg-slate-700/30 transition-colors flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("span",{className:"text-lg",children:g(b.status)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:`text-sm font-medium ${w(b.status)}`,children:b.status==="success"?"":b.status==="failed"?"":b.status==="running"?"":""}),a.jsxs("span",{className:"text-xs text-slate-500",children:["ID: ",b.run_id.slice(0,8),"..."]})]}),a.jsx("div",{className:"text-xs text-slate-400",children:m(b.timestamp)})]})]}),a.jsx("span",{className:"text-slate-400 text-sm ml-2",children:l===b.run_id?"":""})]}),l===b.run_id&&a.jsx("div",{className:"bg-slate-900 p-3 border-t border-slate-700",children:a.jsxs("div",{className:"space-y-3",children:[b.input&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-slate-400 mb-1",children:"  :"}),a.jsx("pre",{className:"bg-slate-800 p-2 rounded text-xs text-slate-300 overflow-x-auto",children:typeof b.input=="string"?b.input:JSON.stringify(b.input,null,2)})]}),b.output&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-slate-400 mb-1",children:" :"}),a.jsx("pre",{className:"bg-slate-800 p-2 rounded text-xs text-slate-300 overflow-x-auto",children:typeof b.output=="string"?b.output:JSON.stringify(b.output,null,2)})]}),b.logs&&b.logs.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-slate-400 mb-1",children:"  :"}),a.jsx("div",{className:"bg-slate-800 p-2 rounded text-xs space-y-1",children:b.logs.map((h,x)=>a.jsx("div",{className:"text-slate-300 font-mono",children:h},x))})]}),b.status==="failed"&&b.error&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-red-400 mb-1",children:" :"}),a.jsx("div",{className:"bg-red-900/20 border border-red-700/50 p-2 rounded text-xs text-red-300",children:b.error})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-slate-400 mb-1",children:" :"}),a.jsxs("div",{className:"bg-slate-800 p-2 rounded text-xs text-slate-400 space-y-1",children:[a.jsxs("div",{children:["Run ID: ",a.jsx("span",{className:"text-slate-300 font-mono",children:b.run_id})]}),a.jsxs("div",{children:["Node ID: ",a.jsx("span",{className:"text-slate-300 font-mono",children:b.node_id})]}),a.jsxs("div",{children:[": ",a.jsx("span",{className:"text-slate-300",children:m(b.timestamp)})]}),b.duration_ms&&a.jsxs("div",{children:[": ",a.jsxs("span",{className:"text-slate-300",children:[b.duration_ms,"ms"]})]})]})]})]})})]},b.run_id))})]})}function Tj({nodeId:e,projectId:t,onClose:n}){return a.jsx(Do,{title:"  ",onClose:n,actions:a.jsx("button",{type:"button",className:"rounded bg-slate-800 px-3 py-1.5 text-sm text-slate-300 hover:bg-slate-700",onClick:n,children:""}),children:a.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:a.jsx(Pj,{nodeId:e,projectId:t,compact:!1})})})}const Mj=[{id:"mobile",name:"Mobile",width:"375px"},{id:"tablet",name:"Tablet",width:"768px"},{id:"laptop",name:"Laptop",width:"1024px"},{id:"desktop",name:"Desktop",width:"1440px"},{id:"wide",name:"Wide",width:"1920px"}],Ij={text:"",ai:"",ai_improved:"",parser:"",python:"",file:"",image:"",video:"",folder:"",image_gen:"",audio_gen:"",video_gen:"",html:""},$j=["#ef4444","#f97316","#f59e0b","#eab308","#22c55e","#10b981","#14b8a6","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#a855f7","#ec4899","#f43f5e","#84cc16","#6b7280"],Ih=Rt,Dj=[{id:"stub",name:"Local Stub",models:["local-llm-7b-q5"],defaultModel:"local-llm-7b-q5",available:!0,description:"     .",inputFields:[]},{id:"openai_gpt",name:"OpenAI GPT",models:["gpt-4o-mini","gpt-4o","gpt-4-turbo","gpt-3.5-turbo"],defaultModel:"gpt-4o-mini",available:!0,description:"OpenAI GPT     .",inputFields:[]}];function Rj({data:e,selected:t,dragging:n}){var yi,vi,wi,Zo,bi,_i,Ni,no,Id,$d,Dd,Rd,zd,Ld,Ad,Od,Fd,Hd,Bd,Ud,Vd,Wd,Yd,Kd,Gd,Xd,Qd,Jd,Zd,qd,ef,tf,nf,rf,of,sf,lf,af,cf,uf,df,ff,pf,hf,mf;const{node:r,onRun:o,onRegenerate:s,onDelete:i,onChangeMeta:l,onChangeContent:c,onChangeTitle:u,onChangeAi:d,onChangeUi:f,onOpenSettings:p,onOpenConnections:m,providers:g=Dj,sources:w=[],disabled:b=!1,isGenerating:h=!1}=e,[x,_]=y.useState(()=>r.type==="data"||r.type==="parser"),[v,k]=y.useState(!1),[E,T]=y.useState(!1),[$,R]=y.useState(r.title),[C,L]=y.useState(!1),[W,U]=y.useState(!1),[S,z]=y.useState(""),[P,H]=y.useState("url"),[M,j]=y.useState(!1),[D,F]=y.useState(!1),[B,Q]=y.useState("settings"),[X,re]=y.useState(""),[Y,se]=y.useState(!1),[V,G]=y.useState(!1),[J,ue]=y.useState("node"),[ae,Pe]=y.useState(!1),[_e,ke]=y.useState(((yi=r.ui)==null?void 0:yi.color)??Ih),{showConfirm:Ge,ConfirmDialog:ge}=pi(),[ee,Ne]=y.useState(r.content||""),[ct,mn]=y.useState(String(((vi=r.ai)==null?void 0:vi.system_prompt)||"")),[Je,Zt]=y.useState(((wi=r.meta)==null?void 0:wi.htmlUrl)||"https://wikipedia.org"),[$t,qt]=y.useState(((Zo=r.meta)==null?void 0:Zo.screenWidth)||"desktop"),[$e,Nt]=y.useState(((bi=r.meta)==null?void 0:bi.htmlViewportWidth)||1024),[xt,gn]=y.useState(()=>{var q;return((q=r.meta)==null?void 0:q.htmlViewMode)==="code"?"code":"render"}),[en,Be]=y.useState(((_i=r.meta)==null?void 0:_i.htmlSourceCode)||""),ot=y.useRef(null),St=y.useRef(null),tn=y.useRef(null),Bt=xS(),Ze=Qo(),De=y.useRef({x:0,y:0,width:0,height:0}),Re=_e,nn=r.type==="ai"||r.type==="ai_improved",kt=r.type==="ai_improved"||((Ni=r.meta)==null?void 0:Ni.ui_mode)==="improved",kn=Ij[r.type]||"",Ut=y.useMemo(()=>x?kt?150:110:kt?280:xr,[x,kt]),yt=y.useMemo(()=>{var N;return!nn||!((N=r.ai)!=null&&N.provider)?null:g.find(q=>{var te;return q.id===String((te=r.ai)==null?void 0:te.provider)})||null},[nn,(no=r.ai)==null?void 0:no.provider,g]),_r=y.useCallback(N=>{ke(N),f==null||f(r.node_id,{color:N}),k(!1)},[f,r.node_id]),Zr=y.useCallback(N=>{N.preventDefault(),N.stopPropagation(),k(!v)},[v]),qr=y.useCallback((N,q)=>{N.preventDefault(),N.stopPropagation(),_r(q)},[_r]),I=y.useCallback(N=>{N==null||N.preventDefault(),N==null||N.stopPropagation(),T(!0),R(r.title)},[r.title]),A=y.useCallback(()=>{u(r.node_id,$.trim()),T(!1)},[u,r.node_id,$]),Z=y.useCallback(N=>{N.stopPropagation(),N.key==="Enter"?A():N.key==="Escape"&&(R(r.title),T(!1))},[A,r.title]),ie=y.useCallback(N=>{setTimeout(()=>{A()},100)},[A]),le=y.useCallback(N=>{N.stopPropagation()},[]),de=y.useCallback(()=>{var N;if(S.trim()){const q=((N=r.meta)==null?void 0:N.attachments)||[];l(r.node_id,{attachments:[...q,S.trim()]}),z(""),U(!1)}},[S,(Id=r.meta)==null?void 0:Id.attachments,r.node_id,l]),ye=y.useCallback(N=>{var ce;const q=Array.from(N).map(we=>we.name),te=((ce=r.meta)==null?void 0:ce.attachments)||[];l(r.node_id,{attachments:[...te,...q]}),U(!1),console.log("Files attached:",q)},[($d=r.meta)==null?void 0:$d.attachments,r.node_id,l]);y.useCallback(()=>{U(!0),H("url"),z("")},[]);const xe=y.useCallback(()=>{var ce,we,je,be;const N={provider:(ce=r.ai)==null?void 0:ce.provider,model:(we=r.ai)==null?void 0:we.model,temperature:((je=r.ai)==null?void 0:je.temperature)||.7,system_prompt:ct,output_example:(be=r.ai)==null?void 0:be.output_example,output_type:J},q=JSON.parse(localStorage.getItem("ai_presets")||"[]"),te=`Preset_${new Date().toISOString().slice(0,19).replace(/:/g,"-")}`;q.push({name:te,...N}),localStorage.setItem("ai_presets",JSON.stringify(q)),alert(`   "${te}"`)},[(Dd=r.ai)==null?void 0:Dd.provider,(Rd=r.ai)==null?void 0:Rd.model,(zd=r.ai)==null?void 0:zd.temperature,ct,(Ld=r.ai)==null?void 0:Ld.output_example,J]),he=y.useCallback(N=>{ue(N),l(r.node_id,{output_type:N})},[r.node_id,l]);y.useEffect(()=>{R(r.title)},[r.title]),y.useEffect(()=>{Ne(r.content||"")},[r.content]),y.useEffect(()=>{var N;mn(String(((N=r.ai)==null?void 0:N.system_prompt)||""))},[(Ad=r.ai)==null?void 0:Ad.system_prompt]),y.useEffect(()=>{var N;ke(((N=r.ui)==null?void 0:N.color)??Ih)},[(Od=r.ui)==null?void 0:Od.color]),y.useEffect(()=>{var N;ue(((N=r.meta)==null?void 0:N.output_type)||"node")},[(Fd=r.meta)==null?void 0:Fd.output_type]),y.useEffect(()=>{E&&St.current&&(St.current.focus(),St.current.select())},[E]);const fe=y.useCallback(N=>{Zt(N),l(r.node_id,{htmlUrl:N})},[l,r.node_id]),jt=y.useCallback(N=>{qt(N),l(r.node_id,{screenWidth:N})},[l,r.node_id]),qe=y.useCallback(N=>{Nt(N),l(r.node_id,{htmlViewportWidth:N})},[l,r.node_id]),ut=y.useCallback(N=>{gn(N),l(r.node_id,{htmlViewMode:N})},[l,r.node_id]),Un=y.useCallback(N=>{Be(N),l(r.node_id,{htmlSourceCode:N})},[l,r.node_id]),hi=y.useCallback(()=>{if(xt==="render"){const N=document.querySelector(`[data-node-id="${r.node_id}"] iframe`);N&&Je&&(N.src=Je+"?t="+Date.now(),Be(""),l(r.node_id,{htmlSourceCode:""}))}},[xt,Je,r.node_id,l]),Vn=Ze.getNode(r.node_id),Nr=(Hd=Vn==null?void 0:Vn.style)==null?void 0:Hd.width,Sr=(Bd=Vn==null?void 0:Vn.style)==null?void 0:Bd.height,Wn=y.useMemo(()=>{var q;if(Nr&&typeof Nr=="number"&&Nr>0)return Nr;const N=(q=r.ui)==null?void 0:q.bbox;if(N){const te=N.x2-N.x1;return sj(te)}return ht},[Nr,(Ud=r.ui)==null?void 0:Ud.bbox]),eo=y.useMemo(()=>{var te;if(Sr&&typeof Sr=="number"&&Sr>0)return Sr;const N=(te=r.ui)==null?void 0:te.bbox;if(N){const ce=N.y2-N.y1;return x?Math.max(Ut,ce):Ch(ce,r.type)}return ij(r.content,nn&&!x,x)},[Sr,(Vd=r.ui)==null?void 0:Vd.bbox,r.type,r.content,nn,x,Ut]);y.useEffect(()=>{var ce,we;if(C||!ot.current)return;const N=ot.current.scrollHeight,q=Ze.getNode(r.node_id),te=typeof((ce=q==null?void 0:q.style)==null?void 0:ce.height)=="number"?q.style.height:eo;if(N>te||x){const je=Ch(N,r.type);if(Math.abs(je-te)>1){Ze.setNodes(Te=>Te.map(Ve=>Ve.id===r.node_id?{...Ve,style:{...Ve.style,height:je}}:Ve));const be=((we=r.ui)==null?void 0:we.bbox)||{x1:0,y1:0,x2:Wn,y2:te};f==null||f(r.node_id,{bbox:{...be,y2:be.y1+je}})}}},[X,x,C,r.node_id,Ze,f,r.type,Wn,eo,(Wd=r.ui)==null?void 0:Wd.bbox]);const mi=y.useCallback(N=>{if(N.preventDefault(),N.stopPropagation(),x)return;L(!0),De.current={x:N.clientX,y:N.clientY,width:Wn,height:eo};const q=ce=>{if(!De.current)return;const we=ce.clientX-De.current.x,je=ce.clientY-De.current.y,be=Math.max(Dn,Math.min(hr,De.current.width+we)),Te=Math.max(Ut,Math.min(Rn,De.current.height+je));Ze.setNodes(Ve=>Ve.map(et=>et.id===r.node_id?{...et,style:{...et.style,width:be,height:Te}}:et))},te=ce=>{var et;if(!De.current)return;L(!1);const we=ce.clientX-De.current.x,je=ce.clientY-De.current.y,be=Math.max(Dn,Math.min(hr,De.current.width+we)),Te=Math.max(Ut,Math.min(Rn,De.current.height+je)),Ve=((et=r.ui)==null?void 0:et.bbox)||{x1:0,y1:0};f==null||f(r.node_id,{bbox:{x1:Ve.x1,y1:Ve.y1,x2:Ve.x1+be,y2:Ve.y1+Te}}),document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",te),document.removeEventListener("pointercancel",te),setTimeout(()=>{Bt(r.node_id)},50)};document.addEventListener("pointermove",q),document.addEventListener("pointerup",te),document.addEventListener("pointercancel",te)},[Wn,eo,r.node_id,(Yd=r.ui)==null?void 0:Yd.bbox,f,Bt,Ze,x,Ut]),ya=y.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.currentTarget.setPointerCapture(N.pointerId);const q=N.nativeEvent;mi(q)},[mi]),gi=y.useCallback(N=>{const q=g.find(te=>te.id===N);q&&(d==null||d(r.node_id,{provider:N,model:q.defaultModel}))},[d,r.node_id,g]),va=y.useCallback(N=>{d==null||d(r.node_id,{model:N})},[d,r.node_id]),to=y.useCallback(N=>{Ne(N),c(r.node_id,N)},[c,r.node_id]),xi=y.useCallback(N=>{mn(N),d==null||d(r.node_id,{system_prompt:N})},[d,r.node_id]);return y.useCallback(N=>{l(r.node_id,{displayFields:N})},[l,r.node_id]),y.useMemo(()=>{var q;return((q=r.meta)==null?void 0:q.displayFields)||[]},[(Kd=r.meta)==null?void 0:Kd.displayFields]),y.useCallback(N=>{l(r.node_id,{routingConfig:N})},[l,r.node_id]),y.useMemo(()=>{var q;return((q=r.meta)==null?void 0:q.routingConfig)||{inputPorts:[],outputPorts:[],routingRules:[]}},[(Gd=r.meta)==null?void 0:Gd.routingConfig]),a.jsxs("div",{ref:ot,className:`flow-node flow-node__card ${t?"flow-node--selected":""} ${n?"flow-node--dragging":""} ${C?"flow-node--resizing":""}`,style:{backgroundColor:`${Re}15`,border:`2px solid ${Re}`,borderRadius:"8px",overflow:"hidden",position:"relative",width:"100%",height:"100%",minWidth:`${Dn}px`,minHeight:`${Ut}px`,maxWidth:`${hr}px`,maxHeight:`${Rn}px`,backdropFilter:"blur(10px)",boxShadow:t?`0 0 0 2px ${Re}, 0 8px 24px ${Re}30`:`0 4px 12px ${Re}20`,transition:C?"none":"box-shadow 0.2s ease, transform 0.1s ease, height 0.2s ease-out",transform:n?"scale(1.02)":"scale(1)",display:"flex",flexDirection:"column"},children:[a.jsxs("div",{className:"flow-node__header",style:{backgroundColor:`${Re}25`,borderBottom:`1px solid ${Re}40`,borderRadius:"8px 8px 0 0"},children:[a.jsxs("div",{className:"flow-node__identity",children:[a.jsx("div",{className:"flow-node__type-icon relative",style:{backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:`0 2px 4px ${Re}30`},children:h?a.jsxs("div",{className:"relative flex items-center justify-center",children:[a.jsx("span",{className:"absolute opacity-30",children:kn}),a.jsxs("div",{className:"w-5 h-5 relative",children:[a.jsx("div",{className:"w-full h-full border-2 border-slate-400 border-t-sky-500 rounded-full animate-spin"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"w-1.5 h-1.5 bg-sky-500 rounded-full animate-pulse"})})]})]}):kn}),a.jsxs("div",{className:"flow-node__identity-text",children:[E?a.jsx("input",{ref:St,className:"flow-node__title-input",value:$,onChange:N=>R(N.target.value),onBlur:ie,onKeyDown:Z,onClick:le,maxLength:50,style:{backgroundColor:`${Re}20`,border:`1px solid ${Re}`}}):a.jsx("button",{type:"button",className:"flow-node__title-button",onClick:I,disabled:b,style:{backgroundColor:t?`${Re}30`:`${Re}20`},children:r.title}),a.jsxs("div",{className:"flow-node__meta-row",children:[a.jsx("span",{className:"flow-node__meta-pill",style:{backgroundColor:`${Re}30`},children:r.type}),a.jsx("span",{className:"flow-node__meta-id",children:r.node_id.slice(-8)}),(Xd=r.meta)!=null&&Xd.attachments&&Array.isArray(r.meta.attachments)?a.jsxs("span",{className:"text-blue-300",title:"  ",children:[" ",String(r.meta.attachments.length)]}):null]})]})]}),a.jsxs("div",{className:"flow-node__toolbar",children:[!(r.type==="data"||r.type==="parser")&&a.jsx("button",{type:"button",className:"flow-node__toolbar-button",onClick:N=>{N.preventDefault(),N.stopPropagation(),_(!x)},title:x?"":"",disabled:b,style:{width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:x?"":""}),a.jsx("button",{type:"button",className:"flow-node__toolbar-button",onClick:Zr,title:" ",disabled:b,style:{width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:""}),a.jsx("button",{type:"button",className:"flow-node__toolbar-button",onClick:N=>{N.preventDefault(),N.stopPropagation(),j(!0)},title:" ",disabled:b,style:{width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:""}),a.jsx("button",{type:"button",className:"flow-node__toolbar-button text-red-400 hover:text-red-300",onClick:async N=>{N.preventDefault(),N.stopPropagation(),await Ge({title:" ?",message:"    .        .",confirmText:"",cancelText:"",type:"danger"})&&i(r.node_id)},title:" ",disabled:b,style:{width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:""})]})]}),v&&a.jsx("div",{className:"absolute z-20 top-16 right-4 p-3 bg-slate-900 rounded-lg border border-slate-700 shadow-lg",children:a.jsx("div",{className:"grid grid-cols-4 gap-2",children:$j.map(N=>a.jsx("button",{type:"button",className:"h-6 w-6 rounded-full border border-white/20 transition hover:scale-110",style:{backgroundColor:N},onClick:q=>qr(q,N),title:`Change to ${N}`},N))})}),a.jsx("div",{ref:tn,className:"flow-node__content nodrag",style:{padding:kt?"16px":r.type==="image"?"0":"16px",paddingTop:kt&&x?"0":"16px",paddingBottom:r.type==="image"?"0":"8px",display:"flex",flexDirection:"column",flex:1,minHeight:0,overflow:"hidden",transition:"padding 0.2s ease-out"},children:kt?a.jsxs(a.Fragment,{children:[!x&&a.jsx("div",{className:"flex-1 min-h-0",children:a.jsx("textarea",{value:ee,onChange:N=>to(N.target.value),placeholder:"    ...",disabled:b,className:"w-full h-full p-3 bg-black/20 border border-white/10 rounded text-sm resize-none nodrag",onMouseDown:N=>N.stopPropagation(),onPointerDown:N=>N.stopPropagation(),onKeyDown:N=>N.stopPropagation(),draggable:!1,"data-nodrag":"true",style:{minHeight:"80px",resize:"none",fontSize:"13px",lineHeight:"1.4"}})}),a.jsx("div",{className:"mt-2 border-t border-b border-white/10",style:{backgroundColor:`${Re}10`,flexShrink:0,margin:"8px -12px",padding:"8px 12px"},children:a.jsxs("div",{className:"flex gap-2 items-center justify-between",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",onClick:()=>{Q("settings"),F(!0)},className:"w-7 h-7 rounded border transition flex items-center justify-center bg-black/20 border-white/10 text-white/70 hover:bg-black/30 hover:text-white",title:" ",disabled:b,children:""}),a.jsx("button",{type:"button",onClick:()=>{Q("ai_config"),F(!0)},className:"w-7 h-7 rounded border transition flex items-center justify-center bg-black/20 border-white/10 text-white/70 hover:bg-black/30 hover:text-white",title:" ",disabled:b,children:""}),a.jsx("button",{type:"button",onClick:()=>{Q("routing"),F(!0)},className:"w-7 h-7 rounded border transition flex items-center justify-center bg-black/20 border-white/10 text-white/70 hover:bg-black/30 hover:text-white",title:" ",disabled:b,children:""}),a.jsx("button",{type:"button",onClick:()=>G(!0),className:"w-7 h-7 rounded border transition flex items-center justify-center bg-black/20 border-white/10 text-white/70 hover:bg-black/30 hover:text-white",title:" ",disabled:b,children:""})]}),a.jsxs("div",{className:"flex gap-1 items-center",children:[a.jsxs("select",{value:J,onChange:N=>he(N.target.value),className:"px-2 py-1 text-xs bg-black/30 border border-white/10 rounded text-white/70 hover:text-white hover:bg-black/40 transition",title:" ",disabled:b,children:[a.jsx("option",{value:"mindmap",children:"Mindmap"}),a.jsx("option",{value:"node",children:"Node"}),a.jsx("option",{value:"folder",children:"Folder"})]}),a.jsx("button",{type:"button",onClick:xe,className:"w-7 h-7 rounded border transition flex items-center justify-center bg-black/20 border-blue-500/50 text-blue-300 hover:bg-blue-600/30 hover:text-blue-200",title:"  ",disabled:b,children:""})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",onClick:N=>{N.preventDefault(),N.stopPropagation(),s(r.node_id)},className:"px-3 py-1.5 text-xs rounded border border-orange-500/50 bg-orange-600/20 text-orange-300 hover:bg-orange-600/30 transition",title:" ",disabled:b,children:""}),a.jsx("button",{type:"button",onClick:N=>{N.preventDefault(),N.stopPropagation(),o(r.node_id)},className:"px-3 py-1.5 text-xs rounded border border-green-500/50 bg-green-600/20 text-green-300 hover:bg-green-600/30 transition",title:" ",disabled:b,children:""})]})]})}),X==="settings"&&a.jsx("div",{className:"mt-2 bg-black/20 border border-white/10 rounded p-3 space-y-3",style:{flexShrink:0},children:a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-white/70 block mb-2",children:" "}),a.jsx("div",{className:"flex gap-2 mb-2",children:a.jsx("button",{type:"button",onClick:()=>{xi(` - - workflow.         .

  :
 text -  , , 
 ai - AI-    (    )
 ai_improved -  AI-   
 image - , , 
 video -  , 
 audio -  , , 
 html - HTML , -
 json -    JSON 
 markdown -    Markdown
 file - , , 
 python - Python , , 
 router -  ,   

  :
1.   type  title (!)
2.  content   ,    
3.  AI-  ai   system_prompt
4.    -     
5.       workflow

  ( JSON):
{
  "nodes": [
    {
      "type": "_",
      "title": " ",
      "content": "  ",
      "ai": {
        "system_prompt": "  ",
        "model": "gpt-4",
        "temperature": 0.7
      }
    }
  ]
}

  :
- text:  , , 
- ai:   , , 
- python:  ,  
- image:   , 
- markdown:  , 
- json:   

    workflow!`)},disabled:b,className:"px-2 py-1 text-xs bg-blue-600/20 border border-blue-500/50 text-blue-300 hover:bg-blue-600/30 rounded transition",children:""})}),a.jsx("textarea",{value:ct,onChange:N=>xi(N.target.value),placeholder:":    .",disabled:b,className:"w-full p-3 bg-black/20 border border-white/10 rounded text-sm resize-none nodrag",onMouseDown:N=>N.stopPropagation(),onPointerDown:N=>N.stopPropagation(),onKeyDown:N=>N.stopPropagation(),draggable:!1,"data-nodrag":"true",rows:4,style:{minHeight:"80px",resize:"none",fontSize:"13px",lineHeight:"1.4"}})]})}),X==="ai_config"&&a.jsxs("div",{className:"mt-2 bg-black/20 border border-white/10 rounded p-3 space-y-3",style:{flexShrink:0},children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-white/70 block mb-2",children:""}),a.jsx("select",{value:String(((Qd=r.ai)==null?void 0:Qd.provider)||""),onChange:N=>gi(N.target.value),disabled:b,className:"w-full p-2 bg-black/30 border border-white/10 rounded text-sm nodrag","data-nodrag":"true",children:g.map(N=>a.jsxs("option",{value:N.id,disabled:!N.available,children:[N.name," ",!N.available&&`(${N.reason||""})`]},N.id))})]}),yt&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-white/70 block mb-2",children:""}),a.jsx("select",{value:String(((Jd=r.ai)==null?void 0:Jd.model)||yt.defaultModel),onChange:N=>va(N.target.value),disabled:b,className:"w-full p-2 bg-black/30 border border-white/10 rounded text-sm nodrag","data-nodrag":"true",children:yt.models.map(N=>a.jsx("option",{value:N,children:N},N))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-white/70 block mb-2",children:""}),a.jsx("input",{type:"number",min:"0",max:"2",step:"0.1",value:Number((Zd=r.ai)==null?void 0:Zd.temperature)||.7,onChange:N=>{const q=parseFloat(N.target.value)||.7,te={...r.ai,temperature:q};d==null||d(r.node_id,te)},disabled:b,className:"w-full p-2 bg-black/30 border border-white/10 rounded text-sm nodrag","data-nodrag":"true"}),a.jsx("div",{className:"text-xs text-white/50 mt-1",children:" 0 ()  2 ()"})]})]}),X==="routing"&&a.jsxs("div",{className:"mt-2 bg-black/20 border border-white/10 rounded p-3 space-y-3",style:{flexShrink:0},children:[a.jsxs("div",{className:"text-xs text-white/70",children:[a.jsx("div",{className:"mb-2",children:"  :"}),a.jsx("div",{className:"text-white/50 text-[10px]",children:"       ,   /   ."})]}),a.jsx("div",{className:"p-2 bg-black/20 border border-white/5 rounded text-xs text-white/50 text-center",children:"      "})]})]}):x?null:a.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:r.type==="html"?a.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},"data-node-id":r.node_id,children:[a.jsx("div",{className:"w-full bg-white/5 border border-white/10 rounded flex-1 mb-2 overflow-hidden",children:xt==="render"?Je?a.jsx("iframe",{src:Je,className:"w-full h-full border-0",style:{width:`${$e}px`,height:"100%",minHeight:"200px",transformOrigin:"top left",transform:$e>Wn?`scale(${Wn/$e})`:"none"},sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation",loading:"lazy",title:"Website Preview"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/50 text-sm",children:" URL   "}):a.jsx("textarea",{value:en,onChange:N=>Un(N.target.value),placeholder:" HTML   ...",className:"w-full h-full p-3 bg-transparent border-0 text-white text-xs font-mono resize-none nodrag",style:{fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',lineHeight:"1.4",outline:"none"},"data-nodrag":"true",onMouseDown:N=>N.stopPropagation(),onPointerDown:N=>N.stopPropagation()})}),a.jsxs("div",{className:"space-y-1",children:[xt==="render"&&a.jsxs("div",{className:"flex gap-1 items-end",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("label",{className:"text-[10px] text-white/70 block mb-0.5",children:"URL"}),a.jsx("input",{type:"url",value:Je,onChange:N=>fe(N.target.value),placeholder:"https://wikipedia.org",className:"w-full p-1 bg-black/20 border border-white/10 rounded text-[10px] text-white nodrag",onMouseDown:N=>N.stopPropagation(),onPointerDown:N=>N.stopPropagation(),draggable:!1,"data-nodrag":"true",onKeyDown:N=>{N.stopPropagation(),N.key==="Enter"&&hi()}})]}),a.jsx("button",{onClick:hi,className:"p-1 bg-black/20 border border-white/10 rounded text-white/70 hover:text-white hover:bg-black/30 transition-colors text-[10px]",title:" ",children:""})]}),a.jsxs("div",{className:"flex gap-1 items-end",children:[a.jsxs("div",{className:"w-16",children:[a.jsx("label",{className:"text-[10px] text-white/70 block mb-0.5",children:"Viewport"}),a.jsx("input",{type:"number",value:$e,onChange:N=>qe(Number(N.target.value)||1024),placeholder:"1024",min:"320",max:"1920",className:"w-full p-1 bg-black/20 border border-white/10 rounded text-[10px] text-white nodrag","data-nodrag":"true",title:" viewport  "})]}),a.jsxs("div",{className:"w-20",children:[a.jsx("label",{className:"text-[10px] text-white/70 block mb-0.5",children:""}),a.jsx("select",{value:$t,onChange:N=>jt(N.target.value),className:"w-full p-1 bg-black/20 border border-white/10 rounded text-[10px] text-white nodrag",title:"  ","data-nodrag":"true",children:Mj.map(N=>a.jsx("option",{value:N.id,children:N.name},N.id))})]}),a.jsxs("div",{className:"w-16",children:[a.jsx("label",{className:"text-[10px] text-white/70 block mb-0.5",children:""}),a.jsxs("select",{value:xt,onChange:N=>ut(N.target.value),className:"w-full p-1 bg-black/20 border border-white/10 rounded text-[10px] text-white nodrag",title:" ","data-nodrag":"true",children:[a.jsx("option",{value:"render",children:" "}),a.jsx("option",{value:"code",children:" HTML"})]})]}),xt==="code"&&en&&a.jsx("button",{onClick:()=>{const N=new Blob([en],{type:"text/html"}),q=URL.createObjectURL(N);Zt(q),fe(q),ut("render")},className:"p-1 bg-green-600 hover:bg-green-700 text-white rounded text-[10px] transition-colors",title:" HTML ",children:""})]})]})]}):r.type==="image"?a.jsxs("div",{className:"flex-1 flex flex-col",children:[(()=>{var we,je,be;const N=(we=r.meta)==null?void 0:we.image_url,q=(je=r.meta)==null?void 0:je.image_data,te=typeof q=="string"&&q||typeof N=="string"&&N,ce=((be=r.meta)==null?void 0:be.image_scale)||1;return te?a.jsx("div",{className:"flex-1 overflow-hidden bg-black/20 rounded-none border-0",children:a.jsx("img",{src:te,alt:"Preview",className:"w-full h-full object-cover cursor-pointer",style:{objectFit:"cover",backgroundColor:"rgba(0,0,0,0.1)",transform:`scale(${ce})`,transformOrigin:"center",transition:"transform 0.2s ease"},onError:Te=>{Te.target.style.display="none"},onClick:()=>{const Te=[1,1.5,2,.5],Ve=Te.indexOf(ce),et=Te[(Ve+1)%Te.length];l(r.node_id,{image_scale:et})},title:`: ${Math.round(ce*100)}% (  )`})}):a.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-400 text-sm bg-black/10",children:"  "})})(),a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsx("button",{type:"button",onClick:()=>l(r.node_id,{display_mode:"url"}),className:`px-3 py-1 text-xs rounded border transition ${(((qd=r.meta)==null?void 0:qd.display_mode)||"url")==="url"?"bg-blue-600/20 border-blue-500/50 text-blue-300":"bg-black/20 border-white/10 text-white/70 hover:bg-black/30"}`,children:"  "}),a.jsx("button",{type:"button",onClick:()=>l(r.node_id,{display_mode:"upload"}),className:`px-3 py-1 text-xs rounded border transition ${(((ef=r.meta)==null?void 0:ef.display_mode)||"url")==="upload"?"bg-green-600/20 border-green-500/50 text-green-300":"bg-black/20 border-white/10 text-white/70 hover:bg-black/30"}`,children:" "}),(((tf=r.meta)==null?void 0:tf.image_url)||((nf=r.meta)==null?void 0:nf.image_data))&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-px bg-white/20 mx-1"}),a.jsx("button",{type:"button",onClick:()=>{var te;const N=((te=r.meta)==null?void 0:te.image_scale)||1,q=Math.max(.25,N-.25);l(r.node_id,{image_scale:q})},className:"px-2 py-1 text-xs rounded border border-white/10 bg-black/20 text-white/70 hover:bg-black/30 transition",title:"",children:""}),a.jsxs("span",{className:"px-2 py-1 text-xs text-white/60 flex items-center",children:[Math.round((((rf=r.meta)==null?void 0:rf.image_scale)||1)*100),"%"]}),a.jsx("button",{type:"button",onClick:()=>{var te;const N=((te=r.meta)==null?void 0:te.image_scale)||1,q=Math.min(3,N+.25);l(r.node_id,{image_scale:q})},className:"px-2 py-1 text-xs rounded border border-white/10 bg-black/20 text-white/70 hover:bg-black/30 transition",title:"",children:"+"}),a.jsx("button",{type:"button",onClick:()=>l(r.node_id,{image_scale:1}),className:"px-2 py-1 text-xs rounded border border-white/10 bg-black/20 text-white/70 hover:bg-black/30 transition",title:" ",children:""})]})]}),(((of=r.meta)==null?void 0:of.display_mode)||"url")==="url"?a.jsx("div",{children:a.jsx("input",{type:"url",value:((sf=r.meta)==null?void 0:sf.image_url)||"",onChange:N=>l(r.node_id,{image_url:N.target.value}),placeholder:"https://example.com/image.jpg",className:"w-full p-2 bg-black/20 border border-white/10 rounded text-sm text-white nodrag","data-nodrag":"true"})}):a.jsxs("div",{children:[a.jsx("button",{type:"button",onClick:()=>{const N=document.createElement("input");N.type="file",N.accept="image/*",N.onchange=q=>{var ce;const te=(ce=q.target.files)==null?void 0:ce[0];if(te){const we=new FileReader;we.onload=je=>{var Te;const be=(Te=je.target)==null?void 0:Te.result;l(r.node_id,{image_file:te.name,image_data:be,file_size:te.size,file_type:te.type})},we.readAsDataURL(te)}},N.click()},className:"w-full p-4 bg-black/20 border border-dashed border-white/30 rounded text-sm text-white/70 hover:bg-black/30 hover:border-white/50 transition",children:"   "}),(()=>{var te,ce;const N=(te=r.meta)==null?void 0:te.image_file,q=(ce=r.meta)==null?void 0:ce.file_size;return N&&typeof N=="string"?a.jsxs("div",{className:"mt-2 flex justify-between items-center text-xs",children:[a.jsxs("span",{className:"text-white/70",children:[" ",N]}),typeof q=="number"&&a.jsxs("span",{className:"text-white/50",children:[(q/1024/1024).toFixed(1)," MB"]})]}):null})()]})]}):r.type==="video"?a.jsxs("div",{className:"space-y-3",children:[(()=>{var we,je,be,Te;const N=(we=r.meta)==null?void 0:we.video_url,q=(je=r.meta)==null?void 0:je.video_data,te=typeof q=="string"&&q||typeof N=="string"&&N,ce=((be=r.meta)==null?void 0:be.video_scale)||1;return te?a.jsx("div",{className:"border border-white/10 rounded overflow-hidden bg-black/20",children:a.jsx("video",{src:te,controls:((Te=r.meta)==null?void 0:Te.controls)!==!1,autoPlay:!1,className:"w-full h-auto cursor-pointer",preload:"metadata",style:{maxHeight:`${200*ce}px`,minHeight:"120px",backgroundColor:"rgba(0,0,0,0.1)",transform:`scale(${ce})`,transformOrigin:"center",transition:"transform 0.2s ease"},onClick:Ve=>{Ve.preventDefault();const et=[1,1.5,2,.5],wa=(et.indexOf(ce)+1)%et.length,ey=et[wa];l(r.node_id,{video_scale:ey})},children:"    ."})}):null})(),a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsx("button",{type:"button",onClick:()=>l(r.node_id,{display_mode:"url"}),className:`px-3 py-1 text-xs rounded border transition ${(((lf=r.meta)==null?void 0:lf.display_mode)||"url")==="url"?"bg-blue-600/20 border-blue-500/50 text-blue-300":"bg-black/20 border-white/10 text-white/70 hover:bg-black/30"}`,children:"  "}),a.jsx("button",{type:"button",onClick:()=>l(r.node_id,{display_mode:"upload"}),className:`px-3 py-1 text-xs rounded border transition ${(((af=r.meta)==null?void 0:af.display_mode)||"url")==="upload"?"bg-green-600/20 border-green-500/50 text-green-300":"bg-black/20 border-white/10 text-white/70 hover:bg-black/30"}`,children:" "})]}),(((cf=r.meta)==null?void 0:cf.display_mode)||"url")==="url"?a.jsx("div",{children:a.jsx("input",{type:"url",value:((uf=r.meta)==null?void 0:uf.video_url)||"",onChange:N=>l(r.node_id,{video_url:N.target.value}),placeholder:"https://youtube.com/watch?v=...     ",className:"w-full p-2 bg-black/20 border border-white/10 rounded text-sm text-white nodrag",onMouseDown:N=>N.stopPropagation(),onPointerDown:N=>N.stopPropagation(),onTouchStart:N=>N.stopPropagation(),onKeyDown:N=>N.stopPropagation(),draggable:!1,"data-nodrag":"true"})}):a.jsxs("div",{children:[a.jsx("button",{type:"button",onClick:()=>{const N=document.createElement("input");N.type="file",N.accept="video/*",N.onchange=q=>{var ce;const te=(ce=q.target.files)==null?void 0:ce[0];if(te){const we=new FileReader;we.onload=je=>{var Te;const be=(Te=je.target)==null?void 0:Te.result;l(r.node_id,{video_file:te.name,video_data:be,file_size:te.size,file_type:te.type})},we.readAsDataURL(te)}},N.click()},className:"w-full p-4 bg-black/20 border border-dashed border-white/30 rounded text-sm text-white/70 hover:bg-black/30 hover:border-white/50 transition",children:"   "}),(()=>{var te,ce;const N=(te=r.meta)==null?void 0:te.video_file,q=(ce=r.meta)==null?void 0:ce.file_size;return N&&typeof N=="string"?a.jsxs("div",{className:"mt-2 flex justify-between items-center text-xs",children:[a.jsxs("span",{className:"text-white/70",children:[" ",N]}),typeof q=="number"&&a.jsxs("span",{className:"text-white/50",children:[(q/1024/1024).toFixed(1)," MB"]})]}):null})()]})]}):r.type==="folder"?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex gap-2 items-center mb-3",children:[a.jsx("span",{className:"text-sm text-white/70",children:"   "}),a.jsx("button",{type:"button",onClick:()=>{var N;return l(r.node_id,{collapsed:!((N=r.meta)!=null&&N.collapsed)})},className:`px-2 py-1 text-xs rounded border transition ${(df=r.meta)!=null&&df.collapsed?"bg-orange-600/20 border-orange-500/50 text-orange-300":"bg-blue-600/20 border-blue-500/50 text-blue-300"}`,children:(ff=r.meta)!=null&&ff.collapsed?" ":" "})]}),a.jsx("textarea",{value:ee,onChange:N=>to(N.target.value),placeholder:"   ...",disabled:b,className:"w-full p-2 bg-black/20 border border-white/10 rounded text-sm resize-none nodrag",onMouseDown:N=>N.stopPropagation(),onPointerDown:N=>N.stopPropagation(),onKeyDown:N=>N.stopPropagation(),draggable:!1,"data-nodrag":"true",rows:3}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-white/70",children:" :"}),a.jsxs("span",{className:"text-xs text-white/50",children:[(((pf=r.meta)==null?void 0:pf.folder_items)||[]).length," "]})]}),a.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:(((hf=r.meta)==null?void 0:hf.folder_items)||[]).map((N,q)=>a.jsxs("div",{className:"flex items-center justify-between text-xs bg-black/20 rounded p-2",children:[a.jsx("span",{className:"text-white/80",children:N}),a.jsx("button",{onClick:()=>{var we;const ce=(((we=r.meta)==null?void 0:we.folder_items)||[]).filter((je,be)=>be!==q);l(r.node_id,{folder_items:ce})},className:"text-red-400 hover:text-red-300",children:""})]},q))})]})]}):r.type==="file"?a.jsxs("div",{className:"space-y-3",children:[(()=>{var ce,we,je,be;const N=((ce=r.meta)==null?void 0:ce.attachments)||[];(we=r.meta)==null||we.file_data;const q=(je=r.meta)==null?void 0:je.file_name;return N.length>0||q?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs text-white/70 mb-2",children:" :"}),N.map((Te,Ve)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/20 rounded border border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-base",children:""}),a.jsx("span",{className:"text-sm text-white/80 truncate max-w-48",children:Te})]}),a.jsx("button",{onClick:()=>{const et=N.filter((qx,wa)=>wa!==Ve);l(r.node_id,{attachments:et})},className:"text-red-400 hover:text-red-300 text-xs ml-2",children:""})]},Ve)),q&&a.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/20 rounded border border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-base",children:""}),a.jsx("span",{className:"text-sm text-white/80 truncate max-w-48",children:q})]}),typeof((be=r.meta)==null?void 0:be.file_size)=="number"&&a.jsxs("span",{className:"text-xs text-white/50",children:[(r.meta.file_size/1024/1024).toFixed(1)," MB"]})]})]}):a.jsx("div",{className:"text-center py-8 text-white/50 text-sm border border-dashed border-white/20 rounded",children:"   "})})(),a.jsx("button",{type:"button",onClick:()=>{const N=document.createElement("input");N.type="file",N.multiple=!0,N.onchange=q=>{var ce;const te=q.target.files;if(te&&te.length>0){const we=Array.from(te).map(be=>be.name),je=((ce=r.meta)==null?void 0:ce.attachments)||[];if(te.length===1){const be=te[0],Te=new FileReader;Te.onload=Ve=>{var et;l(r.node_id,{attachments:[...je,...we],file_name:be.name,file_data:(et=Ve.target)==null?void 0:et.result,file_size:be.size,file_type:be.type})},Te.readAsDataURL(be)}else l(r.node_id,{attachments:[...je,...we]})}},N.click()},className:"w-full p-3 bg-black/20 border border-dashed border-white/30 rounded text-sm text-white/70 hover:bg-black/30 hover:border-white/50 transition",children:"  "}),a.jsx("textarea",{value:ee,onChange:N=>to(N.target.value),placeholder:"   ...",disabled:b,className:"w-full p-2 bg-black/20 border border-white/10 rounded text-sm resize-none nodrag",onMouseDown:N=>N.stopPropagation(),onPointerDown:N=>N.stopPropagation(),onKeyDown:N=>N.stopPropagation(),draggable:!1,"data-nodrag":"true",rows:2})]}):a.jsx("textarea",{value:ee,onChange:N=>to(N.target.value),placeholder:" ...",disabled:b,className:"w-full bg-transparent border-none outline-none text-white/90 resize-none nodrag",onMouseDown:N=>N.stopPropagation(),onMouseMove:N=>N.stopPropagation(),onMouseUp:N=>N.stopPropagation(),onPointerDown:N=>N.stopPropagation(),onPointerMove:N=>N.stopPropagation(),onPointerUp:N=>N.stopPropagation(),onKeyDown:N=>N.stopPropagation(),draggable:!1,"data-nodrag":"true",style:{height:"100%",minHeight:"80px",overflow:"auto",resize:"none",scrollbarWidth:"thin",scrollbarColor:"rgba(148, 163, 184, 0.5) transparent",wordWrap:"break-word",whiteSpace:"pre-wrap",fontSize:"13px",lineHeight:"1.4"}})})}),a.jsx("div",{className:"flow-node__footer",style:{backgroundColor:`${Re}20`,borderTop:`1px solid ${Re}30`,flexShrink:0},children:a.jsx("div",{className:"flex justify-between items-center w-full px-3 py-2",children:x?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xs text-white/70",children:r.type.toUpperCase()}),a.jsx("span",{className:"text-xs text-white/50",children:r.type==="image"?"":r.type==="file"?"":`${(r.content||"").length} .`})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xs text-white/70",children:r.type==="image"||r.type==="file"?": ":`: ${(r.content||"").length.toLocaleString()}`}),nn&&yt&&a.jsx("span",{className:"text-xs text-white/60",children:yt.name})]})})}),a.jsx(Yo,{type:"target",position:oe.Left,className:"flow-node__handle flow-node__handle--target",style:{background:"#3b82f6",border:"2px solid #fff",width:14,height:14,top:"60px",left:-7,zIndex:10}}),a.jsx(Yo,{type:"source",position:oe.Right,className:"flow-node__handle flow-node__handle--source",style:{background:"#10b981",border:"2px solid #fff",width:14,height:14,top:"60px",right:-7,zIndex:10}}),!x&&a.jsx("div",{className:"flow-node__resize-handle nodrag nopan",onPointerDown:ya,style:{position:"absolute",bottom:"0px",right:"0px",width:"24px",height:"24px",cursor:"nwse-resize",backgroundColor:C?"rgba(59, 130, 246, 0.9)":"rgba(148, 163, 184, 0.8)",borderRadius:"4px 0 4px 0",zIndex:20,opacity:t||C?1:.7,transition:C?"none":"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"white",userSelect:"none",touchAction:"none",pointerEvents:"auto"},title:"  (  /)",children:""}),M&&a.jsx(Nj,{node:r,onClose:()=>j(!1),onUpdateNodeMeta:l,loading:b}),D&&a.jsx(Sj,{node:r,onClose:()=>F(!1),activeTab:B,onTabChange:Q,onChangeAi:d,onUpdateNodeMeta:l,providers:g,loading:b}),W&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-900 rounded-lg border border-slate-700 p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" "}),a.jsxs("div",{className:"flex rounded-lg overflow-hidden mb-4",children:[a.jsx("button",{className:`flex-1 py-2 px-4 text-sm font-medium transition ${P==="url"?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>H("url"),children:" "}),a.jsx("button",{className:`flex-1 py-2 px-4 text-sm font-medium transition ${P==="upload"?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>H("upload"),children:""})]}),P==="url"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"URL "}),a.jsx("input",{type:"url",value:S,onChange:N=>z(N.target.value),placeholder:"https://example.com/file.pdf",className:"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-md text-white placeholder-slate-400 focus:border-blue-500 focus:outline-none",onKeyDown:N=>{N.key==="Enter"?de():N.key==="Escape"&&U(!1)}})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 text-slate-400 hover:text-white transition",children:""}),a.jsx("button",{onClick:de,disabled:!S.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:""})]})]}),P==="upload"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:" "}),a.jsx("div",{className:"border-2 border-dashed border-slate-600 rounded-md p-6 text-center cursor-pointer hover:border-slate-500 transition",onClick:()=>{const N=document.createElement("input");N.type="file",N.multiple=!0,N.onchange=q=>{const te=q.target.files;te&&ye(te)},N.click()},children:a.jsxs("div",{className:"text-slate-400",children:[a.jsx("div",{className:"text-2xl mb-2",children:""}),a.jsx("div",{className:"text-sm",children:"   "}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"   "})]})})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 text-slate-400 hover:text-white transition",children:""})})]})]})}),Y&&(r.type==="ai_improved"||r.type==="ai")&&a.jsx(Ej,{config:((mf=r.ai)==null?void 0:mf.routing)||zr.universal,onChange:N=>{const q={...r.ai,routing:N};d==null||d(r.node_id,q)},onClose:()=>se(!1)}),V&&(r.type==="ai_improved"||r.type==="ai")&&a.jsx(Tj,{nodeId:r.node_id,projectId:e.projectId||"",onClose:()=>G(!1)}),a.jsx(ge,{})]})}const zj=y.memo(Rj);function Xx(e,t){const n=Math.abs(t.x-e.x),r=Math.max(n*.5,60),o=`${e.x+r},${e.y}`,s=`${t.x-r},${t.y}`;return`M ${e.x},${e.y} C ${o} ${s} ${t.x},${t.y}`}function Wl(e,t,n){switch(n){case oe.Top:return{x:e,y:t-12};case oe.Bottom:return{x:e,y:t+12};case oe.Left:return{x:e-12,y:t};case oe.Right:default:return{x:e+12,y:t}}}const Qx=y.memo(({id:e,sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:s,targetPosition:i,markerEnd:l,style:c,selected:u})=>{const[d,f]=y.useState(!1),{setEdges:p}=Qo(),m=y.useMemo(()=>Wl(t,n,s??oe.Right),[t,n,s]),g=y.useMemo(()=>Wl(r,o,i??oe.Left),[r,o,i]),w=y.useMemo(()=>Xx(m,g),[m,g]),b=y.useMemo(()=>({x:(m.x+g.x)/2,y:(m.y+g.y)/2}),[m,g]),h=(c==null?void 0:c.stroke)||"#38bdf8",x=y.useCallback(_=>{_.stopPropagation(),p(v=>v.filter(k=>k.id!==e))},[e,p]);return a.jsxs("g",{className:"rf-smart-edge",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[a.jsx("path",{id:e,className:`rf-smart-edge__path${u?" rf-smart-edge__path--selected":""}`,d:w,style:{...c,stroke:h,strokeWidth:u?3:2,fill:"none"},markerEnd:l}),a.jsx("path",{d:w,className:"rf-smart-edge__halo",style:{stroke:h,strokeOpacity:.1,strokeWidth:12,fill:"none"}}),d&&a.jsx("foreignObject",{x:b.x-14,y:b.y-14,width:28,height:28,className:"rf-smart-edge__delete-button",children:a.jsx("button",{onClick:x,className:"w-7 h-7 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white rounded-full text-sm font-bold flex items-center justify-center shadow-xl border-2 border-white transition-all duration-200 hover:scale-110",title:" ",style:{backdropFilter:"blur(4px)",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.5), 0 0 0 2px rgba(255, 255, 255, 0.8)"},children:""})})]})});Qx.displayName="SmartBezierEdge";const Jx=y.memo(({fromX:e,fromY:t,toX:n,toY:r,fromPosition:o,toPosition:s,connectionStatus:i,fromNode:l})=>{var p;const c=Wl(e,t,o??oe.Right),u=Wl(n,r,s??oe.Left),d=Xx(c,u),f=((p=l==null?void 0:l.style)==null?void 0:p.borderColor)||"#38bdf8";return a.jsx("path",{className:"rf-smart-edge__preview",d,style:{stroke:f,strokeWidth:2,fill:"none",strokeDasharray:"5,5",opacity:.7}})});Jx.displayName="SmartConnectionLine";const Lj={flowNode:zj},Aj={smart:Qx},Oj=[20,20];function Fj({project:e,selectedNodeId:t,onSelectNode:n,onRunNode:r,onRegenerateNode:o,onDeleteNode:s,onAddNodeFromPalette:i,onCopyNode:l,onChangeNodeMeta:c,onChangeNodeContent:u,onChangeNodeTitle:d,onChangeNodeAi:f,onChangeNodeUi:p,onCreateEdge:m,onRemoveEdges:g,providerOptions:w=[],loading:b=!1,sidebarCollapsed:h=!1,sidebarWidth:x=300,generatingNodes:_=new Set,generatingEdges:v=new Map}){const k=Qo(),[E,T]=y.useState([]),[$,R]=y.useState([]),[C,L]=y.useState(!1),[W,U]=y.useState(!1),S=y.useRef(!0);y.useCallback(()=>{n(null),T(V=>V.map(G=>({...G,selected:!1})))},[n]),y.useEffect(()=>{const V=localStorage.getItem("lc-flow-is-locked");V&&L(JSON.parse(V))},[]),y.useEffect(()=>{console.log("Saving lock state to localStorage:",C),localStorage.setItem("lc-flow-is-locked",JSON.stringify(C))},[C]);const z=y.useMemo(()=>e?`${e.project_id}:${e.updated_at}:${e.nodes.length}:${e.edges.length}`:"empty",[e]);y.useEffect(()=>{const V=localStorage.getItem("lc-flow-is-locked");if(V){const G=JSON.parse(V);G!==C&&(console.log("Restoring lock state after project change:",G),L(G))}},[z,C]),y.useEffect(()=>{if(!e){T([]),R([]);return}const V=new Map;E.forEach(J=>{var ue,ae;(ue=J.style)!=null&&ue.width&&((ae=J.style)!=null&&ae.height)&&V.set(J.id,{width:typeof J.style.width=="number"?J.style.width:parseInt(String(J.style.width))||ht,height:typeof J.style.height=="number"?J.style.height:parseInt(String(J.style.height))||mt})});const G=Bj({project:e,selectedNodeId:t,providerOptions:w,loading:b,isLocked:C,onRunNode:r,onRegenerateNode:o,onDeleteNode:s,onChangeNodeMeta:c,onChangeNodeContent:u,onChangeNodeTitle:d,onChangeNodeAi:f,onChangeNodeUi:p,currentNodeSizes:V,generatingNodes:_});T(G.nodes),R(G.edges),S.current&&G.nodes.length>0&&(S.current=!1,requestAnimationFrame(()=>{k.fitView({padding:.2,duration:220})}))},[z,C]),y.useEffect(()=>{T(V=>V.map(G=>({...G,selected:G.id===t})))},[t]);const P=y.useCallback(V=>{T(G=>ux(V,G)),V.forEach(G=>{if(G.type==="dimensions"&&G.dimensions){const J=k.getNode(G.id);if(!J)return;const ue=J.position.x,ae=J.position.y,Pe=J.width||ht,_e=J.height||mt,ke=Math.max(Dn,Math.min(hr,Math.round(G.dimensions.width??Pe))),Ge=Math.max(xr,Math.min(Rn,Math.round(G.dimensions.height??_e)));p(G.id,{bbox:{x1:ue,y1:ae,x2:ue+ke,y2:ae+Ge}})}})},[k,p]),H=y.useCallback(V=>{R(G=>k2(V,G))},[]),M=y.useCallback(V=>{V.length!==0&&(g==null||g(V.map(G=>({from:G.source,to:G.target}))))},[g]),j=y.useCallback(V=>{V.length!==0&&(console.log("Deleting nodes:",V.map(G=>G.id)),V.forEach((G,J)=>{setTimeout(async()=>{try{await s(G.id)}catch(ue){console.error(`Failed to delete node ${G.id}:`,ue)}},J*100)}))},[s]),D=y.useCallback(V=>{if(!V.source||!V.target)return;if(e==null?void 0:e.edges.some(J=>J.from===V.source&&J.to===V.target)){console.warn(`Edge ${V.source} -> ${V.target} already exists in project`);return}R(J=>{if(!V.target||!V.source||J.some(Pe=>Pe.source===V.source&&Pe.target===V.target))return J;const ae={id:`${V.source}-${V.target}-${Date.now()}`,source:V.source,target:V.target,type:"smart",markerEnd:{type:Xr.ArrowClosed,color:"#38bdf8"}};return Ug(ae,J)}),m==null||m({from:V.source,to:V.target})},[m,e==null?void 0:e.edges]),F=y.useCallback((V,G)=>{n(G.id)},[n]),B=y.useCallback(()=>{n(null)},[n]),Q=y.useCallback(({nodes:V})=>{V.length>0?n(V[0].id):n(null)},[n]),X=y.useCallback(()=>{},[]),re=y.useCallback((V,G)=>{const J=G.position.x,ue=G.position.y,ae=Math.max(Dn,ht),Pe=Math.max(xr,mt);p(G.id,{bbox:{x1:J,y1:ue,x2:J+ae,y2:ue+Pe}})},[p]),Y=y.useCallback(V=>{V.preventDefault(),V.stopPropagation();const G=V.dataTransfer.types.includes("application/reactflow-node-copy"),J=V.dataTransfer.types.includes("application/reactflow-node");V.dataTransfer.dropEffect="copy"},[]),se=y.useCallback(V=>{V.preventDefault(),V.stopPropagation(),console.log("Drop event triggered"),console.log("DataTransfer types:",V.dataTransfer.types),console.log("DataTransfer items:",[...V.dataTransfer.items].map(ae=>ae.type));const G=k.screenToFlowPosition({x:V.clientX,y:V.clientY}),J=V.dataTransfer.getData("application/reactflow-node"),ue=V.dataTransfer.getData("application/reactflow-node-copy");if(console.log("Drop data - slug:",J,"nodeCopyData length:",ue==null?void 0:ue.length),J&&J.trim()){console.log("Creating new node from palette:",J);try{i(J,{x:Math.round(G.x),y:Math.round(G.y)})}catch(ae){console.error("Error creating node from palette:",ae)}}else if(ue&&ue.trim())try{const ae=JSON.parse(ue);console.log("Copying node:",ae.node_id,ae.title),l?(console.log("Calling onCopyNode with position:",G),l(ae,{x:Math.round(G.x),y:Math.round(G.y)})):console.error("onCopyNode function not provided")}catch(ae){console.error("Failed to parse node copy data:",ae)}else console.log("No valid drag data found. Available types:",V.dataTransfer.types),console.log("All available data:",[...V.dataTransfer.types].map(ae=>({type:ae,data:V.dataTransfer.getData(ae)})))},[i,l,k]);return a.jsxs("div",{className:"relative h-full w-full",onDrop:se,onDragOver:Y,children:[a.jsxs(Nx,{nodes:E,edges:$,nodeTypes:Lj,edgeTypes:Aj,onNodesChange:P,onEdgesChange:H,onNodesDelete:j,onEdgesDelete:M,onConnect:D,onNodeClick:F,onPaneClick:B,onSelectionChange:Q,onNodeDragStart:X,onNodeDragStop:re,panOnScroll:!1,panOnDrag:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!1,nodesDraggable:!C,multiSelectionKeyCode:"Shift",deleteKeyCode:["Delete"],minZoom:.3,maxZoom:2,snapToGrid:!C,snapGrid:Oj,connectionLineComponent:Jx,defaultEdgeOptions:{type:"smart",markerEnd:{type:Xr.ArrowClosed}},proOptions:{hideAttribution:!0},className:"bg-slate-900",children:[a.jsx(FS,{color:"#1e293b",gap:20}),a.jsxs(DS,{showFitView:!1,showZoom:!1,showInteractive:!1,position:"bottom-left",className:"!bottom-4 !gap-1",style:{left:h?"66px":`${x+82}px`,display:"flex",flexDirection:"column",gap:"6px"},children:[a.jsx(wn,{onClick:()=>k.fitView({padding:.2,duration:220}),title:"     ",className:"!bg-slate-800/80 !text-slate-300 !h-6 !w-6 !min-h-6 !min-w-6",children:""}),a.jsx(wn,{onClick:()=>k.zoomIn({duration:200}),title:" ",className:"!bg-slate-800/80 !text-slate-300 !h-6 !w-6 !min-h-6 !min-w-6",children:""}),a.jsx(wn,{onClick:()=>k.zoomOut({duration:200}),title:" ",className:"!bg-slate-800/80 !text-slate-300 !h-6 !w-6 !min-h-6 !min-w-6",children:""}),a.jsx(wn,{onClick:()=>{const V=!C;console.log("Lock button clicked, changing state:",C,"->",V),L(V)},title:C?" ":" ",className:`${C?"!bg-orange-500/20 !text-orange-300":"!bg-slate-800/80 !text-slate-300"} !h-6 !w-6 !min-h-6 !min-w-6`,children:C?"":""}),a.jsx(wn,{onClick:()=>U(!W),title:W?" ":"   ",className:`${W?"!bg-slate-700/80 !text-emerald-300":"!bg-slate-800/80 !text-slate-300"} !h-6 !w-6 !min-h-6 !min-w-6 hover:!bg-slate-600/80 transition-colors`,children:""})]}),W&&a.jsx(ES,{position:"bottom-left",className:"!bottom-4 !w-48 !h-32 !bg-slate-900/90 !border-2 !border-slate-500 !rounded-md !shadow-lg",style:{left:h?"118px":`${x+134}px`},nodeColor:V=>{switch(V.data.node.type){case"input":return"#10b981";case"output":return"#f59e0b";case"ai":return"#8b5cf6";default:return"#64748b"}},maskColor:"rgba(15, 23, 42, 0.8)"})]}),(!e||e.nodes.length===0)&&!b&&a.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center text-slate-400",children:a.jsx("p",{className:"rounded-lg bg-slate-900/80 px-5 py-3 text-sm shadow",children:"   ,  "})}),b&&a.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"rounded-lg bg-slate-900/70 px-4 py-2 text-sm text-slate-200 shadow",children:" ..."})})]})}function Hj(e){return a.jsx(ga,{children:a.jsx(Fj,{...e})})}function Bj({project:e,selectedNodeId:t,providerOptions:n,loading:r,isLocked:o,onRunNode:s,onRegenerateNode:i,onDeleteNode:l,onChangeNodeMeta:c,onChangeNodeContent:u,onChangeNodeTitle:d,onChangeNodeAi:f,onChangeNodeUi:p,currentNodeSizes:m,generatingNodes:g=new Set}){if(!e)return{nodes:[],edges:[]};const w=e.nodes.map(h=>{var T;const x=Uj(h),_=m==null?void 0:m.get(h.node_id),v=(_==null?void 0:_.width)??Vj(h),k=(_==null?void 0:_.height)??Wj(h),E={node:h,projectId:e.project_id,onRun:s,onRegenerate:i,onDelete:l,onChangeMeta:c,onChangeContent:u,onChangeTitle:d,onChangeAi:f,onChangeUi:p,providers:n,sources:e.edges.filter($=>$.to===h.node_id).map($=>e.nodes.find(R=>R.node_id===$.from)).filter($=>!!$).map($=>({node_id:$.node_id,title:$.title,type:$.type})),disabled:r,isGenerating:(g==null?void 0:g.has(h.node_id))||!1};return{id:h.node_id,type:"flowNode",position:x,data:E,draggable:!r&&!o,selected:h.node_id===t,style:{width:v,height:k,minWidth:Dn,minHeight:xr,maxWidth:hr,maxHeight:Rn,border:`1px solid ${((T=h.ui)==null?void 0:T.color)??Rt}`,backgroundColor:"#1e293b"}}}),b=e.edges.map((h,x)=>{var k;const _=e.nodes.find(E=>E.node_id===h.from),v=((k=_==null?void 0:_.ui)==null?void 0:k.color)??Rt;return{id:`${h.from}-${h.to}-${x}`,source:h.from,target:h.to,label:h.label,type:"smart",style:{stroke:v},markerEnd:{type:Xr.ArrowClosed,color:v}}});return{nodes:w,edges:b}}function Uj(e){var n;const t=(n=e.ui)==null?void 0:n.bbox;return t?{x:Number.isFinite(t.x1)?t.x1:0,y:Number.isFinite(t.y1)?t.y1:0}:{x:0,y:0}}function Vj(e){var r;const t=(r=e.ui)==null?void 0:r.bbox;if(!t)return ht;const n=t.x2-t.x1;return!Number.isFinite(n)||n<=0?ht:Math.max(Dn,Math.min(hr,n))}function Wj(e){var r;const t=(r=e.ui)==null?void 0:r.bbox;if(!t)return mt;const n=t.y2-t.y1;return!Number.isFinite(n)||n<=0?mt:Math.max(xr,Math.min(Rn,n))}const $h={text:"",ai:"",parser:"",python:"",file:"",image_gen:"",audio_gen:"",video_gen:""};function Yj({project:e,selectedNodeId:t,onSelectNode:n,onCopyNode:r,onOpenNodeModal:o,collapsed:s=!1,onToggleCollapse:i}){const[l,c]=y.useState(new Set),u=(e==null?void 0:e.nodes)??[],d=y.useMemo(()=>[...u].sort((g,w)=>{const b=g.title||"",h=w.title||"";return b.localeCompare(h,"ru")}),[u]),f=g=>{if(!e)return{incoming:[],outgoing:[]};const w=e.edges.filter(h=>h.to===g).map(h=>e.nodes.find(x=>x.node_id===h.from)).filter(Boolean),b=e.edges.filter(h=>h.from===g).map(h=>e.nodes.find(x=>x.node_id===h.to)).filter(Boolean);return{incoming:w,outgoing:b}},p=(g,w)=>{console.log("Drag started for node:",w.node_id,w.title);const b=JSON.stringify(w);g.dataTransfer.setData("application/reactflow-node-copy",b),g.dataTransfer.effectAllowed="copy",console.log("Node data set in dataTransfer:",b)},m=g=>{c(w=>{const b=new Set(w);return b.has(g)?b.delete(g):b.add(g),b})};return s?a.jsxs("div",{className:"flex h-full w-12 flex-col bg-slate-800 rounded-lg shadow",children:[a.jsx("button",{type:"button",onClick:i,className:"flex h-12 w-12 items-center justify-center text-slate-300 hover:bg-slate-700 rounded-t-lg bg-transparent border-0 p-0",style:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none"},title:"  ",children:""}),a.jsxs("div",{className:"flex-1 flex flex-col items-center py-2 gap-1 overflow-y-auto",children:[d.slice(0,8).map(g=>{var x;const w=$h[g.type]??"",b=g.node_id===t,h=((x=g.ui)==null?void 0:x.color)||Rt;return a.jsx("button",{type:"button",onClick:()=>n(g.node_id),className:"relative w-8 h-8 flex items-center justify-center rounded text-xs transition overflow-hidden bg-transparent border-0 p-0",style:{backgroundColor:"transparent",border:`1px solid ${h}40`,backdropFilter:"blur(10px)",boxShadow:b?`0 0 0 1px ${h}, 0 4px 12px ${h}20`:"0 2px 6px rgba(0,0,0,0.1)",backgroundImage:"none"},title:g.title,children:a.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded text-xs",style:{backgroundColor:"transparent",color:"white"},children:w})},g.node_id)}),d.length>8&&a.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["+",d.length-8]})]})]}):a.jsxs("section",{className:"flex h-full w-full flex-col overflow-hidden rounded-lg bg-slate-800 p-4 shadow",children:[a.jsxs("header",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-white",children:""}),a.jsxs("p",{className:"text-xs text-slate-400",children:[u.length," "]})]}),a.jsx("button",{type:"button",onClick:i,className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-200 hover:bg-slate-700/30 rounded transition bg-transparent border-0 p-0",style:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none"},title:" ",children:""})]}),a.jsxs("ul",{className:"flex-1 space-y-2 overflow-y-auto custom-scrollbar pr-1",children:[d.map(g=>{var v;const w=$h[g.type]??"",b=g.node_id===t,h=l.has(g.node_id),x=((v=g.ui)==null?void 0:v.color)||Rt,_=f(g.node_id);return a.jsx("li",{children:a.jsxs("div",{className:"relative rounded-lg overflow-hidden cursor-move h-16",draggable:!0,onDragStart:k=>p(k,g),style:{backgroundColor:`${x}10`,border:`1px solid ${x}40`,boxShadow:b?`0 0 0 1px ${x}, 0 4px 12px ${x}20`:"0 2px 6px rgba(0,0,0,0.1)"},children:[a.jsxs("div",{className:"flex items-center justify-between p-3 h-full transition",children:[a.jsxs("button",{type:"button",onClick:()=>n(g.node_id),className:"flex items-center gap-3 flex-1 text-left bg-transparent hover:bg-transparent p-0 border-0 h-full min-w-0",style:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none"},children:[a.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded text-sm flex-shrink-0",style:{backgroundColor:"transparent",color:"white"},children:w}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-white truncate",children:g.title}),a.jsx("p",{className:"text-[11px] text-slate-400 truncate",children:g.node_id})]})]}),(_.incoming.length>0||_.outgoing.length>0)&&a.jsx("button",{type:"button",onClick:()=>m(g.node_id),className:"ml-2 w-6 h-6 flex items-center justify-center text-slate-400 hover:text-slate-200 hover:bg-slate-700/30 rounded transition text-xs bg-transparent border-0 p-0 flex-shrink-0",style:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none"},title:h?" ":" ",children:h?"":"+"})]}),h&&(_.incoming.length>0||_.outgoing.length>0)&&a.jsx("div",{className:"p-3",style:{backgroundColor:"transparent"},children:a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-400 mb-2 font-medium",children:":"}),_.incoming.length===0?a.jsx("div",{className:"text-slate-500 italic",children:""}):_.incoming.map(k=>a.jsx("button",{type:"button",onClick:()=>o==null?void 0:o(k.node_id),className:"block text-emerald-300 hover:text-emerald-200 transition truncate w-full text-left mb-1 hover:underline bg-transparent border-0 p-0",style:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none"},title:k.title,children:k.title},k.node_id))]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-400 mb-2 font-medium",children:":"}),_.outgoing.length===0?a.jsx("div",{className:"text-slate-500 italic",children:""}):_.outgoing.map(k=>a.jsx("button",{type:"button",onClick:()=>o==null?void 0:o(k.node_id),className:"block text-cyan-300 hover:text-cyan-200 transition truncate w-full text-left mb-1 hover:underline bg-transparent border-0 p-0",style:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none"},title:k.title,children:k.title},k.node_id))]})]})})]})},g.node_id)}),d.length===0&&a.jsx("li",{className:"rounded border border-dashed border-slate-700 bg-slate-900/40 p-4 text-center text-sm text-slate-400",children:"  ."})]})]})}const yu=[{slug:"text",title:"",description:"       .",icon:"",template:{type:"text",title:" ",content_type:"text/plain",content:"",meta:{short_description:""}}},{slug:"file",title:"",description:"      .",icon:"",template:{type:"file",title:" ",meta:{short_description:""}}},{slug:"image",title:"",description:"        .",icon:"",template:{type:"image",title:" ",content_type:"image/url",content:"",meta:{short_description:"    ",image_url:"",image_file:null,display_mode:"url",max_width:400,max_height:300}}},{slug:"video",title:"",description:"       .",icon:"",template:{type:"video",title:" ",content_type:"video/url",content:"",meta:{short_description:"    ",video_url:"",video_file:null,display_mode:"url",autoplay:!1,controls:!0,max_width:400,max_height:300}}},{slug:"folder",title:"",description:"    .",icon:"",template:{type:"folder",title:" ",content_type:"text/plain",content:"",meta:{short_description:"   ",folder_items:[],collapsed:!1,folder_color:"#6B7280"}}},{slug:"html",title:"HTML Embed",description:" HTML-   , 3D  .",icon:"",template:{type:"html",title:"HTML ",content_type:"text/html",content:'<div style="padding:16px;color:white;background:#1f2937">HTML placeholder</div>',meta:{short_description:" HTML-",embed_width:640,input_ports:[]}}},{slug:"agent",title:" ",description:"-     (, JSON, markdown, HTML, )",icon:"",category:"agents",agentCategory:"basic",agentType:"built_in",template:{type:"ai_improved",title:" ",content:"",content_type:"text/plain",ai:{provider:"openai_gpt",model:"gpt-4",max_tokens:2e3,temperature:.7,routing:zr.universal}}},{slug:"coding_agent",title:"-",description:"     : , , ",icon:"",category:"agents",agentCategory:"coding",agentType:"built_in",template:{type:"ai_improved",title:"-",content:"",content_type:"text/plain",ai:{provider:"openai_gpt",model:"gpt-4",max_tokens:4e3,temperature:.3,system_prompt:"  .  ,   .    .",routing:zr.coding}}},{slug:"analysis_agent",title:"-",description:"     : JSON , CSV,   markdown",icon:"",category:"agents",agentCategory:"analysis",agentType:"built_in",template:{type:"ai_improved",title:"-",content:"",content_type:"application/json",ai:{provider:"openai_gpt",model:"gpt-4",max_tokens:3e3,temperature:.5,system_prompt:"  .     JSON .  ,   .",routing:zr.analysis}}},{slug:"creative_agent",title:" ",description:"     : markdown, HTML, ",icon:"",category:"agents",agentCategory:"creative",agentType:"built_in",template:{type:"ai_improved",title:" ",content:"",content_type:"text/markdown",ai:{provider:"openai_gpt",model:"gpt-4",max_tokens:3e3,temperature:.8,system_prompt:"     .  ,   .",routing:zr.creative}}}],Dh={basic:{title:"",description:" -"},coding:{title:"",description:"  "},analysis:{title:"",description:" "},creative:{title:"",description:" "}},co="`",Zx=["# I'm a note","","Doubleclick to edit me.","",`- **Bold**: ${co}**text**${co}`,`- Links: ${co}[link](https://example.com)${co}`,`- Lists: start with ${co}-${co}`,""].join(`
`),vu=e=>{switch(e){case"input":return"#10b981";case"output":return"#f59e0b";case"ai":return"#8b5cf6";case"ai_improved":return"#8b5cf6";case"text":return"#64748b";case"file":return"#f59e0b";case"image":return"#ec4899";case"video":return"#06b6d4";case"audio":return"#84cc16";case"html":return"#f97316";case"transformer":return"#3b82f6";default:return"#6b7280"}},Kj=[{key:"basic",title:" ",collapsible:!1},{key:"agents",title:" ",collapsible:!0},{key:"personal_agents",title:" ",collapsible:!0}];function Gj({onCreateNode:e,disabled:t,collapsed:n=!1,onToggleCollapse:r}){const[o,s]=y.useState(""),[i,l]=y.useState({}),[c,u]=y.useState({basic:!1,coding:!0,analysis:!0,creative:!0}),d=o.trim().toLowerCase(),f=y.useMemo(()=>d?yu.filter(v=>`${v.slug} ${v.title} ${v.description}`.toLowerCase().includes(d)):yu,[d]),p=y.useMemo(()=>{const v={basic:[],coding:[],analysis:[],creative:[]};return f.forEach(k=>{if(k.category!=="agents"||(k.agentType??"built_in")!=="built_in")return;const E=k.agentCategory??"basic";v[E]&&v[E].push(k)}),v},[f]),m=Kj.map(v=>{if(v.key==="agents")return{...v,items:f.filter(E=>(E.category??"basic")==="agents"&&(E.agentType??"built_in")==="built_in")};if(v.key==="personal_agents")return{...v,items:f.filter(E=>(E.category??"basic")==="agents"&&(E.agentType??"built_in")==="personal")};const k=f.filter(E=>(E.category??"basic")===v.key);return{...v,items:k}}).filter(v=>v.items.length>0||v.key==="personal_agents"),g=(v,k)=>{console.log("Drag start for item:",k.slug),v.dataTransfer.setData("application/reactflow-node",k.slug),v.dataTransfer.effectAllowed="copy",v.dataTransfer.setData("text/plain",k.slug),console.log("DataTransfer set with slug:",k.slug)},w=v=>{e(Xj(v),v.slug)},b=v=>{l(k=>({...k,[v]:!k[v]}))},h=v=>{u(k=>({...k,[v]:!k[v]}))},x=d.length>0,_=v=>Qj(v,!!t,w,g);return n?a.jsxs("div",{className:"flex h-full w-12 flex-col bg-slate-800 rounded-lg shadow",children:[a.jsx("button",{type:"button",onClick:r,className:"flex h-12 w-12 items-center justify-center text-slate-300 hover:bg-slate-700 rounded-t-lg bg-transparent border-0 p-0",style:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none"},title:"  ",children:""}),a.jsxs("div",{className:"flex-1 flex flex-col items-center py-2 gap-1 overflow-y-auto",children:[f.slice(0,10).map(v=>{const k=v.icon||"",E=vu(v.template.type);return a.jsx("button",{type:"button",onClick:()=>w(v),draggable:!0,onDragStart:T=>g(T,v),className:"relative w-8 h-8 flex items-center justify-center rounded text-xs transition overflow-hidden bg-transparent border-0 p-0",style:{backgroundColor:"transparent",border:`1px solid ${E}40`,backdropFilter:"blur(10px)",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",backgroundImage:"none"},title:v.title,disabled:t,children:a.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded text-xs",style:{backgroundColor:"transparent",color:"white"},children:k})},v.slug)}),f.length>10&&a.jsxs("div",{className:"text-xs text-slate-400 mt-1 transform rotate-90 origin-center",children:["+",f.length-10]})]})]}):a.jsxs("section",{className:"flex h-full w-full flex-col overflow-hidden rounded-lg bg-slate-800 p-4 shadow",children:[a.jsxs("header",{className:"mb-3 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold",children:" "}),a.jsx("button",{type:"button",onClick:r,className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-200 hover:bg-slate-700/30 rounded transition bg-transparent border-0 p-0",style:{backgroundColor:"transparent",backgroundImage:"none",boxShadow:"none"},title:" ",children:""})]}),a.jsx("input",{type:"search",value:o,onChange:v=>s(v.target.value),placeholder:" ...",className:"w-full rounded border border-slate-700 bg-slate-900 px-3 py-1.5 text-sm text-slate-100 focus:border-primary focus:outline-none"}),a.jsx("p",{className:"text-xs text-slate-400",children:"  ,  "})]}),a.jsxs("div",{className:"flex-1 space-y-3 overflow-y-auto custom-scrollbar pr-1 text-sm",children:[m.length===0&&a.jsx("p",{className:"rounded border border-dashed border-slate-700 bg-slate-900/40 p-4 text-center text-xs text-slate-400",children:"  ."}),m.map(v=>{const k=v.collapsible&&!x&&(i[v.key]??!0);return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{type:"button",className:`flex w-full items-center justify-between rounded bg-slate-900/70 px-3 py-1.5 text-left text-xs font-semibold uppercase tracking-wide text-slate-300 border-0 ${v.collapsible?"hover:bg-slate-900/90":""}`,style:{backgroundColor:"rgb(15 23 42 / 0.7)",backgroundImage:"none",boxShadow:"none"},onClick:()=>v.collapsible&&!x&&b(v.key),disabled:!v.collapsible||x,children:[a.jsx("span",{children:v.title}),v.collapsible&&a.jsx("span",{children:k?"":""})]}),!k&&a.jsx("div",{className:"space-y-2",children:v.key==="agents"&&!x?Object.keys(Dh).filter(E=>p[E].length>0).map(E=>{const T=c[E]??!1,$=Dh[E];return a.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-700/60 bg-slate-900/60",children:[a.jsxs("button",{type:"button",className:`flex w-full items-start justify-between gap-2 px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide text-white transition border-0 ${T?"bg-sky-700":"bg-sky-600"} hover:bg-sky-500`,style:{backgroundColor:T?"rgb(3 105 161)":"rgb(2 132 199)",backgroundImage:"none",boxShadow:"none"},onClick:()=>h(E),children:[a.jsxs("span",{children:[$.title,a.jsx("span",{className:"block text-[10px] font-normal tracking-normal text-slate-100/80",children:$.description})]}),a.jsx("span",{children:T?"":""})]}),!T&&a.jsx("div",{className:"grid grid-cols-1 gap-2 bg-slate-900/80 px-3 pb-3 pt-2",children:p[E].map(R=>_(R))})]},E)}):v.key==="personal_agents"&&v.items.length===0?a.jsxs("div",{className:"px-3 py-4 text-center text-sm text-slate-400",children:[a.jsx("div",{className:"mb-2 text-slate-500",children:""}),a.jsx("div",{children:"  "}),a.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"     "})]}):a.jsx("div",{className:"grid grid-cols-1 gap-2",children:v.items.map(E=>_(E))})})]},v.key)})]})]})}function Xj(e){return e.slug!=="text"?e.template:{...e.template,content:e.template.content&&e.template.content.length>0?e.template.content:Zx,content_type:"text/markdown"}}function Qj(e,t=!1,n,r){const o=n??(()=>{}),s=r??(()=>{});return a.jsxs("button",{type:"button",draggable:!t,onDragStart:i=>{t||s(i,e)},onClick:()=>{t||o(e)},onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),t||o(e))},className:`flex cursor-move items-start gap-3 rounded-lg p-3 transition h-20 w-full ${t?"pointer-events-none opacity-40":""}`,style:{border:`1px solid ${vu(e.template.type)}40`,backgroundColor:`${vu(e.template.type)}10`},tabIndex:t?-1:0,disabled:t,children:[a.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center h-full text-left",children:[a.jsx("p",{className:"font-semibold text-white text-sm truncate leading-tight mb-1",children:e.title}),a.jsx("p",{className:"text-xs opacity-70 line-clamp-2 overflow-hidden text-left leading-tight",children:e.description})]}),a.jsx("span",{className:"text-xl flex-shrink-0 mt-1",children:e.icon})]},e.slug)}const Jj={openai:{daily_limit:1e5,monthly_limit:2e6,cost_per_1k_tokens:.002},anthropic:{daily_limit:8e4,monthly_limit:15e5,cost_per_1k_tokens:.008},gemini:{daily_limit:15e4,monthly_limit:3e6,cost_per_1k_tokens:.001}};function Rh(e){return Math.ceil(e.length/4)}function Zj(e){return y.useMemo(()=>{if(!(e!=null&&e.nodes))return{total:{prompt_tokens:0,completion_tokens:0,total_tokens:0},byProvider:{},estimatedCost:0,warnings:[]};const n={},r=[];let o=0;return e.nodes.forEach(i=>{var l;if(i.type==="ai"&&((l=i.ai)!=null&&l.provider)){const c=i.ai.provider;n[c]||(n[c]={prompt_tokens:0,completion_tokens:0,total_tokens:0});const u=Rh(i.content||""),d=e.nodes.filter(b=>b.node_id!==i.node_id).reduce((b,h)=>b+Rh(h.content||""),0),f=Math.max(500,u*.3),p=u+d,m=f,g=p+m;n[c].prompt_tokens+=p,n[c].completion_tokens+=m,n[c].total_tokens+=g;const w=Jj[c];if(w){const b=g/1e3*w.cost_per_1k_tokens;o+=b,n[c].total_tokens>w.daily_limit&&r.push(`    ${c}`)}}}),{total:Object.values(n).reduce((i,l)=>({prompt_tokens:i.prompt_tokens+l.prompt_tokens,completion_tokens:i.completion_tokens+l.completion_tokens,total_tokens:i.total_tokens+l.total_tokens}),{prompt_tokens:0,completion_tokens:0,total_tokens:0}),byProvider:n,estimatedCost:o,warnings:r}},[e])}function jr(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString()}function zh(e){return`$${e.toFixed(4)}`}function qj({project:e,className:t="",compact:n=!1}){const{total:r,byProvider:o,estimatedCost:s,warnings:i}=Zj(e);if(!e||r.total_tokens===0)return null;const l=i.length>0;return n?a.jsxs("div",{className:`flex items-center gap-6 text-sm ${t}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-white",children:"  "}),a.jsx("span",{className:"text-white font-medium",children:jr(r.total_tokens)})]}),a.jsx("div",{className:"text-slate-400",children:zh(s)}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[a.jsxs("span",{children:["Prompt: ",jr(r.prompt_tokens)]}),a.jsxs("span",{children:["Completion: ",jr(r.completion_tokens)]})]})]}):a.jsx("div",{className:`bg-slate-800 rounded-lg border ${l?"border-red-500":"border-slate-700"} ${t}`,children:a.jsxs("div",{className:"p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h3",{className:"text-sm font-medium text-white flex items-center gap-2",children:["  ",l&&a.jsxs("span",{className:"text-red-400 text-xs bg-red-900/30 px-2 py-1 rounded",children:[" ",i.length]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-white",children:jr(r.total_tokens)}),a.jsx("div",{className:"text-xs text-slate-400",children:zh(s)})]})]}),Object.keys(o).length>1&&a.jsx("div",{className:"space-y-1 mb-2",children:Object.entries(o).map(([c,u])=>a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-slate-300 capitalize",children:c}),a.jsx("span",{className:"text-slate-400",children:jr(u.total_tokens)})]},c))}),i.length>0&&a.jsx("div",{className:"space-y-1",children:i.map((c,u)=>a.jsxs("div",{className:"text-xs text-red-400 bg-red-900/20 p-2 rounded",children:[" ",c]},u))}),a.jsxs("div",{className:"text-xs text-slate-500 mt-2 pt-2 border-t border-slate-700",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Prompt:"}),a.jsx("span",{children:jr(r.prompt_tokens)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Completion:"}),a.jsx("span",{children:jr(r.completion_tokens)})]})]})]})})}const eE=220,tE=400,nE=300,rE=320;function oE(){var qr;const{projectId:e}=mk(),t=fi(),{project:n,setProject:r,clearProject:o,loading:s,setLoading:i,error:l,setError:c,selectedNodeId:u,selectNode:d,runs:f,setRuns:p,upsertNodeContent:m,addNodeFromServer:g,removeNode:w,setEdges:b}=Yx(),{integrations:h,fetchIntegrations:x}=Wx(),[_,v]=y.useState({status:"idle"}),[k,E]=y.useState(nE),[T,$]=y.useState(rE),[R,C]=y.useState(!1),[L,W]=y.useState(!1),[U,S]=y.useState(null),[z,P]=y.useState(null),[H,M]=y.useState(!1),[j,D]=y.useState(!1),[F,B]=y.useState(null),[Q,X]=y.useState(!1),[re,Y]=y.useState(!1),[se,V]=y.useState(""),[G,J]=y.useState(""),[ue,ae]=y.useState(new Set),[Pe,_e]=y.useState(new Map),{showConfirm:ke,ConfirmDialog:Ge}=pi(),ge=y.useRef(new Map),ee=y.useRef(new Map);y.useEffect(()=>{const I=A=>{j&&(A.preventDefault(),A.returnValue="    .  ,    ?")};return window.addEventListener("beforeunload",I),()=>window.removeEventListener("beforeunload",I)},[j]);const Ne=y.useMemo(()=>ao(n,u),[n,u]);y.useMemo(()=>Ne?cj(n,Ne.node_id):[],[n,Ne]),y.useMemo(()=>Ne?uj(n,Ne.node_id):[],[n,Ne]);const ct=y.useMemo(()=>{const I=new Map;return yu.forEach(A=>{const Z=A.slug==="text"?{...A.template,content:A.template.content&&A.template.content.length>0?A.template.content:Zx,content_type:"text/markdown"}:A.template;I.set(A.slug,Z)}),I},[]),mn=y.useMemo(()=>{const I=[];return I.push({id:"stub",name:"Local Stub",models:["local-llm-7b-q5"],defaultModel:"local-llm-7b-q5",available:!0,description:"     .",inputFields:[]}),h.forEach(A=>{const Z=!!(A.apiKey&&A.apiKey.trim().length>0);let ie=[],le="";A.providerId==="openai_gpt"?(ie=["gpt-4o-mini","gpt-4o","gpt-4-turbo","gpt-3.5-turbo"],le="gpt-4o-mini"):A.providerId==="anthropic"?(ie=["claude-3-haiku","claude-3-sonnet","claude-3-opus"],le="claude-3-haiku"):(ie=["default-model"],le="default-model"),I.push({id:A.providerId,name:A.name,models:ie,defaultModel:le,available:Z,description:A.description||`${A.name} integration`,reason:Z?void 0:" API   ,   .",config:{api_key:A.apiKey,base_url:A.baseUrl,organization:A.organization},systemPromptTemplate:A.systemPrompt,inputFields:A.inputFields||[]})}),I},[h]);y.useEffect(()=>()=>{ee.current.forEach(I=>{window.clearTimeout(I)}),ee.current.clear(),ge.current.clear(),o()},[o]),y.useEffect(()=>{x()},[x]),y.useEffect(()=>{if(!e)return;(async()=>{try{i(!0),c(null),P(null);const A=await kr(e);r(A)}catch(A){const Z=A instanceof Error?A.message:String(A);c(Z),P(Z)}finally{i(!1)}})().catch(A=>{const Z=A instanceof Error?A.message:String(A);c(Z),P(Z)})},[e,r,c,i]),y.useEffect(()=>{(async()=>{if(!(!n||!Ne))try{const A=await Gn(n.project_id,Ne.node_id);p(Ne.node_id,A)}catch(A){console.error(A)}})()},[n,Ne,p]);const Je=y.useCallback(async(I,A,Z)=>{if(!n)return;const ie=ht,le=mt,de=Z?Math.round(Z.x):0,ye=Z?Math.round(Z.y):0,xe={slug:A,type:I.type,title:I.title,content_type:I.content_type,content:I.content,meta:I.meta,ai:I.ai,parser:I.parser,python:I.python,visibility_rules:I.visibility_rules,position:Z,ui:{color:Rt,bbox:{x1:de,y1:ye,x2:de+ie,y2:ye+le}},ai_visible:!0,connections:{incoming:[],outgoing:[]}};try{i(!0),c(null);const he=await fs(n.project_id,xe);if(g(he.node,he.project_updated_at),(I.type==="ai"||A.includes("agent"))&&u)try{const fe=await ps(n.project_id,{from:u,to:he.node.node_id,label:"auto-connected"});b(fe.edges,fe.updated_at)}catch(fe){console.warn("Failed to auto-connect nodes:",fe)}}catch(he){const fe=he instanceof Error?he.message:String(he);c(fe)}finally{i(!1)}},[n,u,i,c,g,b]),Zt=y.useCallback((I,A)=>{Je(I,A)},[Je]),$t=y.useCallback((I,A)=>{const Z=ct.get(I);Z&&Je(Z,I,A)},[Je,ct]),qt=y.useCallback(async(I,A)=>{var ie;if(!n)return;const Z={type:I.type,title:`${I.title} ()`,content_type:I.content_type,content:I.content,meta:I.meta?{...I.meta}:void 0,ai:I.ai?{...I.ai}:void 0,parser:I.parser?{...I.parser}:void 0,python:I.python?{...I.python}:void 0,visibility_rules:I.visibility_rules,position:A,ui:{color:((ie=I.ui)==null?void 0:ie.color)||Rt,bbox:{x1:Math.round(A.x),y1:Math.round(A.y),x2:Math.round(A.x)+ht,y2:Math.round(A.y)+mt}},ai_visible:I.ai_visible,connections:{incoming:[],outgoing:[]}};try{i(!0),c(null);const le=await fs(n.project_id,Z);g(le.node,le.project_updated_at)}catch(le){const de=le instanceof Error?le.message:String(le);c(de)}finally{i(!1)}},[n,i,c,g]),$e=y.useCallback(async(I,A)=>{if(n)try{const Z=await sc(n.project_id,I,A);m(I,Z)}catch(Z){const ie=Z instanceof Error?Z.message:String(Z);c(ie)}},[n,c,m]);y.useCallback(async(I,A)=>{var fe,jt;if(!n)return;let Z=A;try{const qe=JSON.parse(A);qe&&typeof qe=="object"&&qe.response&&(Z=qe.response)}catch{}const ie=((fe=I.ui)==null?void 0:fe.bbox)||Rr,le=ie.x2+100,de=ie.y1,ye=n.nodes||[];let xe=de;for(const qe of ye){const ut=((jt=qe.ui)==null?void 0:jt.bbox)||Rr;le<ut.x2+50&&le+ht>ut.x1-50&&xe<ut.y2+50&&xe+mt>ut.y1-50&&(xe=ut.y2+50)}const he={type:"text",title:`Generated from ${I.title}`,content:Z,content_type:"text/plain",ui:{color:Rt,bbox:{x1:le,y1:xe,x2:le+ht,y2:xe+mt}},ai_visible:!0,connections:{incoming:[],outgoing:[]}};try{const qe=await fs(n.project_id,he);g(qe.node,qe.project_updated_at);const ut=await ps(n.project_id,{from:I.node_id,to:qe.node.node_id,label:"generated"});b(ut.edges,ut.updated_at),d(null)}catch(qe){console.error("Failed to create new node from generation:",qe)}},[n,g,b,d]);const Nt=y.useCallback(I=>{var ie;const A=((ie=I.ui)==null?void 0:ie.bbox)??Rr,Z=A.x2-A.x1;return{x:A.x1+Z+150,y:A.y1}},[]),xt=y.useCallback(async I=>{var A,Z;if(n)try{d(I);const ie=ao(n,I);let le=null;if(ie&&(ie.type==="ai"||ie.type==="ai_improved")){const ye=((A=ie.ai)==null?void 0:A.response_type)||"single",xe=(Z=ie.meta)==null?void 0:Z.output_type;if(console.log(`[WorkspacePage] Node ${I}: responseType=${ye}, outputType=${xe}`),ye==="single"&&xe!=="mindmap"&&xe!=="folder"){const fe=Nt(ie),jt={type:"text",slug:"text",meta:{},position:fe,ai:{},ui:{bbox:{x1:fe.x,y1:fe.y,x2:fe.x+ht,y2:fe.y+mt},color:Rt},title:" ...",content:" ,   ..."};le=(await fs(n.project_id,jt)).node.node_id,await ps(n.project_id,{from:I,to:le}),le&&(_e(Un=>new Map(Un).set(I,le)),ae(Un=>new Set(Un).add(le)));const ut=await kr(n.project_id);ut&&r(ut)}else ae(fe=>new Set(fe).add(I))}const de=await Uk(n.project_id,I);if(ie&&(ie.type==="ai"||ie.type==="ai_improved"))if(de.isMultiNodeResult&&de.createdNodes){le?(await jh(n.project_id,le),_e(he=>{const fe=new Map(he);return fe.delete(I),fe}),ae(he=>{const fe=new Set(he);return le&&fe.delete(le),fe})):ae(he=>{const fe=new Set(he);return fe.delete(I),fe});const ye=await Gn(n.project_id,I);p(I,ye);const xe=await kr(n.project_id);xe&&r(xe),c(`  ${de.createdNodes.length} : ${de.createdNodes.map(he=>he.title).join(", ")}`),setTimeout(()=>c(""),5e3)}else if(de.content&&le){let ye=de.content;if(typeof ye=="string")try{const fe=JSON.parse(ye);fe.response&&(ye=fe.response)}catch{}await sc(n.project_id,le,{content:ye,title:`  ${ie.title}`}),_e(fe=>{const jt=new Map(fe);return jt.delete(I),jt}),ae(fe=>{const jt=new Set(fe);return le&&jt.delete(le),jt});const xe=await Gn(n.project_id,I);p(I,xe);const he=await kr(n.project_id);he&&r(he)}else{ae(he=>{const fe=new Set(he);return fe.delete(I),fe});const ye=await Gn(n.project_id,I);p(I,ye);const xe=await kr(n.project_id);xe&&r(xe),de.content&&(c(`  : ${de.content.substring(0,100)}...`),setTimeout(()=>c(""),5e3))}else if(!ie||ie.type!=="ai"&&ie.type!=="ai_improved"){m(de.nodeId,{content:de.content??void 0,content_type:de.contentType??void 0});const ye=await Gn(n.project_id,de.nodeId);p(de.nodeId,ye)}}catch(ie){const le=ie instanceof Error?ie.message:String(ie);c(le),_e(de=>{const ye=new Map(de);return ye.delete(I),ye}),ae(de=>{const ye=new Set(de);return ye.delete(I),ye})}finally{d(null)}},[n,d,m,p,c,r,_e,ae,Nt]),gn=y.useCallback(async I=>{if(n)try{d(I);const A=ao(n,I);let Z=null;if(A&&(A.type==="ai"||A.type==="ai_improved")){const le=Nt(A),de={type:"text",slug:"text",meta:{},position:le,ai:{},ui:{bbox:{x1:le.x,y1:le.y,x2:le.x+ht,y2:le.y+mt},color:Rt},title:" ...",content:" ,   ..."};Z=(await fs(n.project_id,de)).node.node_id,await ps(n.project_id,{from:I,to:Z}),Z&&(_e(he=>new Map(he).set(I,Z)),ae(he=>new Set(he).add(Z)));const xe=await kr(n.project_id);xe&&r(xe)}const ie=await Vk(n.project_id,I,{clone:!1});if(A&&(A.type==="ai"||A.type==="ai_improved")&&ie.content&&Z){let le=ie.content;if(typeof le=="string")try{const xe=JSON.parse(le);xe.response&&(le=xe.response)}catch{}await sc(n.project_id,Z,{content:le,title:`   ${A.title}`}),_e(xe=>{const he=new Map(xe);return he.delete(I),he}),ae(xe=>{const he=new Set(xe);return Z&&he.delete(Z),he});const de=await Gn(n.project_id,I);p(I,de);const ye=await kr(n.project_id);ye&&r(ye)}else if(!A||A.type!=="ai"&&A.type!=="ai_improved"){const le=ie.targetNodeId??ie.nodeId;m(le,{content:ie.content??void 0,content_type:ie.contentType??void 0});const de=await Gn(n.project_id,le);p(le,de)}}catch(A){const Z=A instanceof Error?A.message:String(A);c(Z),_e(ie=>{const le=new Map(ie);return le.delete(I),le})}finally{d(null)}},[n,d,m,p,c,r,_e,ae,Nt]),en=y.useCallback(async I=>{if(n)try{console.log("Deleting node:",I),ee.current.has(I)&&(clearTimeout(ee.current.get(I)),ee.current.delete(I)),ge.current.delete(I);const A=await jh(n.project_id,I);w(I),r(A),console.log("Node deleted successfully:",I)}catch(A){const Z=A instanceof Error?A.message:String(A);console.error("Failed to delete node:",Z),c(Z)}},[n,w,c,r]),Be=y.useCallback((I,A)=>{if(!n)return;const Z=ao(n,I);if(!Z)return;const ie={...Z.meta??{},...A};m(I,{meta:ie}),$e(I,{meta:ie}),D(!0)},[n,m,$e]),ot=y.useCallback((I,A)=>{if(!n)return;const Z=ao(n,I);if(!Z)return;const ie=Z.ui??{color:Rt,bbox:{...Rr}},le={color:typeof A.color=="string"&&A.color.trim().length>0?A.color:ie.color,bbox:A.bbox?{x1:A.bbox.x1??ie.bbox.x1,y1:A.bbox.y1??ie.bbox.y1,x2:A.bbox.x2??ie.bbox.x2,y2:A.bbox.y2??ie.bbox.y2}:ie.bbox};m(I,{ui:le}),D(!0),ge.current.set(I,le);const de=ee.current.get(I);de&&window.clearTimeout(de);const ye=window.setTimeout(()=>{ee.current.delete(I);const xe=ge.current.get(I);xe&&(ge.current.delete(I),$e(I,{ui:xe}))},200);ee.current.set(I,ye)},[n,m,$e]),St=y.useCallback((I,A)=>{m(I,{content:A,content_type:"text/markdown"}),$e(I,{content:A,content_type:"text/markdown"}),D(!0)},[m,$e]),tn=y.useCallback((I,A)=>{m(I,{title:A}),$e(I,{title:A}),D(!0)},[m,$e]),Bt=y.useCallback((I,A,Z)=>{var de;if(Z!=null&&Z.replace){m(I,{ai:A}),$e(I,{ai:A}),D(!0);return}const le={...((de=ao(n,I))==null?void 0:de.ai)??{},...A};m(I,{ai:le}),$e(I,{ai:le}),D(!0)},[n,$e,m]),Ze=y.useCallback(async({from:I,to:A})=>{if(n)try{const Z=await ps(n.project_id,{from:I,to:A});b(Z.edges,Z.updated_at)}catch(Z){const ie=Z instanceof Error?Z.message:String(Z);c(ie)}},[n,b,c]),De=y.useCallback(async I=>{if(!(!n||I.length===0))try{let A=null;for(const Z of I)A=await Gk(n.project_id,Z.from,Z.to);A&&b(A.edges,A.updated_at)}catch(A){const Z=A instanceof Error?A.message:String(A);c(Z)}},[n,b,c]),Re=y.useCallback(async()=>{if(n)try{M(!0),v({status:"idle"}),await Vx(n.project_id),v({status:"success",message:" "}),D(!1),B(new Date)}catch(I){const A=I instanceof Error?I.message:String(I);v({status:"error",message:`  : ${A}`})}finally{M(!1)}},[n]),nn=y.useCallback(async()=>{if(!(!n||!await ke({title:" ?",message:"         .    .",confirmText:"",cancelText:"",type:"danger"})))try{i(!0),await qk(n.project_id),o(),t("/")}catch(A){const Z=A instanceof Error?A.message:String(A);c(Z)}finally{i(!1)}},[n,i,o,t,c]),kt=y.useCallback(()=>{n&&(V(n.title||""),X(!0))},[n]),kn=y.useCallback(async()=>{if(!(!n||!se.trim()))try{const I=await Eh(n.project_id,{title:se.trim()});r(I),X(!1)}catch(I){const A=I instanceof Error?I.message:String(I);c(A)}},[n,se,r,c]),Ut=y.useCallback(()=>{X(!1),V("")},[]),yt=y.useCallback(()=>{n&&(J(n.description||""),Y(!0))},[n]),_r=y.useCallback(async()=>{if(n)try{const I=await Eh(n.project_id,{description:G.trim()});r(I),Y(!1)}catch(I){const A=I instanceof Error?I.message:String(I);c(A)}},[n,G,r,c]),Zr=y.useCallback(()=>{Y(!1),J("")},[]);return e?z?a.jsxs("div",{className:"flex h-screen flex-col items-center justify-center gap-4 bg-slate-900 text-slate-200",children:[a.jsxs("div",{className:"max-w-lg text-center",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Project unavailable"}),a.jsx("p",{className:"mt-2 text-sm text-slate-400",children:z})]}),a.jsx("button",{type:"button",className:"rounded bg-primary px-4 py-2 text-sm text-white",onClick:()=>t("/"),children:"Back to project list"})]}):(y.useEffect(()=>{const I=setTimeout(()=>{window.dispatchEvent(new Event("resize"))},300);return()=>clearTimeout(I)},[]),a.jsxs("div",{className:"relative h-screen min-h-0 p-4",style:{width:"100vw",height:"100vh"},children:[a.jsx("aside",{className:"absolute left-4 z-10 flex flex-col",style:{top:"120px",width:R?48:k,height:"calc(100vh - 136px)"},children:a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsx(Yj,{project:n,selectedNodeId:u,onSelectNode:d,onCopyNode:qt,onOpenNodeModal:S,collapsed:R,onToggleCollapse:()=>C(!R)})})}),!R&&a.jsx("div",{className:"absolute z-10",style:{left:k+16,top:"120px",height:"calc(100vh - 136px)"},children:a.jsx(sE,{orientation:"vertical",ariaLabel:"   ",onResize:I=>E(A=>iE(A+I,eE,tE))})}),a.jsxs("div",{className:"flex flex-col gap-4 h-full min-h-0",children:[a.jsxs("header",{className:"flex items-center justify-between rounded-lg bg-slate-800 p-4 shadow",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 text-slate-200",children:[a.jsx("button",{type:"button",className:"rounded bg-slate-700 px-3 py-1 text-sm hover:bg-slate-600 transition",onClick:()=>t("/"),children:" Projects"}),a.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Workspace"})]}),a.jsxs("div",{className:"ml-4",children:[Q?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:se,onChange:I=>V(I.target.value),onKeyDown:I=>{I.key==="Enter"&&kn(),I.key==="Escape"&&Ut()},className:"text-2xl font-semibold bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white",autoFocus:!0}),a.jsx("button",{onClick:kn,className:"text-green-400 hover:text-green-300 p-1",title:"",children:""}),a.jsx("button",{onClick:Ut,className:"text-red-400 hover:text-red-300 p-1",title:"",children:""})]}):a.jsxs("div",{className:"flex items-center gap-2 group",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:(n==null?void 0:n.title)??"Loading..."}),a.jsx("button",{onClick:kt,className:"opacity-0 group-hover:opacity-100 text-slate-400 hover:text-slate-300 p-1 transition-opacity",title:" ",children:""})]}),re?a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("input",{type:"text",value:G,onChange:I=>J(I.target.value),onKeyDown:I=>{I.key==="Enter"&&_r(),I.key==="Escape"&&Zr()},className:"text-sm bg-slate-700 border border-slate-600 rounded px-2 py-1 text-slate-300",placeholder:" ...",autoFocus:!0}),a.jsx("button",{onClick:_r,className:"text-green-400 hover:text-green-300 p-1",title:"",children:""}),a.jsx("button",{onClick:Zr,className:"text-red-400 hover:text-red-300 p-1",title:"",children:""})]}):a.jsxs("div",{className:"flex items-center gap-2 group",children:[a.jsx("p",{className:"text-sm text-slate-400",children:(n==null?void 0:n.description)||" "}),a.jsx("button",{onClick:yt,className:"opacity-0 group-hover:opacity-100 text-slate-400 hover:text-slate-300 p-1 transition-opacity",title:" ",children:""})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(qj,{project:n,compact:!0}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:Re,disabled:!n||H,className:`h-9 px-4 text-sm text-white transition disabled:opacity-50 flex items-center gap-2 rounded ${j?"bg-orange-600 hover:bg-orange-500":"bg-blue-600 hover:bg-blue-500"}`,children:H?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin",children:""}),""]}):j?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-orange-200",children:""}),"*"]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-green-300",children:""}),""]})}),a.jsx("button",{onClick:nn,className:"h-9 w-24 rounded bg-rose-600 px-4 text-sm text-white transition hover:bg-rose-500 disabled:opacity-50",disabled:!n||s,children:""})]})]})]}),l&&a.jsx("div",{className:"rounded bg-red-500/20 p-3 text-sm text-red-200",children:l}),_.status!=="idle"&&a.jsx("div",{className:`rounded p-2 text-sm ${_.status==="success"?"bg-emerald-500/20 text-emerald-200":"bg-amber-500/20 text-amber-100"}`,children:_.message}),a.jsx("div",{className:"flex-1 overflow-hidden rounded-lg bg-slate-800 shadow",style:{minHeight:"500px",position:"relative",display:"flex",flexDirection:"column"},children:a.jsx(Hj,{project:n,selectedNodeId:u,onSelectNode:d,onRunNode:xt,onRegenerateNode:gn,onDeleteNode:en,onChangeNodeMeta:Be,onChangeNodeContent:St,onChangeNodeTitle:tn,onChangeNodeAi:Bt,onChangeNodeUi:ot,onAddNodeFromPalette:$t,onCopyNode:qt,onCreateEdge:Ze,onRemoveEdges:De,providerOptions:mn,loading:s,sidebarCollapsed:R,sidebarWidth:k,generatingNodes:ue,generatingEdges:Pe})}),a.jsx("aside",{className:"absolute right-4 z-10 flex flex-col",style:{top:"120px",width:L?48:320,height:"calc(100vh - 136px)"},children:a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsx(Gj,{onCreateNode:Zt,disabled:s||!n,collapsed:L,onToggleCollapse:()=>W(!L)})})})]}),U&&n&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:a.jsxs("div",{className:"max-w-4xl max-h-[80vh] w-full mx-4 bg-slate-800 rounded-lg shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-white",children:((qr=n.nodes.find(I=>I.node_id===U))==null?void 0:qr.title)||""}),a.jsx("button",{type:"button",onClick:()=>S(null),className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-white transition rounded",children:""})]}),a.jsx("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:(()=>{const I=n.nodes.find(A=>A.node_id===U);return I?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"ID:"}),a.jsx("div",{className:"text-sm text-slate-400 font-mono",children:I.node_id})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:":"}),a.jsx("div",{className:"text-sm text-slate-400",children:I.type})]}),I.content&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:":"}),a.jsx("div",{className:"text-sm text-slate-200 bg-slate-900 p-3 rounded max-h-40 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap",children:I.content})})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{type:"button",onClick:()=>{d(U),S(null)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded transition",children:"  "}),a.jsx("button",{type:"button",onClick:()=>S(null),className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded transition",children:""})]})]}):a.jsx("div",{children:"  "})})()})]})}),a.jsx(Ge,{})]})):a.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-900 text-slate-200",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-lg",children:"Project ID is missing."}),a.jsx("button",{type:"button",className:"mt-4 rounded bg-primary px-4 py-2 text-sm text-white",onClick:()=>t("/"),children:"Back to projects"})]})})}function sE({orientation:e,onResize:t,ariaLabel:n}){const r=e==="vertical",o=y.useCallback(i=>{if(i.button!==0)return;i.preventDefault();const l=i.currentTarget;l.setPointerCapture(i.pointerId);let c=r?i.clientX:i.clientY;const u=f=>{const p=r?f.clientX:f.clientY,m=p-c;m!==0&&(t(m),c=p)},d=()=>{l.hasPointerCapture(i.pointerId)&&l.releasePointerCapture(i.pointerId),window.removeEventListener("pointermove",u)};window.addEventListener("pointermove",u),window.addEventListener("pointerup",d,{once:!0}),window.addEventListener("pointercancel",d,{once:!0})},[r,t]),s=r?"w-3 cursor-ew-resize":"h-3 cursor-ns-resize";return a.jsxs("div",{role:"separator","aria-label":n,className:`group relative flex flex-none items-center justify-center ${s}`,onPointerDown:o,children:[a.jsx("span",{className:`pointer-events-none rounded-full bg-slate-600/40 transition group-hover:bg-slate-400/70 ${r?"h-[70%] w-px":"h-px w-[70%]"}`}),a.jsx("span",{className:"pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-[10px] text-slate-300 opacity-0 transition group-hover:opacity-100",children:r?"":""})]})}function iE(e,t,n){return Math.min(n,Math.max(t,e))}function lE(){const e=fi(),[t,n]=y.useState(""),[r,o]=y.useState(""),[s,i]=y.useState(""),[l,c]=y.useState(!1),[u,d]=y.useState(null),f=async p=>{if(p.preventDefault(),!t.trim()){d("Title is required");return}c(!0),d(null);try{const m=await Kk({title:t.trim(),description:s.trim(),project_id:r.trim()?ic(r):void 0});e(`/projects/${m.project_id}`)}catch(m){d(m instanceof Error?m.message:String(m)),c(!1)}};return a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 px-4 py-12 text-slate-100",children:a.jsxs("div",{className:"w-full max-w-xl rounded-2xl border border-slate-800 bg-slate-900/80 p-8 shadow",children:[a.jsx("button",{type:"button",className:"mb-6 inline-flex items-center gap-2 text-sm text-slate-400 hover:text-primary",onClick:()=>e("/"),children:" Back to projects"}),a.jsx("h1",{className:"text-2xl font-semibold",children:"Create a New Project"}),a.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"We will prepare an empty workspace with a starter brief node and create a mirrored folder in Drive."}),a.jsxs("form",{className:"mt-6 space-y-4",onSubmit:f,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200",htmlFor:"project-title",children:"Project title"}),a.jsx("input",{id:"project-title",type:"text",value:t,onChange:p=>{n(p.target.value),r||o(ic(p.target.value))},placeholder:"Snack launch campaign",className:"mt-1 w-full rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm focus:border-primary focus:outline-none",disabled:l,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200",htmlFor:"project-id",children:"Project ID (optional)"}),a.jsx("input",{id:"project-id",type:"text",value:r,onChange:p=>o(p.target.value),onBlur:()=>r&&o(ic(r)),placeholder:"project-2025-launch",className:"mt-1 w-full rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm focus:border-primary focus:outline-none",disabled:l}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Lowercase letters, numbers, dash or underscore. Leave blank to auto-generate."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200",htmlFor:"project-description",children:"Description"}),a.jsx("textarea",{id:"project-description",value:s,onChange:p=>i(p.target.value),rows:4,placeholder:"Short summary for teammates",className:"mt-1 w-full rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm focus:border-primary focus:outline-none",disabled:l})]}),u&&a.jsx("p",{className:"text-sm text-rose-300",children:u}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"submit",className:"rounded bg-primary px-4 py-2 text-sm font-medium text-white shadow hover:bg-primary/90 disabled:cursor-not-allowed disabled:opacity-60",disabled:l,children:l?"Creating":"Create project"}),a.jsx("button",{type:"button",className:"rounded border border-slate-700 px-4 py-2 text-sm text-slate-300 hover:border-primary/60 hover:text-primary",onClick:()=>e("/"),disabled:l,children:"Cancel"})]})]})]})})}function ic(e){return e.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9_-]/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")||`project-${Date.now()}`}function aE(){const e=fi(),[t,n]=y.useState(null),[r,o]=y.useState(!1),[s,i]=y.useState(null),l=async c=>{if(c.preventDefault(),!t){i("Select an .lcfz archive to import");return}o(!0),i(null);try{const u=await ej(t);e(`/projects/${u}`)}catch(u){i(u instanceof Error?u.message:String(u)),o(!1)}};return a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 px-4 py-12 text-slate-100",children:a.jsxs("div",{className:"w-full max-w-xl rounded-2xl border border-slate-800 bg-slate-900/80 p-8 shadow",children:[a.jsx("button",{type:"button",className:"mb-6 inline-flex items-center gap-2 text-sm text-slate-400 hover:text-primary",onClick:()=>e("/"),children:" Back to projects"}),a.jsx("h1",{className:"text-2xl font-semibold",children:"Import Project"}),a.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"Upload a .lcfz archive exported from another workspace. Assets will be mirrored to your shared Drive root."}),a.jsxs("form",{className:"mt-6 space-y-4",onSubmit:l,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200",htmlFor:"project-archive",children:"Project archive (.lcfz)"}),a.jsx("input",{id:"project-archive",type:"file",accept:".lcfz,.zip",onChange:c=>{var u;return n(((u=c.target.files)==null?void 0:u[0])??null)},disabled:r,className:"mt-1 w-full text-sm text-slate-300"}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Max 200 MB. Contains project JSON and asset folders."})]}),s&&a.jsx("p",{className:"text-sm text-rose-300",children:s}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"submit",className:"rounded bg-primary px-4 py-2 text-sm font-medium text-white shadow hover:bg-primary/90 disabled:cursor-not-allowed disabled:opacity-60",disabled:r,children:r?"Importing":"Import project"}),a.jsx("button",{type:"button",className:"rounded border border-slate-700 px-4 py-2 text-sm text-slate-300 hover:border-primary/60 hover:text-primary",onClick:()=>e("/"),disabled:r,children:"Cancel"})]})]})]})})}function cE(){return a.jsx(Hx,{children:a.jsxs(Ik,{children:[a.jsx(uo,{path:"/",element:a.jsx(_j,{})}),a.jsx(uo,{path:"/projects/new",element:a.jsx(lE,{})}),a.jsx(uo,{path:"/projects/import",element:a.jsx(aE,{})}),a.jsx(uo,{path:"/projects/:projectId/*",element:a.jsx(oE,{})}),a.jsx(uo,{path:"*",element:a.jsx(Tk,{to:"/",replace:!0})})]})})}window.addEventListener("error",e=>{console.error("Unhandled error:",e.error)});window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason),e.preventDefault()});lc.createRoot(document.getElementById("root")).render(a.jsx(O.StrictMode,{children:a.jsx(Rk,{children:a.jsx(ga,{children:a.jsx(cE,{})})})}));
